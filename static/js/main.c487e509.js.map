{"version":3,"file":"static/js/main.c487e509.js","mappings":"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","sources":["State/utils.ts","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","Dimensions.ts","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","Traits/HasHitbox.ts","Traits/CanFaceADirection.ts","Traits/CanHandleDrop.ts","Traits/HasCounterSpace.ts","Traits/CanBeCarried.ts","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","Controls/index.ts","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","Objects/Character.ts","Objects/Wall.ts","Objects/Floor.ts","Objects/FoodItem.ts","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","Objects/Tray.ts","Objects/CuttingBoard.ts","Objects/Fryer.ts","Objects/BreadingTable.ts","Objects/TrashCan.ts","Renderer/AssetManager.ts","Renderer/Animations.ts","Renderer/renderFoodItemsInArea.ts","Objects/OrderBoard.ts","Objects/PickUpCounter.ts","Objects/ScoreCounter.ts","Objects/Bucket.ts","Objects/TrayStack.ts","Objects/Timer.ts","Objects/StarDisplay.ts","Traits/CanBlockMovement.ts","Traits/CanBeControlled.ts","Traits/CanCarry.ts","Traits/CanChop.ts","Traits/CanProivde.ts","Traits/HasId.ts","Traits/HasOverlay.ts","Traits/CanBread.ts","Traits/HasBoundingbox.ts","Traits/HasOrigin.ts","Traits/index.ts","Renderer/createGameRenderer.ts","Traits/HasRenderer.ts","Renderer/combineRenderers.ts","Renderer/create2DRenderer.ts","Renderer/create3DRenderer.ts","Renderer/createContentsRenderer.ts","Renderer/createProgressRenderer.ts","Renderer/createTextRenderer.ts","Renderer/createButtonRenderer.ts","Renderer/createSpicyIconRenderer.ts","Menus/GameText.ts","Menus/Button.ts","Menus/CharacterMenu.ts","Menus/loadCharacterMenu.ts","Levels/utils.ts","Levels/HowWillWeTopThis.ts","Levels/LetsGetSaucy.ts","Levels/TheOriginal.ts","Levels/TrulyAPleasure.ts","Levels/TurnUpTheHeat.ts","Levels/index.ts","Menus/loadLevelMenu.ts","Menus/Overlay.ts","Menus/loadFinishedLevelMenu.ts","Menus/loadPausedLevelMenu.ts","State/persistence.ts","State/initialState.ts","Menus/LegoLogo.ts","Menus/CFALogo.ts","Menus/loadTutorialScreen.ts","State/gameReducer.ts","../node_modules/@babel/runtime/helpers/esm/toArray.js","startGame.ts","index.tsx"],"sourcesContent":["import { GameObject } from \"./GameObject\";\n\n\nexport function updateGameObjectById(objects: GameObject[], target: GameObject){\n    return objects.map( object => object.id === target.id ? target : object );\n}\n\nexport function updateGameObjectsWhere(objects: GameObject[], filter: (object: GameObject) => boolean, update: <T extends GameObject>(object: T) => GameObject) : GameObject[]{\n    return objects.map( object => filter(object) ? update(object) : object)\n}\n\nexport function removeGameObjectById(objects: GameObject[], target: GameObject){\n    return objects.filter( object => object.id !== target.id)\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export const WIDTH = window.innerWidth\nexport const HEIGHT = window.innerHeight\n\nexport const GAME_WIDTH_STUDS = 40;\nexport const GAME_HEIGHT_STUDS = 14;\n\nexport const font = {\n    small: WIDTH*0.015,\n    medium: WIDTH*0.03,\n    large: 60\n}\n\nexport type Dimension = string | number;\n\nexport type Pixels = number & {\n    __pixels__: true;\n}\n\n// @ts-ignore\nwindow.toStuds = function(a: number){\n    return a / (WIDTH / GAME_WIDTH_STUDS)\n}\n\nexport function coalesceX(a: Dimension): Pixels {\n    if (typeof a === 'number') return a as Pixels;\n    if(a.endsWith('%')) return parsePercent(a, WIDTH);\n    if (a.endsWith('studs')) return parseFloat(a) * (WIDTH / GAME_WIDTH_STUDS) as Pixels;\n    throw Error(`Cannot Coalesce \"${a}\"`)\n}\n\nexport function coalesceZ(a: Dimension): Pixels {\n    if (typeof a === 'number') return a as Pixels;\n    if(a.endsWith('%')) throw Error('Does a % measurement in the z axis make sense?')\n    if (a.endsWith('studs')) return parseFloat(a) * (WIDTH / GAME_WIDTH_STUDS) as Pixels;\n    throw Error(`Cannot Coalesce \"${a}\"`)\n}\n\nexport function coalesceY(a: Dimension): Pixels {\n    if (typeof a === 'number') return a as Pixels;\n    if(a.endsWith('%')) return parsePercent(a, HEIGHT);\n    if (a.endsWith('studs')) return parseFloat(a) * (WIDTH / GAME_WIDTH_STUDS * 1.4) as Pixels;\n    throw Error(`Cannot Coalesce \"${a}\"`)\n}\n\nfunction parsePercent(a: string, containerSize: number): Pixels {\n    return parseFloat(a) / 100 * containerSize as Pixels\n}\n\nexport type Direction = 'north' | 'south' | 'east' | 'west';\n\nexport type Vector = {\n    x: number;\n    z: number;\n}\n\nexport const createVectors = (speed: Dimension): Record<Direction, Vector> => {\n    return {\n        north: {\n            x: 0,\n            z: +coalesceZ(speed)\n        },\n        south: {\n            x: 0,\n            z: -coalesceZ(speed)\n        },\n        east: {\n            x: +coalesceX(speed),\n            z: 0\n        },\n        west: {\n            x: -coalesceX(speed),\n            z: 0\n        }\n    }\n}\n\nexport const createVector = (speed: Dimension, direction: Direction) => createVectors(speed)[direction]","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _s, _e;\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}","import { coalesceX, coalesceY, coalesceZ, Pixels, Vector } from \"Dimensions\";\nimport { GameObject } from \"State\";\n\nexport type Hitbox = {\n    x: Pixels;\n    z: Pixels;\n    y: Pixels;\n    dx: Pixels;\n    dz: Pixels;\n}\n\nexport type HasHitBox = {\n    hitbox: Hitbox\n}\n\nexport const hasHitbox = (x: any): x is HasHitBox => typeof x.hitbox !== 'undefined'\n\nexport type Dimension = string | number;\n\nexport function createWithHitbox(dx: Dimension, dz: Dimension, x: Dimension = 0, z: Dimension = 0, y: Dimension = 0): HasHitBox {\n    return {\n        hitbox: {\n            dx: coalesceX(dx),\n            dz: coalesceZ(dz),\n            x: coalesceX(x),\n            z: coalesceZ(z),\n            y: coalesceY(y)\n        }\n    }\n}\n\nexport function moveObject<T extends HasHitBox>(object: T, vector: Vector): T {\n    return {\n        ...object,\n        hitbox: {\n            ...object.hitbox,\n            x: object.hitbox.x + vector.x as Pixels,\n            z: object.hitbox.z + vector.z as Pixels,\n        }\n    }\n}\n\nexport function getAjacentObjects(target: HasHitBox, objects: GameObject[]) {\n    const padding = coalesceX('1studs')\n    const { hitbox } = target;\n\n    const adjustedHitbox: Hitbox = {\n        x: hitbox.x - padding as Pixels,\n        z: hitbox.z - padding as Pixels,\n        y: hitbox.y,\n        dx: hitbox.dx + (2 * padding) as Pixels,\n        dz: hitbox.dz + (2 * padding) as Pixels,\n    }\n\n    return getOverlappingObjects(adjustedHitbox, objects);\n}\n\nexport function hasCollision(object: HasHitBox, objects: GameObject[]): boolean {\n    return getOverlappingObjects(object.hitbox, objects).length > 0\n}\n\nexport function getOverlappingObjects<T extends GameObject>(hitbox: Hitbox, objects: T[]): T[] {\n    return objects.filter((object) => hasHitbox(object) && overlaps(hitbox, object.hitbox))\n}\n\nexport function overlaps(a: Hitbox, b: Hitbox) {\n    return (\n        a.x < b.x + b.dx &&\n        a.x + a.dx > b.x &&\n        a.z < b.z + b.dz &&\n        a.dz + a.z > b.z\n    )\n}","import { coalesceX, Direction, Pixels } from \"Dimensions\";\nimport { GameObject } from \"State\";\nimport { getOverlappingObjects, hasHitbox, HasHitBox, Hitbox, overlaps } from \"./HasHitbox\";\n\nexport type CanFaceADirection = {\n    facing: Direction;\n}\n\nexport const createCanFaceADirection = (facing: Direction = 'south'): CanFaceADirection => ({\n    facing\n})\n\nexport const canFaceADirection = (x: any): x is CanFaceADirection => typeof x.facing !== 'undefined'\n\nexport function getObjectsInfrontOf<T extends GameObject>(target: CanFaceADirection & HasHitBox, objects: T[]) : T[] {\n    const adjustedHitbox = getAreaInfrontOf(target)\n    return getOverlappingObjects(adjustedHitbox, objects)\n}\n\nexport function getObjectsFacing<T extends GameObject>(target: HasHitBox, objects: T[]) {\n    const { hitbox } = target\n    return objects.filter((object) => \n        canFaceADirection(object)  \n        && hasHitbox(object)\n        && overlaps(hitbox, getAreaInfrontOf(object))\n    )\n}\n\nfunction getAreaInfrontOf({ hitbox, facing }: CanFaceADirection & HasHitBox) {\n    const offset = offsets[facing];\n\n    const adjustedHitbox: Hitbox = {\n        x: hitbox.x + offset.x as Pixels,\n        z: hitbox.z + offset.z as Pixels,\n        y: hitbox.y,\n        dx: hitbox.dx + offset.dx as Pixels,\n        dz: hitbox.dz + offset.dz as Pixels,\n    }\n\n    return adjustedHitbox\n}\n\nconst padding = coalesceX('1studs')\nconst offsets = {\n    north: {\n        x: +(padding/2),\n        z: +padding,\n        dx: -padding,\n        dz: 0\n    },\n    south: {\n        x: +(padding/2),\n        z: -padding,\n        dx: -padding,\n        dz: 0\n    },\n    east: {\n        x: +padding,\n        z: +(padding),\n        dx: 0,\n        dz: -(padding*2)\n    },\n    west: {\n        x: -padding,\n        z: +(padding),\n        dx: 0,\n        dz: -(padding*2)\n    },\n}\n","import { GameObject } from \"State\"\nimport { HasHitBox } from \"./HasHitbox\"\n\nexport type CanHandleDrop = {\n    canHandleDrop(object: GameObject): object is GameObject & HasHitBox\n    handleDropped(this: GameObject & CanHandleDrop & HasHitBox, object: GameObject & HasHitBox, objects: GameObject[], frameNumber: number): GameObject[]\n}\n\nexport const canHandleDrop = (object: GameObject) => (x: any): x is CanHandleDrop => {\n    if(typeof x.canHandleDrop === 'function'){\n        return x.canHandleDrop(object);\n    } \n    return false\n}","import { coalesceY } from \"Dimensions\"\nimport { GameObject, updateGameObjectById } from \"State\"\nimport { CanHandleDrop } from \"./CanHandleDrop\"\nimport { hasHitbox, HasHitBox } from \"./HasHitbox\"\n\nexport type HasCounterSpace =  CanHandleDrop & {\n    counterSpaceTakenBy: number | null\n}\n\nexport const createWithCounterSpace = (): HasCounterSpace => ({\n    counterSpaceTakenBy: null,\n    canHandleDrop,\n    handleDropped\n})\n\nexport const hasCounterSpace = (x: any): x is HasCounterSpace => x.counterSpaceTakenBy !== undefined\n\nexport const counterSpaceContains = (object: GameObject) => (x: any) => hasCounterSpace(x) && x.counterSpaceTakenBy === object.id\n\nfunction canHandleDrop(this: HasCounterSpace, object: GameObject) : object is GameObject & HasHitBox {\n    return this.counterSpaceTakenBy === null && hasHitbox(object)\n}\n\nfunction handleDropped(this: GameObject & HasCounterSpace & HasHitBox, droppedObject: GameObject & HasHitBox, objects: GameObject[]){\n    const counterSpace: GameObject & HasCounterSpace = {\n        ...this,\n        counterSpaceTakenBy: droppedObject.id\n    }\n    \n    objects = updateGameObjectById(objects, counterSpace);\n\n    objects = updateGameObjectById(objects, {\n        ...droppedObject,\n        hitbox: {\n            ...this.hitbox,\n            y: coalesceY('1.1studs')\n        }\n    })\n\n    return objects;\n}","import { coalesceX, Direction, Pixels, Vector } from \"Dimensions\";\nimport { GameObject, GameState, updateGameObjectById, updateGameObjectsWhere } from \"State\";\nimport { CanCarry } from \"./CanCarry\";\nimport { CanFaceADirection, getObjectsInfrontOf } from \"./CanFaceADirection\";\nimport { CanHandleDrop, canHandleDrop } from \"./CanHandleDrop\";\nimport { counterSpaceContains } from \"./HasCounterSpace\";\nimport { HasHitBox } from \"./HasHitbox\";\n\nexport type CanBeCarried = {\n    canBeCarried: true;\n    carriedBy: number | null;\n    handlePickedUpBy: typeof handlePickedUpBy;\n    canBeDropped: typeof canBeDropped;\n    handleDrop: typeof handleDrop;\n}\n\nexport const canBeCarried = (x: any): x is CanBeCarried => Boolean(x?.canBeCarried)\n\nexport const canBePickedUp = (x: any): x is CanBeCarried => canBeCarried(x) && x.carriedBy === null\n\nexport const createCanBeCarried = (): CanBeCarried => ({\n    canBeCarried: true,\n    handlePickedUpBy,\n    carriedBy: null,\n    canBeDropped,\n    handleDrop\n})\n\nfunction handlePickedUpBy(this: GameObject & CanBeCarried & HasHitBox, carrier: GameObject & HasHitBox & CanFaceADirection & CanCarry, objects: GameObject[]) {\n    let object: GameObject & CanBeCarried & HasHitBox = {\n        ...this,\n        carriedBy: carrier.id\n    }\n\n    object = positionInfrontOfCarrier(object, objects)\n\n    objects = updateGameObjectById(objects, object)\n\n    objects = updateGameObjectsWhere(objects, counterSpaceContains(object), space => ({\n        ...space,\n        counterSpaceTakenBy: null\n    }))\n\n    return objects\n}\n\nfunction canBeDropped(this: GameObject & CanBeCarried & HasHitBox, objects: GameObject[]): boolean {\n    const carrier = objects.find( carrier => carrier.id === this.carriedBy) as HasHitBox & CanCarry & CanFaceADirection\n\n    const [ somethingToDropOn ] = getObjectsInfrontOf(carrier, objects.filter(canHandleDrop(this))) as CanHandleDrop[];\n\n    if(somethingToDropOn){\n        return true;\n    }\n\n    return false;\n}\n\nfunction handleDrop(this: GameObject & CanBeCarried & HasHitBox, objects: GameObject[], frameNumber: number): GameObject[] {\n\n    let object = {\n        ...this,\n        carriedBy: null\n    }\n\n    const carrier = objects.find( carrier => carrier.id === this.carriedBy) as HasHitBox & CanCarry & CanFaceADirection\n\n    let [ somethingToDropOn ] = getObjectsInfrontOf(carrier, objects.filter(canHandleDrop(this))) as (GameObject & CanHandleDrop & HasHitBox)[];\n\n    objects = updateGameObjectById(objects, object);\n\n    objects = somethingToDropOn.handleDropped(object, objects, frameNumber);\n\n    return objects\n}\n\nfunction positionInfrontOfCarrier(object: GameObject & HasHitBox & CanBeCarried, objects: GameObject[]){\n    const carrier = objects.find( carrier => carrier.id === object.carriedBy) as HasHitBox & CanCarry & CanFaceADirection\n    const offset = offsets[carrier.facing]\n    return {\n        ...object,\n        hitbox: {\n            ...object.hitbox,\n            x: carrier.hitbox.x + offset.x as Pixels,\n            z: carrier.hitbox.z + offset.z as Pixels,\n            y: coalesceX('2studs')\n        }\n    }\n}\n\nexport function canBeCarriedReducer(object: GameObject, state: GameState): GameState {\n    if(!canBeCarried(object) || object.carriedBy === null) return state;\n\n    object = positionInfrontOfCarrier(object, state.objects);\n\n    return {\n        ...state,\n        objects: updateGameObjectById(state.objects, object)\n    }\n}\n\n\nconst offsets : Record<Direction, Vector> = {\n    north: {\n        x: 0,\n        z: +coalesceX('1.5studs')\n    },\n    south: {\n        x: 0,\n        z: -coalesceX('1.5studs')\n    },\n    east: {\n        x: +coalesceX('1.5studs'),\n        z: 0\n    },\n    west: {\n        x: -coalesceX('1.5studs'),\n        z: 0\n    }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nexport default function _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  };\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n      return ContinueSentinel;\n    }\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) {\n              if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            }\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","\nexport type ControlName = 'down' | 'up' | 'left' | 'right' | 'primaryAction' | 'secondaryAction' | 'tertiaryAction' | 'start' | 'bumper' | 'minus'\n\nexport type ControllerId = 1 | 2 | 3 | 4;\n\nexport type ControllerData = Record<ControlName, boolean>;\n\nclass Controller {\n\n    down: boolean = false\n    up: boolean = false\n    left: boolean = false\n    right: boolean = false\n    primaryAction: boolean = false\n    secondaryAction: boolean = false\n    tertiaryAction: boolean = false\n    start: boolean = false\n    bumper: boolean = false\n    minus: boolean = false;\n\n    id: ControllerId;\n\n    constructor(id: ControllerId){\n        this.id = id\n    }\n\n    isPressed(control: ControlName){\n        return this[control]\n    }\n\n    justPressed(control: ControlName){\n        return this[control] && this.lastInput && !this.lastInput[control]\n    }\n\n    justReleased(control: ControlName){\n        return !this[control] && this.lastInput && this.lastInput[control]\n    }\n\n    lastInput: ControllerData | null = null\n\n    recordInput(){\n        this.lastInput = { ...this }\n        const gamepadIndex = this.id - 1;\n        const gamepadInput = getGamePadInput(gamepadIndex);\n        if(gamepadInput) Object.assign(this, gamepadInput);\n    }\n}\n\nexport const Controls  = {\n    1: new Controller(1),\n    2: new Controller(2),\n    3: new Controller(3),\n    4: new Controller(4),\n    [Symbol.iterator]: function*(){\n        yield Controls[1];\n        yield Controls[2];\n        yield Controls[3];\n        yield Controls[4];\n    }\n}\n\nexport function recordInputs(){\n    for(let controllerId of [1, 2, 3, 4]){\n        Controls[controllerId as ControllerId].recordInput();\n    }\n}\n\nfunction getGamePadInput(gamepadIndex: number): false | ControllerData {\n    const gamepads = navigator.getGamepads();\n    const gamepad = gamepads[gamepadIndex];\n    if(!gamepad){\n        return false;\n    }\n    return {\n        up: gamepad.axes[1] === -1,\n        down: gamepad.axes[1] === 1,\n        left: gamepad.axes[0] === -1,\n        right: gamepad.axes[0] === 1,\n        primaryAction: gamepad.buttons[1].pressed === true,\n        secondaryAction: gamepad.buttons[0].pressed === true || gamepad.buttons[2].pressed === true,\n        tertiaryAction: gamepad.buttons[3].pressed === true,\n        start: gamepad.buttons[9].pressed === true,\n        bumper: gamepad.buttons[4].pressed === true || gamepad.buttons[5].pressed === true,\n        minus: gamepad.buttons[8].pressed === true\n    }\n}\n\n\nconst keyboardMap: Record<string, [ 1 | 2, ControlName ]> = {\n    'ArrowDown':    [ 1, 'down' ],\n    'ArrowUp':      [ 1, 'up' ],\n    'ArrowLeft':    [ 1, 'left' ],\n    'ArrowRight':   [ 1, 'right' ],\n    ' ':            [ 1, 'primaryAction' ],\n    'Meta':         [ 1, 'secondaryAction' ],\n    'Shift':        [ 1, 'bumper' ],\n    'Escape':       [ 1, 'minus' ],\n    's':            [ 1, 'start' ],\n    'h':            [ 1, 'tertiaryAction' ]\n}\n\nfunction handleKeyDown(e: KeyboardEvent) {\n    e.preventDefault();\n    if (e.repeat) return;\n    recordInputs();\n    if(e.key in keyboardMap){\n        const [ controllerId, control ] = keyboardMap[e.key as keyof typeof keyboardMap];\n        Controls[controllerId][control] = true;\n    }\n}\n\nfunction handleKeyUp(e: KeyboardEvent) {\n    e.preventDefault();\n    if (e.repeat) return;\n    recordInputs();\n    if(e.key in keyboardMap){\n        const [ controllerId, control ] = keyboardMap[e.key as keyof typeof keyboardMap];\n        Controls[controllerId][control] = false;\n    }\n}\n\nwindow.addEventListener('keydown', handleKeyDown);\nwindow.addEventListener('keyup', handleKeyUp)","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import { ControllerId } from \"Controls\";\nimport { Dimension } from \"Dimensions\";\nimport { Levels } from \"Levels\";\nimport { create3DRenderer } from \"Renderer\";\nimport { GameState } from \"State\";\nimport { createWithHitbox, createWithId, HasHitBox, HasId, createCanBeControlled, CanBeControlled, HasRenderer, CanCarry, createCanCarry, CanChop, createCanChop, createCanBread, CanBread } from \"Traits\";\n\nexport type CharacterId =\n    | 'truett'\n    | 'jeannette'\n    | 'hoho'\n    | 'nonni'\n    | 'james'\n    | 'mandi'\n    | 'charles'\n    | 'julie'\n    | 'tori'\n    | 'josh'\n    | 'joy'\n    | 'miles'\n    | 'isaac'\n    | 'lydia';\n\nexport const CharacterIds: CharacterId[] = [\n    'truett', 'jeannette',\n    'hoho', 'nonni',\n    'james', 'mandi',\n    'charles', 'julie',\n    'tori'\n]\n\nexport type Character = HasId & HasHitBox & HasRenderer & CanBeControlled & CanCarry & CanChop & CanBread & {\n    characterId: CharacterId\n}\n\nexport const createCharacter = (characterId: CharacterId, controllerId: ControllerId, x?: Dimension, z?: Dimension): Character => ({\n    characterId,\n    ...createWithId(),\n    ...createWithHitbox('2studs', '2studs', x, z),\n    ...createCanBeControlled(controllerId),\n    ...createCanCarry(),\n    ...createCanChop(),\n    ...createCanBread(),\n    render: create3DRenderer({ sprite: getSprite, padding: '2studs' })\n});\n\nfunction getSprite(character: Character){\n    let animationState;\n\n    if(character.breading){\n        animationState = 'standing.carrying'\n    } else if(character.chopping){\n        animationState = 'chopping'\n    } else if (character.moving) {\n        animationState = character.carrying ? 'walking.carrying' : 'walking'\n    } else {\n        animationState = character.carrying ? 'standing.carrying' : 'standing'\n    }\n\n    return `characters/${character.characterId}/${animationState}/${character.facing}`\n}\n\nlet numberOfLevels = 6\n\nconst characterLocks: Record<CharacterId, number> = {\n    'truett': 0,\n    'jeannette': 0,\n    'hoho': 0,\n    'nonni': 0,\n    'james': 1 / numberOfLevels,\n    'mandi': 1 / numberOfLevels,\n    'josh': 3 / numberOfLevels,\n    'tori': 3 / numberOfLevels,\n    'charles': 6 / numberOfLevels,\n    'julie': 6 / numberOfLevels,\n    'joy': 9 / numberOfLevels,\n    'miles': 9 / numberOfLevels,\n    'isaac': 9 / numberOfLevels,\n    'lydia': 9 / numberOfLevels,\n}\n\nexport function isCharacterUnlocked(state: GameState, characterId: CharacterId){\n    return state.devMode || getAverageStars(state) >= characterLocks[characterId]\n}\n\nfunction getAverageStars(state: GameState){\n    let scores = Object.values(state.highScores);\n    if(scores.length === 0) return 0;\n    return scores.reduce( (total: number, score) => total + score, 0) / scores.length\n}","import { coalesceX, Dimension } from \"Dimensions\";\nimport { create3DRenderer } from \"Renderer\";\nimport { GameObject } from \"State\";\nimport { CanBlockMovement, createCanBlockMovement, createWithCounterSpace, createWithHitbox, createWithId, HasRenderer, HasCounterSpace, HasHitBox, HasId } from \"Traits\";\n\nexport type Wall = HasId & HasHitBox & CanBlockMovement & HasCounterSpace & HasRenderer;\n\nexport const createWall = (x?: Dimension, z?: Dimension): Wall => ({\n    ...createWithId(),\n    ...createWithHitbox('2studs', '2studs', x, z, '1studs'),\n    ...createCanBlockMovement(),\n    ...createWithCounterSpace(),\n    render: create3DRenderer('walls/normal-wall'),\n})\n\nexport const tileWallX = (x: Dimension, z: Dimension, objects: (GameObject | null)[]) => {\n    let results: GameObject[] = []\n    objects.forEach( (object, i) => {\n        let wall = createWall(coalesceX(x) + coalesceX('2studs')*i, z)\n\n        results.push(wall)\n\n        if(object !== null && wall.canHandleDrop(object)){\n            results.push(object)\n            \n            results = wall.handleDropped(object, results, 1);\n        } \n    })\n    return results;\n}\n\n\nexport const tileWallZ = (x: Dimension, z: Dimension, objects: (GameObject | null)[]) => {\n    let results: GameObject[] = []\n    objects.forEach( (object, i) => {\n        let wall = createWall(x, coalesceX(z) + coalesceX('2studs')*i)\n\n        results.push(wall)\n\n        if(object !== null && wall.canHandleDrop(object)){\n            results.push(object)\n            \n            results = wall.handleDropped(object, results, 1);\n        } \n    })\n    return results;\n}","import { WIDTH, coalesceX, HEIGHT, coalesceZ, GAME_HEIGHT_STUDS } from \"Dimensions\";\nimport { GameState } from \"State\";\nimport { createWithId, HasId, HasRenderer } from \"Traits\";\n\nexport type Floor = HasId & HasRenderer;\n\nconst floorWidth = WIDTH;\nconst floorHeight = coalesceZ(`${GAME_HEIGHT_STUDS}studs`)\n\nexport const createFloor = (): Floor => ({\n    ...createWithId(),\n    render: (_: GameState, state: Floor, ctx: CanvasRenderingContext2D) => {\n        ctx.fillStyle = \"#9c9a9e\";\n        ctx.fillRect(0, HEIGHT - floorHeight, floorWidth, floorHeight);\n        ctx.fillStyle = '#bfa186';\n        ctx.fillRect(0, 0, floorWidth, HEIGHT - floorHeight);\n        ctx.strokeStyle = 'black';\n        for(let cursorX = 0; cursorX <= floorWidth; cursorX += coalesceX('2studs')){\n            ctx.beginPath();\n            ctx.moveTo(cursorX, 0);\n            ctx.lineTo(cursorX, HEIGHT);\n            ctx.stroke();\n        }\n\n        for(let cursorY = HEIGHT; cursorY > 0; cursorY -= coalesceX('2studs')){\n            ctx.beginPath();\n            ctx.moveTo(0, cursorY);\n            ctx.lineTo(floorWidth, cursorY);\n            ctx.stroke();\n        }\n    }\n})","import { Dimension } from \"Dimensions\";\nimport { create3DRenderer } from \"Renderer\";\nimport { CanBeCarried, createCanBeCarried, createWithHitbox, createWithId, HasRenderer, HasHitBox, HasId } from \"Traits\"\n\nexport type FoodItemId =\n    | 'bun'\n    | 'pickles'\n    | 'american-cheese'\n    | 'pepper-jack-cheese'\n    | 'lettuce-head'\n    | 'lettuce-leaf'\n    | 'tomato'\n    | 'tomato-slice'\n    | 'strawberries'\n    | 'diced-strawberries'\n    | 'apple'\n    | 'diced-apples'\n    | 'blueberries'\n    | 'mandarin-oranges'\n    | 'fruit-cup'\n    | 'potato'\n    | 'potato-slices'\n    | 'waffle-fries'\n    | 'raw-chicken-breast'\n    | 'original-raw-filet'\n    | 'original-fried-filet'\n    | 'original-sandwich'\n    | 'original-sandwich-no-pickles'\n    | 'deluxe-sandwich'\n    | 'deluxe-sandwich-no-pickles'\n    | 'spicy-raw-filet'\n    | 'spicy-fried-filet'\n    | 'spicy-sandwich'\n    | 'spicy-sandwich-no-pickles'\n    | 'spicy-deluxe-sandwich'\n    | 'spicy-deluxe-sandwich-no-pickles'\n    | 'raw-nuggets'\n    | 'raw-breaded-nuggets'\n    | 'fried-nuggets'\n    | 'cfa-sauce'\n    | 'bbq-sauce'\n    | 'hny-mstrd-sauce'\n    | 'buffalo-sauce'\n    | 'poly-sauce'\n    | 'ranch-sauce'\n    | 'sriracha-sauce';\n\nexport type FoodItem = HasId & HasHitBox & HasRenderer & CanBeCarried & {\n    foodItemId: FoodItemId;\n}\n\nexport const createFoodItem = (foodItemId: FoodItemId, x?: Dimension, z?: Dimension, y?: Dimension): FoodItem => ({\n    ...createWithId(),\n    ...createCanBeCarried(),\n    ...createWithHitbox('2studs', '2studs', x, z, y),\n    render: create3DRenderer((foodItem: FoodItem) => `food-items/${foodItem.foodItemId}`),\n    foodItemId\n})\n\nexport const isFoodItem = (x: any): x is FoodItem => x.foodItemId !== undefined\n\nexport const recipes = createRecipes({\n    'original-sandwich': [\n        'bun',\n        'pickles',\n        'original-fried-filet'\n    ],\n    'original-sandwich-no-pickles': [\n        'bun',\n        'original-fried-filet'\n    ],\n    'deluxe-sandwich': [\n        'bun',\n        'pickles',\n        'original-fried-filet',\n        'american-cheese',\n        'tomato-slice',\n        'lettuce-leaf'\n    ],\n    'deluxe-sandwich-no-pickles': [\n        'bun',\n        'original-fried-filet',\n        'american-cheese',\n        'tomato-slice',\n        'lettuce-leaf'\n    ],\n    'spicy-sandwich': [\n        'bun',\n        'pickles',\n        'spicy-fried-filet'\n    ],\n    'spicy-sandwich-no-pickles': [\n        'bun',\n        'spicy-fried-filet'\n    ],\n    'spicy-deluxe-sandwich': [\n        'bun',\n        'pickles',\n        'spicy-fried-filet',\n        'pepper-jack-cheese',\n        'tomato-slice',\n        'lettuce-leaf'\n    ],\n    'spicy-deluxe-sandwich-no-pickles': [\n        'bun',\n        'spicy-fried-filet',\n        'pepper-jack-cheese',\n        'tomato-slice',\n        'lettuce-leaf'\n    ],\n    'fruit-cup': [\n        'diced-apples',\n        'diced-strawberries',\n        'blueberries',\n        'mandarin-oranges'\n    ]\n})\n\nexport type Recipe = {\n    name: FoodItemId,\n    ingredientList: FoodItemId[]\n}\n\nfunction createRecipes(recipeIndex: Partial<Record<FoodItemId, FoodItemId[]>>){\n    const recipes : Recipe[] = [];\n    for(const key in recipeIndex){\n        const name = key as FoodItemId;\n        const ingredientList: FoodItemId[] = recipeIndex[name] || []\n        const recipe: Recipe = {\n            name, ingredientList\n        }\n        recipes.push(recipe);\n    }\n\n    recipes.sort((a, b) => b.ingredientList.length - a.ingredientList.length)\n\n    return recipes;\n}\n\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import { Dimension } from \"Dimensions\";\nimport { combineRenderers, create3DRenderer, createContentRenderer } from \"Renderer\";\nimport { GameObject, removeGameObjectById, updateGameObjectById } from \"State\";\nimport { CanBeCarried, CanHandleDrop, createCanBeCarried, createWithHitbox, createWithId, HasRenderer, hasHitbox, HasHitBox, HasId } from \"Traits\"\nimport { FoodItem, FoodItemId, isFoodItem, recipes } from \"./FoodItem\";\n\ntype FoodItemSet = Partial<Record<FoodItemId, number>>\n\nexport type Tray = HasId & HasHitBox & HasRenderer & CanBeCarried & CanHandleDrop & {\n    isTray: true\n    contents: FoodItemSet\n}\n\nexport const createTray = (x?: Dimension, z?: Dimension): Tray => ({\n    ...createWithId(),\n    ...createCanBeCarried(),\n    ...createWithHitbox('2studs', '2studs', x, z),\n    isTray: true,\n    contents: {},\n    render: combineRenderers(\n        create3DRenderer('tray'),\n        createContentRenderer({ sprite: 'tray', content: (tray: Tray) => tray.contents })\n    ),\n    canHandleDrop,\n    handleDropped\n})\n\nexport const isTray = (x: any): x is Tray => x && x.isTray;\n\nfunction canHandleDrop(object: GameObject): object is GameObject & HasHitBox {\n    return hasHitbox(object) && isFoodItem(object)\n}\n\nfunction handleDropped(this: Tray, droppedFoodItem: FoodItem, objects: GameObject[]): GameObject[] {\n    const formerQuantity = this.contents[droppedFoodItem.foodItemId] || 0;\n\n    const tray: Tray = {\n        ...this,\n        contents: consolidateFoodItems({\n            ...this.contents,\n            [droppedFoodItem.foodItemId]: formerQuantity + 1\n        })\n    }\n\n    objects = updateGameObjectById(objects, tray)\n\n    objects = removeGameObjectById(objects, droppedFoodItem);\n\n    return objects;\n}\n\nfunction consolidateFoodItems(foodItems: FoodItemSet): FoodItemSet {\n    const results: FoodItemSet = {};\n    const remainingIngredients: FoodItemSet = expand(foodItems);\n\n    recipes.forEach( recipe => {\n        const haveEverything = recipe.ingredientList.every( ingredient => Boolean(remainingIngredients[ingredient]) )\n        if(haveEverything){\n            results[recipe.name] = 1;\n            for(let ingredient of recipe.ingredientList){\n                const remaining = remainingIngredients[ingredient] || 0\n                remainingIngredients[ingredient] = remaining - 1;\n            }\n        }\n    })\n\n    return { ...results, ...remainingIngredients };\n}\n\n\nfunction expand(foodItems: FoodItemSet){\n    const expanded: FoodItemSet = {};\n\n    for(let key in foodItems){\n        let itemName = key as FoodItemId;\n\n        const quantity = foodItems[itemName] || 0;\n\n        const recipe = recipes.find( recipe => recipe.name === itemName)\n        if (typeof recipe !== 'undefined'){\n            for(let ingredientName of recipe.ingredientList){\n                expanded[ingredientName] = (expanded[ingredientName] || 0) + quantity\n            }\n        } else {\n            expanded[itemName] = (expanded[itemName] || 0) + quantity\n        }\n    }\n\n    return expanded\n}","import { Dimension } from \"Dimensions\";\nimport { combineRenderers, create3DRenderer, createContentRenderer, createProgressRenderer } from \"Renderer\";\nimport { GameObject, removeGameObjectById, updateGameObjectById } from \"State\";\nimport { createWithHitbox, createWithId, HasRenderer, HasHitBox, HasId, CanHandleDrop, hasHitbox } from \"Traits\";\nimport { Character } from \"./Character\";\nimport { createFoodItem, FoodItem, FoodItemId, isFoodItem } from \"./FoodItem\";\n\nexport type CuttingBoard = HasId & HasHitBox & HasRenderer & CanHandleDrop & {\n    isCuttingBoard: true,\n    content: null | ChoppableId,\n    progress: null | number,\n    canChop: () => boolean,\n    chop: (chopper: Character, objects: GameObject[]) => GameObject[]\n};\n\nexport const isCuttingBoard = (x: any): x is CuttingBoard => x && x.isCuttingBoard\n\nexport const createCuttingBoard = (x?: Dimension, z?: Dimension): CuttingBoard => ({\n    ...createWithId(),\n    isCuttingBoard: true,\n    content: null,\n    progress: null,\n    ...createWithHitbox('2studs', '2studs', x, z),\n    render: combineRenderers(\n        create3DRenderer('cutting-board'),\n        createContentRenderer({ sprite: 'cutting-board', content: (cuttingBoard: CuttingBoard) => cuttingBoard.content }),\n        createProgressRenderer('cutting-board')\n    ),\n    canHandleDrop,\n    handleDropped,\n    canChop,\n    chop\n})\n\ntype ChoppableId = 'lettuce-head' | 'raw-chicken-breast' | 'tomato' | 'potato' | 'apple' | 'strawberries';\n\nconst choppableIds = [ 'lettuce-head','raw-chicken-breast', 'tomato', 'potato', 'apple', 'strawberries' ]\n\nexport type Choppable = FoodItem & {\n    foodItemId: ChoppableId\n}\n\nexport const isChoppable = (x: any): x is Choppable => isFoodItem(x) && choppableIds.includes(x.foodItemId)\n\nfunction canHandleDrop(this: CuttingBoard, object: GameObject): object is GameObject & HasHitBox {\n    return hasHitbox(object) && isChoppable(object) &&  this.content === null\n}\n\nfunction handleDropped(this: CuttingBoard, droppedObject: Choppable, objects: GameObject[]){\n    const cuttingBoard: CuttingBoard = {\n        ...this,\n        content: droppedObject.foodItemId,\n        progress: 0\n    }\n\n    objects = removeGameObjectById(objects, droppedObject)\n\n    objects = updateGameObjectById(objects, cuttingBoard)\n\n    return objects;\n}\n\nfunction canChop(this: CuttingBoard){\n    return this.content !== null\n}\n\nfunction chop(this: CuttingBoard, chopper: Character, objects: GameObject[]){\n    if(this.content === null) return objects\n\n    let newProgress = (this.progress || 0) + 0.01;\n\n    let cuttingBoard: CuttingBoard;\n\n    if(newProgress < 1){\n        cuttingBoard = {\n            ...this,\n            progress: newProgress\n        }\n    } else {\n        const newFoodItem = createFoodItem(chopYield[this.content])\n\n        cuttingBoard = {\n            ...this,\n            progress: null,\n            content: null\n        }\n\n        objects = [ ...objects, newFoodItem ]\n\n        objects = newFoodItem.handlePickedUpBy(chopper, objects)\n\n        objects = updateGameObjectById(objects, {\n            ...chopper,\n            carrying: newFoodItem.id\n        })\n\n    }\n\n    objects = updateGameObjectById(objects, cuttingBoard)\n\n    return objects\n}\n\nexport const chopYield : Record<ChoppableId, FoodItemId> = {\n    'lettuce-head': 'lettuce-leaf',\n    'raw-chicken-breast':'raw-nuggets',\n    'tomato': 'tomato-slice',\n    'potato': 'potato-slices',\n    'apple': 'diced-apples',\n    'strawberries': 'diced-strawberries'\n}","import { Dimension } from \"Dimensions\";\nimport { loadFinishedLevelMenu } from \"Menus\";\nimport { AssetManager, combineRenderers, create3DRenderer, createProgressRenderer, createSpicyIconRenderer } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState, removeGameObjectById, updateGameObjectById } from \"State\";\nimport { createWithHitbox, createWithId, HasRenderer, HasHitBox, HasId, CanHandleDrop, hasHitbox, CanBlockMovement, createCanBlockMovement, getObjectsFacing, canBeControlled, filter, canCarry } from \"Traits\";\nimport { CanBeSpicy } from \"Traits/CanBeSpicy\";\nimport { createFoodItem, FoodItem, FoodItemId, isFoodItem } from \"./FoodItem\";\n\ntype FryableId = 'original-raw-filet' | 'spicy-raw-filet' | 'raw-breaded-nuggets' | 'potato-slices'\n\nconst fryableIds = [ 'original-raw-filet', 'spicy-raw-filet', 'raw-breaded-nuggets', 'potato-slices'  ]\n\nconst spicyFryableIds = [ 'spicy-raw-filet', 'potato-slices' ]\n\nexport type Fryable = FoodItem & {\n    foodItemId: FryableId\n}\n\nexport type Fryer = HasId & HasHitBox & HasRenderer & CanHandleDrop & CanBlockMovement & CanBeSpicy & {\n    isFryer: true,\n    onFire: boolean,\n    content: null | FryableId,\n    progress: null | number,\n    finishedAt: null | number,\n    retrieve: (objects: GameObject[]) => [ GameObject[], FoodItem ]\n};\n\n\nexport const createFryer = (x?: Dimension, z?: Dimension): Fryer => ({\n    ...createWithId(),\n    isSpicy: false,\n    isFryer: true,\n    content: null,\n    progress: null,\n    finishedAt: null,\n    onFire: false,\n    ...createWithHitbox('4studs', '2studs', x, z),\n    ...createCanBlockMovement(),\n    render: combineRenderers(\n        create3DRenderer({ sprite: getSprite, speed: getSpeed }),\n        createProgressRenderer('fryer/off'),\n        create3DRenderer({ sprite: (fryer: Fryer) => fryer.content != null ? 'steam' : null, speed: 0.5}),\n        createSpicyIconRenderer()\n    ),\n    canHandleDrop,\n    handleDropped,\n    retrieve\n})\n\nconst getSprite = (fryer: Fryer, state: GameState) => {\n    if(fryer.progress !== null) return `fryer/on`\n    if(fryer.finishedAt !== null) {\n        const framesElapsed =  state.frameNumber -  fryer.finishedAt;\n\n        const secondsElapased = ((framesElapsed * MS_PER_FRAME) / 1000);\n\n        if(secondsElapased < 12){\n            return `fryer/done`\n        } else {\n            return `fryer/on-fire`\n        }\n    }\n    else return `fryer/off`\n}\n\nconst getSpeed = (fryer: Fryer, state: GameState) => {\n    if(fryer.finishedAt === null) return 1;\n\n    const framesElapsed =  state.frameNumber -  fryer.finishedAt;\n\n    const secondsElapased = ((framesElapsed * MS_PER_FRAME) / 1000);\n\n    if(secondsElapased < 4){\n        return 0.1\n    }\n\n    if(secondsElapased < 8){\n        return 0.25\n    }\n\n    if(secondsElapased < 12){\n        return 0.5\n    }\n\n    return 1\n}\n\nexport const isFryer = (x: any): x is Fryer => x && x.isFryer\nexport const isFinishedFryer = (x: any): x is Fryer => isFryer(x) && x.finishedAt !== null && x.onFire === false\n\nconst isFryable = (x: any): x is Fryable => isFoodItem(x) && fryableIds.includes(x.foodItemId)\n\nconst isSpicyFryable = (x: any): x is Fryable => isFoodItem(x) && spicyFryableIds.includes(x.foodItemId)\n\nfunction canHandleDrop(this: Fryer, object: GameObject): object is GameObject & HasHitBox {\n    return hasHitbox(object)\n        && isFryable(object)\n        && (!this.isSpicy || isSpicyFryable(object))\n        &&  this.content === null\n}\n\nfunction handleDropped(this: Fryer, droppedObject: Fryable, objects: GameObject[]){\n    const fryer: Fryer = {\n        ...this,\n        isSpicy: this.isSpicy || droppedObject.foodItemId === 'spicy-raw-filet',\n        content: droppedObject.foodItemId,\n        progress: 0\n    }\n\n    objects = removeGameObjectById(objects, droppedObject)\n\n    objects = updateGameObjectById(objects, fryer)\n\n    return objects;\n}\n\nfunction retrieve(this: Fryer, objects: GameObject[]){\n    if(this.content === null) throw Error('Cannot retreive from fryer when it has no content')\n\n    const newFoodItem = createFoodItem(fryYield[this.content])\n\n    let fryer = {\n        ...this,\n        content: null,\n        finishedAt: null\n    }\n\n    objects = updateGameObjectById(objects, fryer);\n\n    objects = [ ...objects, newFoodItem ]\n\n    return [ objects, newFoodItem ] as [ GameObject[], FoodItem ]\n}\n\nexport function fryerReducer(object: GameObject, state: GameState) {\n    if (!isFryer(object) || state.isPaused) return state;\n\n    let fryer = object as Fryer;\n\n    if(fryer.content === null) {\n        return state;\n    }\n\n    let objects = state.objects;\n\n    let newProgress = (fryer.progress || 0) + 0.005;\n\n    if(!fryer.finishedAt){\n        if(newProgress < 1){\n            fryer = {\n                ...fryer,\n                progress: newProgress\n            }\n        } else {\n            fryer = {\n                ...fryer,\n                progress: null,\n                finishedAt: state.frameNumber\n            }\n        }\n    }\n\n    const fryingSounds = AssetManager.loadAliasedAudio(`frying.${fryer.id}`, `frying.mp3`)\n    const fireSounds = AssetManager.loadAliasedAudio(`fire.${fryer.id}`, `fire.mp3`)\n    const beeping1 = AssetManager.loadAliasedAudio(`beeping.${fryer.id}.1`, 'beeping-1.mp3')\n    const beeping2 = AssetManager.loadAliasedAudio(`beeping.${fryer.id}.2`, 'beeping-2.mp3')\n    const beeping3 = AssetManager.loadAliasedAudio(`beeping.${fryer.id}.3`, 'beeping-3.mp3')\n\n    if(fryer.finishedAt){\n        const framesElapsed =  state.frameNumber -  fryer.finishedAt;\n        const secondsElapased = ((framesElapsed * MS_PER_FRAME) / 1000);\n\n        if(secondsElapased < 4){\n            beeping1.play(0.15);\n            fryingSounds.play(0.15);\n        } else if(secondsElapased < 8){\n            beeping2.play(0.15);\n            fryingSounds.play(0.15);\n        } else if(secondsElapased < 12){\n            beeping3.play(0.15);\n            fryingSounds.play(0.15);\n        } else if(secondsElapased > 12){\n            fireSounds.play(0.15);\n            fryer = {\n                ...fryer,\n                onFire: true\n            }\n        }\n        if(secondsElapased > 18){\n            return {\n                ...state,\n                isPaused: true,\n                canPause: false,\n                objects: [\n                    ...state.objects,\n                    ...loadFinishedLevelMenu(state)\n                ]\n            }\n        }\n    } else {\n        fryingSounds.play(0.15);\n    }\n\n    objects = updateGameObjectById(objects, fryer)\n\n    return {\n        ...state,\n        objects\n    }\n}\n\nexport const fryYield : Record<FryableId, FoodItemId> = {\n    'original-raw-filet': 'original-fried-filet',\n    'spicy-raw-filet': 'spicy-fried-filet',\n    'raw-breaded-nuggets': 'fried-nuggets',\n    'potato-slices': 'waffle-fries'\n}","import { Dimension } from \"Dimensions\";\nimport { combineRenderers, create3DRenderer, createContentRenderer, createProgressRenderer, createSpicyIconRenderer } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState, removeGameObjectById, updateGameObjectById } from \"State\";\nimport { createWithHitbox, createWithId, HasRenderer, HasHitBox, HasId, CanHandleDrop, hasHitbox, CanBlockMovement, createCanBlockMovement } from \"Traits\";\nimport { CanBeSpicy } from \"Traits/CanBeSpicy\";\nimport { Character } from \"./Character\";\nimport { createFoodItem, FoodItem, FoodItemId, isFoodItem } from \"./FoodItem\";\n\ntype BreadableId = 'raw-chicken-breast'|'raw-nuggets' ;\n\ntype SpicyBreadableId = 'raw-chicken-breast'\n\nconst breadableIDs = [ 'raw-chicken-breast','raw-nuggets' ]\n\nconst spicyBreadableIDs = [ 'raw-chicken-breast' ]\n\n\nexport type BreadingTable = HasId & HasHitBox & HasRenderer & CanHandleDrop & CanBlockMovement & CanBeSpicy & {\n    isBreadingTable: true,\n    lastInUse: null | number,\n    content: null | BreadableId,\n    progress: null | number,\n    canBread: () => boolean,\n    bread: (breader: Character, objects: GameObject[], frameNumber: number) => GameObject[]\n};\n\nexport const isBreadingTable = (x: any): x is BreadingTable => x && x.isBreadingTable\n\nexport const createBreadingTable = (isSpicy = false, x?: Dimension, z?: Dimension): BreadingTable => ({\n    ...createWithId(),\n    isSpicy,\n    isBreadingTable: true,\n    lastInUse: null,\n    content: null,\n    progress: null,\n    ...createWithHitbox('4studs', '2studs', x, z, '1studs'),\n    ...createCanBlockMovement(),\n    render: combineRenderers(\n        create3DRenderer('breading-table'),\n        createSpicyIconRenderer(),\n        createContentRenderer({ sprite: 'breading-table', content: (breadingTable: BreadingTable) => breadingTable.content }),\n        createProgressRenderer('breading-table'),\n        create3DRenderer({ sprite: getFlour, speed: 0.25 }),\n    ),\n    canHandleDrop,\n    handleDropped,\n    canBread,\n    bread\n})\n\nconst getFlour = (breadingTable: BreadingTable, state: GameState) => {\n    if(breadingTable.lastInUse != null && breadingTable.lastInUse > (state.frameNumber-10)){\n        return 'flour'\n    } else {\n        return null\n    }\n}\n\n\nexport type Breadable = FoodItem & {\n    foodItemId: BreadableId\n}\n\nconst isBreadable = (x: any): x is Breadable => isFoodItem(x) && breadableIDs.includes(x.foodItemId)\n\nconst isSpicyBreadable = (x: any): x is Breadable => isFoodItem(x) && spicyBreadableIDs.includes(x.foodItemId)\n\n\nfunction canHandleDrop(this: BreadingTable, object: GameObject): object is GameObject & HasHitBox {\n    return hasHitbox(object)\n        && ((!this.isSpicy && isBreadable(object)) || (this.isSpicy && isSpicyBreadable(object)))\n        &&  this.content === null\n}\n\nfunction handleDropped(this: BreadingTable, droppedObject: Breadable, objects: GameObject[]){\n    const breadingTable: BreadingTable = {\n        ...this,\n        content: droppedObject.foodItemId,\n        progress: 0\n    }\n\n    objects = removeGameObjectById(objects, droppedObject)\n\n    objects = updateGameObjectById(objects, breadingTable)\n\n    return objects;\n}\n\nfunction canBread(this: BreadingTable){\n    return this.content !== null\n}\n\nfunction bread(this: BreadingTable, chopper: Character, objects: GameObject[], frameNumber: number){\n    if(this.content === null) return objects\n\n    let newProgress = (this.progress || 0) + 0.01;\n\n    let breadingTable: BreadingTable;\n\n    if(newProgress < 1){\n        breadingTable = {\n            ...this,\n            lastInUse: frameNumber,\n            progress: newProgress\n        }\n    } else {\n        const newFoodItem = this.isSpicy\n            ? createFoodItem(spicyBreadYield[this.content as SpicyBreadableId])\n            : createFoodItem(breadYield[this.content])\n\n        breadingTable = {\n            ...this,\n            progress: null,\n            content: null\n        }\n\n        objects = [ ...objects, newFoodItem ]\n\n        objects = newFoodItem.handlePickedUpBy(chopper, objects)\n\n        objects = updateGameObjectById(objects, {\n            ...chopper,\n            carrying: newFoodItem.id\n        })\n    }\n\n    objects = updateGameObjectById(objects, breadingTable)\n\n    return objects\n}\n\nexport const breadYield : Record<BreadableId, FoodItemId> = {\n    'raw-chicken-breast': 'original-raw-filet',\n    'raw-nuggets':'raw-breaded-nuggets'\n}\n\nexport const spicyBreadYield : Record<SpicyBreadableId, FoodItemId> = {\n    'raw-chicken-breast': 'spicy-raw-filet'\n}","import { coalesceX, Dimension } from \"Dimensions\";\nimport { create3DRenderer } from \"Renderer\";\nimport { GameObject, removeGameObjectById } from \"State\";\nimport { CanBlockMovement, createCanBlockMovement, createWithCounterSpace, createWithHitbox, createWithId, HasRenderer, HasCounterSpace, HasHitBox, HasId, CanHandleDrop, hasHitbox } from \"Traits\";\n\nexport type TrashCan = HasId & HasHitBox & CanBlockMovement & HasRenderer & CanHandleDrop;\n\nexport const createTrashCan = (x?: Dimension, z?: Dimension): TrashCan => ({\n    ...createWithId(),\n    ...createWithHitbox('2studs', '2studs', x, z, '1studs'),\n    ...createCanBlockMovement(),\n    render: create3DRenderer('trash-can'),\n    canHandleDrop,\n    handleDropped\n})\n\nfunction canHandleDrop(object: GameObject): object is GameObject & HasHitBox{\n    return hasHitbox(object);\n}\n\nfunction handleDropped(object: GameObject, objects: GameObject[]){\n\n    objects = removeGameObjectById(objects, object)\n\n    return objects;\n}","\nconst loadedImages: Record<string, HTMLImageElement> = {};\n\nconst loadedAudioTracks: Record<string, HTMLAudioElement> = {};\n\nconst aliasedAudioTracks: Record<string, HTMLAudioElement> = {};\n\nexport const AssetManager = {\n\n    getImage(path: string){\n        if(!(path in loadedImages)){\n            loadedImages[path] = new Image();\n            loadedImages[path].src = `assets/${path}`;\n        }\n        return loadedImages[path];\n    },\n\n    loadImage(path: string){\n        return new Promise( resolve => {\n            const image = AssetManager.getImage(path);\n            image.addEventListener('load', () => {\n                resolve(image)\n            })\n        })\n    },\n\n    getAudio(path: string){\n        if(!(path in loadedAudioTracks)){\n            loadedAudioTracks[path] = new Audio(`assets/${path}`);\n        }\n        return loadedAudioTracks[path];\n    },\n\n    loadAudio(path: string){\n        return new Promise( resolve => {\n            const audio = AssetManager.getAudio(path);\n            audio.addEventListener('canplay', () => {\n                resolve(audio)\n            })\n        })\n    },\n\n    loadAliasedAudio(alias: string, path: string){\n        if(!(alias in aliasedAudioTracks)){\n            aliasedAudioTracks[alias] = new Audio(`assets/${path}`);\n            aliasedAudioTracks[alias].loop = true;\n        }\n        return {\n            play: (volume: number = 1) => {\n                this.currentlyPlaying.push(alias)\n                aliasedAudioTracks[alias].volume = volume;\n                aliasedAudioTracks[alias].play();\n            }\n        }\n    },\n\n    currentlyPlaying: [] as string[],\n    clearAudio(){\n        for(let alias in aliasedAudioTracks){\n            if(!this.currentlyPlaying.includes(alias)){\n                aliasedAudioTracks[alias].pause();\n                aliasedAudioTracks[alias].currentTime = 0\n            }\n        }\n        this.currentlyPlaying = [];\n    }\n}","import { AssetManager } from \"./AssetManager\"\nimport animationData from 'animations.json'\n\nexport type Animation = {\n    numberOfFrames: number,\n    sideview: false | Pick<Animation, 'size'>,\n    size: {\n        width:  number,\n        height: number\n    },\n    handleOffset: \"bottom-left\" | \"bottom-center\"\n}\n\nexport const Animations = animationData as Record<string, Animation>\n\nconst animations = Object.keys(Animations).sort((a: string, b: string): number => {\n    if(a.includes('profile') || a.includes('locked')){\n        return -1\n    } else {\n        return 1\n    }\n})\n\n\nconst loadAssets = (animations: string[]) => Promise.all(animations.map( assetPath => {\n    const animation = Animations[assetPath];\n    return Promise.all(new Array(animation.numberOfFrames).fill(1).map( (_, frameIndex) => {\n        return animation.sideview\n            ? Promise.all([\n                AssetManager.loadImage(`${assetPath}/${frameIndex+1}.png`),\n                AssetManager.loadImage(`${assetPath}/${frameIndex+1}.sideview.png`)\n            ])\n            : AssetManager.loadImage(`${assetPath}/${frameIndex+1}.png`)\n    }))\n}))\n\nloadAssets(animations.slice(0, 27)).then(() => loadAssets(animations.slice(27)))","import { coalesceX } from \"Dimensions\";\nimport { FoodItemId } from \"Objects\";\nimport { Animations } from \"./Animations\";\nimport { AssetManager } from \"./AssetManager\";\n\ntype Area2D = {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\n\nexport function renderFoodItemsInArea(area: Area2D, foodItems: FoodItemId[], ctx: CanvasRenderingContext2D){\n    let offset = 0;\n    for(let foodItem of foodItems) {\n        const foodItemAnimation = Animations[`food-items/${foodItem}`];\n\n        const width = Math.min(area.width / Math.max((foodItems.length), 1), coalesceX('2studs'));\n\n        const scale = width / foodItemAnimation.size.width;\n\n        const height = foodItemAnimation.size.height * scale;\n\n        let leftPadding = 0, topPadding = (area.height - height) / 2;\n\n        if(width < area.width && foodItems.length === 1){\n            leftPadding = (area.width - width) / 2;\n            topPadding = (area.height - height) / 2;\n        }\n\n        ctx.drawImage(\n            AssetManager.getImage(`food-items/${foodItem}` + `/1.png`),\n            area.x + offset + leftPadding,\n            area.y + topPadding,\n            width,\n            height\n        )\n\n        offset += (width);\n    }\n}","import { coalesceX } from \"Dimensions\";\nimport { Animations, AssetManager } from \"Renderer\";\nimport { renderFoodItemsInArea } from \"Renderer/renderFoodItemsInArea\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState, updateGameObjectById } from \"State\";\nimport { createHasOverlay, createWithId, HasId, HasOverlay, HasRenderer, Renderer } from \"Traits\";\nimport { FoodItemId } from \"./FoodItem\";\n\n\n\nexport type Order = {\n    foodItems: FoodItemId[];\n    placedAt: number;\n    fullfilledAt: number | null;\n}\n\nexport type OrderTimeline = [number, (() => FoodItemId[])][]\n\nexport type OrderBoard = HasId & HasRenderer & HasOverlay & {\n    isOrderBoard: true;\n    orders: Order[];\n    fullfilled: (Order & { fullfilledAt: number })[];\n    upcomingOrders: OrderTimeline;\n    timestampForNextOrder: number;\n    firstDeadline: number;\n    secondDeadline: number;\n}\n\nexport const isOrderBoard = (x: any): x is OrderBoard => x && x.isOrderBoard\n\nconst numberOfPlayers = (state: GameState) => Object.values(state.selectedCharacters).filter( x => x !== null).length\n\nconst firstDeadlines = {\n    1: Infinity,\n    2: Infinity,\n    3: Infinity,\n    4: Infinity\n}\n\nconst secondDeadlines = {\n    1: Infinity,\n    2: Infinity,\n    3: Infinity,\n    4: Infinity\n}\n\nexport const createOrderBoard = (upcomingOrders: OrderTimeline, state: GameState): OrderBoard => ({\n    ...createWithId(),\n    ...createHasOverlay(),\n    isOrderBoard: true,\n    orders: [],\n    fullfilled: [],\n    upcomingOrders,\n    timestampForNextOrder: upcomingOrders[0]?.[0],\n    firstDeadline: firstDeadlines[numberOfPlayers(state) as 1 | 2 | 3 | 4],\n    secondDeadline: secondDeadlines[numberOfPlayers(state) as 1 | 2 | 3 | 4],\n    render\n})\n\nconst sideLength = coalesceX('3studs')\n\nconst render = ((state: GameState, board: OrderBoard, ctx: CanvasRenderingContext2D) => {\n    ctx.beginPath();\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n    //@ts-ignore\n    ctx.roundRect(0, 0, sideLength * board.orders.length, sideLength, 5);\n    ctx.fill();\n\n    let index = 0;\n    for (let order of board.orders) {\n\n        const framesElapsed = state.frameNumber - order.placedAt\n\n        let firstDeadline = board.firstDeadline * 1000 / MS_PER_FRAME;\n        let secondDeadline = board.secondDeadline * 1000 / MS_PER_FRAME;\n\n        if(secondDeadline < framesElapsed && framesElapsed < secondDeadline + (500 / MS_PER_FRAME)){\n            AssetManager.loadAliasedAudio(`buzzer.${board.id}`, 'buzzer.mp3').play(0.5);\n        }\n\n        ctx.beginPath();\n        // @ts-ignore\n        ctx.roundRect(index*sideLength, 0, sideLength, sideLength, 5);\n        ctx.strokeStyle = 'rgba(0, 0, 0, 0.75)'\n        ctx.lineWidth = 2\n        ctx.stroke()\n\n        if(framesElapsed > board.firstDeadline * 1000 / MS_PER_FRAME){\n            ctx.beginPath()\n            ctx.fillStyle =  framesElapsed > board.secondDeadline * 1000 / MS_PER_FRAME\n                ? 'rgba(255, 0, 0, 0.5)'\n                : 'rgba(255, 255, 0, 0.5)'\n            // @ts-ignore\n            ctx.roundRect(index*sideLength, 0,sideLength,sideLength, 5);\n            ctx.fill();\n        }\n\n        const area = {\n            x: index * sideLength,\n            y: 0,\n            width: sideLength,\n            height: sideLength\n        }\n\n        renderFoodItemsInArea(area, order.foodItems, ctx)\n\n        index++;\n    }\n}) as Renderer;\n\nexport function orderBoardReducer(object: GameObject, state: GameState) {\n    if (!isOrderBoard(object)) return state;\n\n    let board = object as OrderBoard;\n\n    if (board.timestampForNextOrder < state.frameNumber) {\n        let [[ _, getOrder ], ...upcomingOrders] = board.upcomingOrders;\n        let duration = upcomingOrders[0]?.[0]\n        if(duration === undefined) duration = Infinity\n        board = {\n            ...board,\n            upcomingOrders,\n            timestampForNextOrder: state.frameNumber + (duration*1000/MS_PER_FRAME),\n            orders: [\n                ...board.orders,\n                {\n                    foodItems: getOrder(),\n                    placedAt: state.frameNumber,\n                    fullfilledAt: null\n                }\n            ]\n        }\n    }\n\n    return {\n        ...state,\n        objects: updateGameObjectById(state.objects, board)\n    }\n}\n\nexport function randomElement<T>(array: T[]) {\n    return array[Math.floor(Math.random() * array.length)];\n}\n\nfunction generateRandomNumber(min: number, max: number) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n}","import { Dimension } from \"Dimensions\";\nimport { AssetManager, combineRenderers, create2DRenderer, create3DRenderer } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState, removeGameObjectById, updateGameObjectById } from \"State\";\nimport { CanBlockMovement, createCanBlockMovement, createWithHitbox, createWithId, HasRenderer, HasCounterSpace, HasHitBox, HasId, CanHandleDrop, hasHitbox, filter } from \"Traits\";\nimport { FoodItemId } from \"./FoodItem\";\nimport { isOrderBoard, Order, randomElement } from \"./OrderBoard\";\nimport { isTray, Tray } from \"./Tray\";\n\nconst guests = [\n    'violet',\n    'ursula',\n    'storm-trooper',\n    'santa',\n    'leia',\n    'iron-man',\n    'elrond',\n    'captain-america',\n    'batman',\n    'aang'\n]\n\nexport type PickUpCounter = HasId & HasHitBox & CanBlockMovement & HasRenderer & CanHandleDrop & {\n    isPickupCounter: true;\n    lastFullfillment: number | null;\n    currentGuest: string;\n};\n\nexport const createPickUpCounter = (x?: Dimension, z?: Dimension): PickUpCounter => ({\n    isPickupCounter: true,\n    ...createWithId(),\n    ...createWithHitbox('4studs', '2studs', x, z, '1studs'),\n    ...createCanBlockMovement(),\n    currentGuest: randomElement(guests),\n    render: combineRenderers(\n        create3DRenderer<PickUpCounter>({ sprite: c => `guests/${c.currentGuest}`, padding: -30 }),\n        create3DRenderer('pick-up-counter')\n    ),\n    canHandleDrop,\n    handleDropped,\n    lastFullfillment: null\n})\n\nexport const isPickupCounter = (x: any): x is PickUpCounter => x?.isPickupCounter\n\nconst canHandleDrop = (x: any): x is GameObject & HasHitBox => {\n    return hasHitbox(x) && isTray(x)\n}\n\nfunction handleDropped(this: PickUpCounter, tray: Tray, objects: GameObject[], frameNumber: number){\n\n    let [ orderBoard ] = filter(objects, isOrderBoard);\n\n    if(orderBoard) {\n\n        let orders: Order[] = [ ...orderBoard.orders ]\n        let fullfilled: Order[] = [ ...orderBoard.fullfilled ]\n        for(let i = 0; i < orders.length; i++){\n            const order = orders[i]\n            const foodItems = order.foodItems;\n            if(foodItems.every( foodItem => foodItem in tray.contents)){\n                orders.splice(i, 1)\n                fullfilled = [ ...fullfilled, {\n                    ...order,\n                    fullfilledAt: frameNumber\n                }]\n                break;\n            }\n        }\n\n        let pickupCounter = {\n            ...this,\n            lastFullfillment: fullfilled.length !== orderBoard.fullfilled.length ? frameNumber : this.lastFullfillment,\n            currentGuest: fullfilled.length !== orderBoard.fullfilled.length ? randomElement(guests) : this.currentGuest,\n        }\n\n        orderBoard = {\n            ...orderBoard,\n            orders,\n            // @ts-ignore\n            fullfilled\n        }\n\n        objects = updateGameObjectById(objects, pickupCounter)\n\n        objects = updateGameObjectById(objects, orderBoard)\n\n    }\n\n    objects = removeGameObjectById(objects, tray)\n\n    return objects;\n}\n\nexport function pickUpCounterReducer(object: GameObject, state: GameState){\n    if(!isPickupCounter(object)) return state;\n\n    if(object.lastFullfillment !== null && state.frameNumber - (1000 / MS_PER_FRAME) < object.lastFullfillment){\n        AssetManager.loadAliasedAudio('success', 'success.mp3').play();\n    }\n\n    return state;\n}\n\n","\n\nimport { coalesceX, Dimension, font, HEIGHT, WIDTH } from \"Dimensions\";\nimport { AssetManager } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameState } from \"State\";\nimport { createHasOverlay, createWithBoundingbox, createWithId, filter, HasBoundingbox, HasId, HasOverlay, HasRenderer, Renderer } from \"Traits\";\nimport { FoodItemId } from \"./FoodItem\";\nimport { isOrderBoard, Order } from \"./OrderBoard\";\n\nexport type ScoreCounter = HasId & HasRenderer & HasOverlay & HasBoundingbox & {\n    isScoreCounter: true;\n}\n\nexport const isScoreCounter = (x: any): x is ScoreCounter => x && x.isScoreCounter\n\nconst defaultWidth = coalesceX('3.5studs')\n\nexport const createScoreCounter = (sideLength: Dimension = defaultWidth, x: Dimension = WIDTH - (defaultWidth/2), y: Dimension = HEIGHT - (defaultWidth/2)): ScoreCounter => ({\n    ...createWithId(),\n    ...createHasOverlay(),\n    ...createWithBoundingbox(sideLength, sideLength, x, y),\n    isScoreCounter: true,\n    render\n})\n\n\nconst render = ((state: GameState, counter: ScoreCounter, ctx: CanvasRenderingContext2D) => {\n\n    let { x, y, width: sideLength } = counter.boundingbox;\n\n    ctx.beginPath();\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n\n    ctx.drawImage(\n        AssetManager.getImage(`score-counter/1.png`),\n        x - (sideLength/2), y - (sideLength/2), sideLength, sideLength\n    )\n    ctx.fill();\n\n    const finalScore = calculateFinalScore(state)\n\n    ctx.beginPath();\n    ctx.font = `italic ${font.large}px apercu-medium`;\n    ctx.textBaseline = 'middle';\n    ctx.textAlign = 'center';\n    ctx.fillStyle = 'rgba(255, 255, 255, 1)';\n    ctx.strokeStyle = 'black';\n    ctx.lineWidth = 8;\n    ctx.strokeText(`${finalScore}`, x - (sideLength*.1), y - (sideLength*.1))\n    ctx.fillText(`${finalScore}`, x - (sideLength*.1), y - (sideLength*.1))\n}) as Renderer;\n\nconst timeToDeliveryGreaterThan = (deadline: number, frameNumber: number) => (order: Order) =>\n    (order.fullfilledAt || frameNumber) - order.placedAt > deadline  * 1000 / MS_PER_FRAME\n\nconst timeToDeliveryLessThan = (deadline: number, frameNumber: number) => (order: Order) =>\n    (order.fullfilledAt || frameNumber) - order.placedAt < deadline  * 1000 / MS_PER_FRAME\n\nexport function calculateFinalScore({ objects, frameNumber }: GameState){\n    let [ orderBoard ] = filter(objects, isOrderBoard);\n\n    if(!orderBoard) return 0;\n\n    const { firstDeadline, secondDeadline } = orderBoard;\n\n    let score = -\n        (orderBoard.orders.filter(timeToDeliveryGreaterThan(secondDeadline, frameNumber)).length\n        + orderBoard.fullfilled.filter(timeToDeliveryGreaterThan(secondDeadline, frameNumber)).length)\n\n    score += orderBoard.fullfilled\n        .filter(timeToDeliveryGreaterThan(firstDeadline, frameNumber))\n        .filter(timeToDeliveryLessThan(secondDeadline, frameNumber))\n        .reduce(ordersToScore, 0)\n\n    score += orderBoard.fullfilled\n        .filter(timeToDeliveryLessThan(firstDeadline, frameNumber))\n        .reduce(ordersToScore, 0) * 2\n\n    return score;\n}\n\nconst doubleScoringItems: FoodItemId[] = [\n    'deluxe-sandwich',\n    'deluxe-sandwich-no-pickles',\n    'spicy-deluxe-sandwich',\n    'spicy-deluxe-sandwich-no-pickles',\n    'fruit-cup'\n]\n\nconst ordersToScore = (score: number, order: Order) => {\n    if(doubleScoringItems.some( item => order.foodItems.includes(item))){\n        return score + 2\n    }\n    return score + 1\n}","import { Dimension } from \"Dimensions\";\nimport { combineRenderers, create3DRenderer, createContentRenderer } from \"Renderer\";\nimport { CanBlockMovement, createCanBlockMovement, createWithCounterSpace, createWithHitbox, createWithId, HasRenderer, HasCounterSpace, HasHitBox, HasId, CanHandleDrop, hasHitbox, CanProvide, createCanProvide, canBlockMovement } from \"Traits\";\nimport { createFoodItem, FoodItemId } from \"./FoodItem\";\n\nexport type Bucket = HasId & HasHitBox & CanProvide & HasRenderer;\n\nexport const createBucket = (content: FoodItemId, x?: Dimension, z?: Dimension): Bucket => ({\n    ...createWithId(),\n    ...createWithHitbox('2studs', '2studs', x, z, '1studs'),\n    ...createCanProvide(() => createFoodItem(content)),\n    render: combineRenderers(\n        create3DRenderer('bucket'),\n        createContentRenderer({ sprite: 'bucket', content  })\n    ),\n})\n","import { Dimension } from \"Dimensions\";\nimport { combineRenderers, create3DRenderer, createContentRenderer } from \"Renderer\";\nimport { CanBlockMovement, createCanBlockMovement, createWithCounterSpace, createWithHitbox, createWithId, HasRenderer, HasCounterSpace, HasHitBox, HasId, CanHandleDrop, hasHitbox, CanProvide, createCanProvide } from \"Traits\";\nimport { createFoodItem, FoodItemId } from \"./FoodItem\";\nimport { createTray } from \"./Tray\";\n\nexport type TrayStack = HasId & HasHitBox & CanProvide & HasRenderer;\n\nexport const createTrayStack = (x?: Dimension, z?: Dimension): TrayStack => ({\n    ...createWithId(),\n    ...createWithHitbox('2studs', '2studs', x, z, '1studs'),\n    ...createCanProvide(() => createTray()),\n    render: create3DRenderer('tray-stack'),\n})\n\n","\n\nimport { coalesceX, font, HEIGHT, WIDTH } from \"Dimensions\";\nimport { loadFinishedLevelMenu } from \"Menus\";\nimport { AssetManager } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState } from \"State\";\nimport { createHasOverlay, createWithId, filter, HasId, HasOverlay, HasRenderer, Renderer } from \"Traits\";\n\nexport type Timer = HasId & HasRenderer & HasOverlay & {\n    isTimer: true;\n    startedAt: number;\n    duration: number;\n}\n\nexport const isTimer = (x: any): x is Timer => x && x.isTimer\n\nexport const createTimer = (startedAt: number, duration: number): Timer => ({\n    ...createWithId(),\n    ...createHasOverlay(),\n    startedAt,\n    duration,\n    isTimer: true,\n    render\n})\n\nconst sideLength = coalesceX('3.5studs')\n\nconst render = (({ frameNumber, objects }: GameState, timer: Timer, ctx: CanvasRenderingContext2D) => {\n    ctx.beginPath();\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n    ctx.drawImage(\n        AssetManager.getImage(`clock/1.png`),\n        0, HEIGHT - sideLength - 10, sideLength, sideLength\n    )\n    ctx.fill();\n\n    const elapsed = frameNumber - timer.startedAt\n\n    const remaining = timer.duration - elapsed\n\n    const totalSeconds = Math.round(remaining * MS_PER_FRAME / 1000)\n\n    const minutes = Math.floor(totalSeconds / 60);\n\n    const seconds = Math.round(totalSeconds % 60);\n\n    const time = minutes.toString().padStart(2, '0') + \":\" + seconds.toString().padStart(2, '0')\n\n    ctx.beginPath();\n    ctx.font = `italic ${font.medium}px apercu-medium`;\n    ctx.textBaseline = 'top';\n    ctx.strokeStyle = 'black';\n    ctx.lineWidth = 8;\n    ctx.fillStyle = 'rgba(255, 255, 255, 1)';\n    ctx.strokeText(`${time}`, 15, HEIGHT - (sideLength*.8))\n    ctx.fillText(`${time}`, 15, HEIGHT - (sideLength*.8))\n}) as Renderer;\n\nexport function timerReducer(object: GameObject, state: GameState){\n    if(!isTimer(object)) return state;\n\n    const timer = object as Timer;\n\n    const elapsed = state.frameNumber - timer.startedAt\n\n    const remaining = timer.duration - elapsed\n\n    if(remaining <= 0 && !state.isPaused){\n        return {\n            ...state,\n            isPaused: true,\n            canPause: false,\n            objects: [\n                ...state.objects,\n                ...loadFinishedLevelMenu(state)\n            ]\n        }\n    } else {\n        return state\n    }\n}\n","import { coalesceX, coalesceY, Dimension } from \"Dimensions\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState } from \"State\";\nimport { createWithBoundingbox, createWithId, HasBoundingbox, HasId, HasOverlay, HasRenderer } from \"Traits\";\n\n\nexport type StarDisplay = HasId & HasBoundingbox & HasRenderer & HasOverlay & {\n    score: number;\n    fadeInFrom: number | null;\n    labels: string[];\n};\n\nexport const createStarDisplay = (score: 0 | 1 | 2 | 3, width: Dimension, x: Dimension = 0, y: Dimension = 0, fadeInFrom: number | null = null, labels: string[] = []): StarDisplay => ({\n    ...createWithId(),\n    ...createWithBoundingbox(width, (coalesceX(width) / 3), x, y),\n    hasOverlay: true,\n    render,\n    score,\n    fadeInFrom,\n    labels\n})\n\nexport function render(state: GameState, object: GameObject, ctx: CanvasRenderingContext2D) {\n    const starDisplay = object as StarDisplay;\n\n    const { score, labels } = starDisplay;\n    const { width, x, y } = starDisplay.boundingbox;\n\n    let alpha1 = 1, alpha2 = 1, alpha3 = 1;\n\n    if(starDisplay.fadeInFrom !== null){\n        const startAt = starDisplay.fadeInFrom\n        const duration = 1000;\n        const elapsed = Date.now() - startAt;\n        if(elapsed < 0){\n            alpha1 = 0;\n            alpha2 = 0;\n            alpha3 = 0;\n        } else {\n            alpha1 = elapsed / duration\n            alpha2 = (elapsed - duration)  / duration\n            alpha3 = (elapsed - duration * 2)  / duration\n        }\n    }\n\n    let color1 = score > 0 ? `rgba(250, 198, 42, ${alpha1})` : 'rgba(194, 189, 174, 1)';\n    let color2 = score > 1 ? `rgba(250, 198, 42, ${alpha2})` : 'rgba(194, 189, 174, 1)';\n    let color3 = score > 2 ? `rgba(250, 198, 42, ${alpha3})` : 'rgba(194, 189, 174, 1)';\n\n    renderStar(ctx, width/3, x - width*.4, y, color1, labels[0])\n    renderStar(ctx, width/3, x, y, color2, labels[1])\n    renderStar(ctx, width/3, x + width*.4, y, color3, labels[2])\n}\n\nfunction renderStar(ctx: CanvasRenderingContext2D, sideLength: Dimension, x: Dimension, y: Dimension, color: string, label?: string) {\n    const outerRadius = coalesceX(sideLength) / 2\n    const innerRadius = outerRadius / 2\n\n    let rot: number = Math.PI / 2 * 3;\n    const cx = coalesceX(x);\n    const cy = coalesceY(y);\n    x = cx;\n\n    y = cy;\n    const step = Math.PI / 5;\n\n    ctx.beginPath();\n    ctx.moveTo(cx, cy - outerRadius)\n    for (let i = 0; i < 5; i++) {\n        x = cx + Math.cos(rot) * outerRadius;\n        y = cy + Math.sin(rot) * outerRadius;\n        ctx.lineTo(x, y)\n        rot += step\n\n        x = cx + Math.cos(rot) * innerRadius;\n        y = cy + Math.sin(rot) * innerRadius;\n        ctx.lineTo(x, y)\n        rot += step\n    }\n    ctx.lineTo(cx, cy - outerRadius);\n    ctx.closePath();\n    ctx.lineWidth = 5;\n    ctx.strokeStyle = color;\n    ctx.stroke();\n    ctx.fillStyle = color;\n    ctx.fill();\n\n    if(label){\n        ctx.textAlign = 'center';\n        ctx.fillText(label, cx, cy + outerRadius + 10)\n    }\n}","export type CanBlockMovement = {\n    canBlockMovement: true;\n}\n\nexport const canBlockMovement = (x: any): x is CanBlockMovement => Boolean(x?.canBlockMovement)\n\nexport const createCanBlockMovement = (): CanBlockMovement => ({\n    canBlockMovement: true\n})\n","import { ControllerId, Controls } from \"Controls\"\nimport { coalesceX, coalesceZ, createVector, Direction, GAME_HEIGHT_STUDS, GAME_WIDTH_STUDS } from \"Dimensions\";\nimport { GameState, GameObject, updateGameObjectById } from \"State\";\nimport { canBlockMovement } from \"./CanBlockMovement\";\nimport { CanFaceADirection, createCanFaceADirection } from \"./CanFaceADirection\";\nimport { hasCollision, HasHitBox, moveObject } from \"./HasHitbox\";\n\nexport type CanBeControlled = CanFaceADirection & {\n    controllerId: ControllerId;\n    facing: Direction;\n    moving: boolean;\n    startedDashAt: null | number;\n}\n\nexport const createCanBeControlled = (controllerId: ControllerId, facing: Direction = 'south'): CanBeControlled => ({\n    ...createCanFaceADirection(facing),\n    controllerId,\n    moving: false,\n    startedDashAt: null\n})\n\nexport const canBeControlled = (x: any): x is CanBeControlled => typeof x.controllerId !== 'undefined'\n\nexport function canBeControlledReducer(object: GameObject, state: GameState): GameState {\n    if(!canBeControlled(object) || state.isPaused) return state;\n\n    const controller = Controls[object.controllerId];\n\n    let facing: Direction;\n    if(controller.isPressed('up')){\n        facing = 'north';\n    } else if(controller.isPressed('down')){\n       facing = 'south';\n    } else if(controller.isPressed('left')){\n        facing = 'west';\n    } else if(controller.isPressed('right')){\n        facing = 'east';\n    } else {\n        facing = object.facing;\n    }\n\n    let moving = controller.isPressed('up') || controller.isPressed('down') || controller.isPressed('left') || controller.isPressed('right');\n\n    object = {\n        ...object,\n        facing,\n        moving,\n    }\n\n    let speed = '0.25studs';\n\n    if(controller.justPressed('bumper')){\n        object = {\n            ...object,\n            startedDashAt: state.frameNumber\n        }\n    }\n\n    if(object.startedDashAt && object.startedDashAt > state.frameNumber - 3.5){\n        speed = '1studs'\n    }\n\n    if (object.moving) {\n        const movedObject = moveObject(object, createVector(speed, object.facing));\n        const blockers = state.objects.filter(canBlockMovement);\n\n        if(!hasCollision(movedObject, blockers) && !outsidePlayArea(movedObject)) {\n            object = movedObject\n        }\n    }\n\n    return {\n        ...state,\n        objects: updateGameObjectById(state.objects, object)\n    };\n}\n\nfunction outsidePlayArea(object: HasHitBox){\n\n    if(object.hitbox.x < 0) return true;\n    if(object.hitbox.x + object.hitbox.dx > coalesceX(`${GAME_WIDTH_STUDS}studs`)) return true;\n    if(object.hitbox.z < 0) return true;\n    if(object.hitbox.z + object.hitbox.dz > coalesceZ(`${GAME_HEIGHT_STUDS}studs`)) return true;\n\n    return false\n}","import { Controls } from \"Controls\";\nimport { Character, isFinishedFryer, isTray, Tray } from \"Objects\";\nimport { GameObject, GameState, updateGameObjectById } from \"State\";\nimport { canProvide, filter } from \"Traits\";\nimport { CanBeCarried, canBeCarried, canBePickedUp } from \"./CanBeCarried\";\nimport { CanBeControlled, canBeControlled } from \"./CanBeControlled\";\nimport { getObjectsInfrontOf } from \"./CanFaceADirection\";\nimport { hasHitbox, HasHitBox } from \"./HasHitbox\";\n\nexport type CanCarry = {\n    carrying: null | number;\n    canCarry: true;\n}\n\nexport const canCarry = (x: any): x is CanCarry => Boolean(x?.canCarry)\n\nexport const createCanCarry = (): CanCarry => ({\n    carrying: null,\n    canCarry: true\n})\n\nexport function canCarryReducer(object: GameObject, state: GameState): GameState {\n    if(!canCarry(object) || !canBeControlled(object)) return state;\n\n    let carrier = object as Character;\n\n    const controller = Controls[carrier.controllerId];\n\n    let objects = state.objects\n\n    if (controller.justReleased('primaryAction')) {\n\n        const whatsBeingCarried = carrier.carrying\n            ? objects.find( x => x.id === carrier.carrying) as GameObject & CanBeCarried & HasHitBox\n            : null\n\n        if(whatsBeingCarried?.canBeDropped(objects)){\n            objects = whatsBeingCarried.handleDrop(objects, state.frameNumber);\n\n            carrier = {\n                ...carrier,\n                carrying: null\n            }\n\n            objects = updateGameObjectById(objects, carrier)\n\n            return { ...state, objects}\n        }\n\n        if(whatsBeingCarried && !isTray(whatsBeingCarried)){\n            return state;\n        }\n\n        const tray = whatsBeingCarried as null | Tray;\n\n        let targets = objects.filter( object => object.id !== tray?.id);\n\n        let [ objectToPickUp ] = getObjectsInfrontOf(object, filter(targets, canBePickedUp, hasHitbox));\n        const [ provider ] = getObjectsInfrontOf(object, filter(targets, canProvide))\n        const [ finishedFryer ] = getObjectsInfrontOf(object, filter(targets, isFinishedFryer))\n\n        if(!objectToPickUp && provider) {\n            let provided = provider.provide();\n            if(isTray(provided) && tray){\n\n            } else {\n                objectToPickUp = provided;\n                objects = [ ...objects, objectToPickUp ]\n            }\n        }\n\n        if(!objectToPickUp && finishedFryer){\n            ([objects, objectToPickUp] = finishedFryer.retrieve(objects));\n        }\n\n        if (objectToPickUp && !tray) {\n            objects = objectToPickUp.handlePickedUpBy(carrier, objects);\n            carrier = {\n                ...carrier,\n                carrying: objectToPickUp.id\n            }\n        }\n\n        if(objectToPickUp && tray && tray.canHandleDrop(objectToPickUp)){\n            objects = objectToPickUp.handlePickedUpBy(carrier, objects)\n            objects = tray.handleDropped(objectToPickUp, objects, state.frameNumber)\n        }\n\n    }\n\n    return {\n        ...state,\n        objects: updateGameObjectById(objects, carrier)\n    }\n}\n","import { Controls } from \"Controls\";\nimport { Character, isCuttingBoard } from \"Objects\";\nimport { AssetManager } from \"Renderer\";\nimport { GameObject, GameState, updateGameObjectById } from \"State\";\nimport { filter } from \"Traits\";\nimport { canBeControlled } from \"./CanBeControlled\";\nimport { canCarry } from \"./CanCarry\";\nimport { getObjectsInfrontOf } from \"./CanFaceADirection\";\n\n\nexport type CanChop = {\n    canChop: true;\n    chopping: boolean;\n}\n\nexport const canChop = (x: any): x is CanChop => Boolean(x?.canChop)\n\nexport const createCanChop = (): CanChop => ({\n    canChop: true,\n    chopping: false,\n})\n\nexport function canChopReducer(object: GameObject, state: GameState): GameState {\n    if(!canChop(object) || !canBeControlled(object) || !canCarry(object)) return state;\n\n    const controller = Controls[object.controllerId];\n\n    let chopper = object as Character;\n\n    let objects = state.objects;\n\n    chopper = {\n        ...chopper,\n        chopping: false\n    }\n\n    if (controller.isPressed('secondaryAction') && object.carrying === null && !state.isPaused){\n        const [ cuttingBoard ] = getObjectsInfrontOf(object, filter(state.objects, isCuttingBoard));\n\n        if(cuttingBoard && cuttingBoard.canChop()){\n            chopper = {\n                ...chopper,\n                chopping: true\n            }\n            objects = updateGameObjectById(objects, chopper)\n            objects = cuttingBoard.chop(chopper, objects);\n            chopper = objects.find( object => object.id === chopper.id) as Character\n        }\n    }\n\n    let track = AssetManager.loadAliasedAudio(`chopping.${chopper.id}`, 'chopping.mp3');\n    if(chopper.chopping){\n        track.play(0.15);\n    }\n\n    objects = updateGameObjectById(objects, chopper)\n\n    return {\n        ...state,\n        objects\n    }\n}\n","import { GameObject } from \"State\";\nimport { CanBeCarried } from \"./CanBeCarried\";\nimport { HasHitBox } from \"./HasHitbox\";\n\ntype Provide = () => GameObject & HasHitBox & CanBeCarried\n\nexport type CanProvide = {\n    canProvide: true;\n    provide: Provide\n}\n\nexport const canProvide = (x: any): x is CanProvide => Boolean(x?.canProvide)\n\nexport const createCanProvide = (provide: Provide): CanProvide => ({\n    canProvide: true,\n    provide\n})\n","export type HasId = {\n    id: number\n}\n\nlet idSerial = 1;\n\nexport const createWithId = () => ({\n    id: idSerial++\n})","\n\nexport type HasOverlay = {\n    hasOverlay: true;\n}\n\nexport const createHasOverlay = (): HasOverlay => ({\n    hasOverlay: true\n})\n\nexport const hasOverlay = (x: any): x is HasOverlay => x.hasOverlay","import { Controls } from \"Controls\";\nimport { Character, isBreadingTable } from \"Objects\";\nimport { AssetManager } from \"Renderer\";\nimport { GameObject, GameState, updateGameObjectById } from \"State\";\nimport { filter, HasHitBox } from \"Traits\";\nimport { canBeControlled } from \"./CanBeControlled\";\nimport { canCarry } from \"./CanCarry\";\nimport { CanFaceADirection, getObjectsInfrontOf } from \"./CanFaceADirection\";\n\n\nexport type CanBread = {\n    canBread: true;\n    breading: boolean;\n}\n\nexport const canBread = (x: any): x is CanBread => Boolean(x?.canBread)\n\nexport const createCanBread = (): CanBread => ({\n    canBread: true,\n    breading: false,\n})\n\nexport function canBreadReducer(object: GameObject, state: GameState): GameState {\n    if(!canBread(object) || !canBeControlled(object)) return state;\n\n    const controller = Controls[object.controllerId];\n\n    let breader = object as Character;\n\n    let objects = state.objects;\n\n    breader = {\n        ...breader,\n        breading: false\n    }\n\n    if (controller.isPressed('secondaryAction') && breader.carrying === null && !state.isPaused){\n        const [ breadingTable ] = getObjectsInfrontOf(breader, filter(state.objects, isBreadingTable));\n\n        if(breadingTable && breadingTable.canBread()){\n            breader = {\n                ...breader,\n                breading: true\n            }\n            objects = updateGameObjectById(objects, breader)\n            objects = breadingTable.bread(breader, objects, state.frameNumber);\n            breader = objects.find( object => object.id === breader.id) as Character\n        }\n    }\n    let track = AssetManager.loadAliasedAudio(`breading.${breader.id}`, 'breading.mp3');\n    if(breader.breading){\n        track.play();\n    }\n\n    objects = updateGameObjectById(objects, breader)\n\n    return {\n        ...state,\n        objects\n    }\n}\n","import { coalesceX, coalesceY, coalesceZ, Dimension, Pixels } from \"Dimensions\";\n\nexport type Boundingbox = {\n    x: Pixels;\n    y: Pixels;\n    width: Pixels;\n    height: Pixels;\n}\n\nexport type HasBoundingbox = {\n    boundingbox: Boundingbox\n}\n\nexport const HasBoundingbox = (x: any): x is HasBoundingbox => typeof x.boundingbox !== 'undefined'\n\nexport function createWithBoundingbox(width: Dimension, height: Dimension, x: Dimension = 0, y: Dimension = 0): HasBoundingbox {\n    return {\n        boundingbox: {\n            width: coalesceX(width),\n            height: coalesceY(height),\n            x: coalesceX(x),\n            y: coalesceY(y)\n        }\n    }\n}","import { coalesceX, coalesceY, coalesceZ, Dimension, Pixels, Vector } from \"Dimensions\";\n\nexport type Origin = {\n    x: Pixels;\n    y: Pixels;\n}\n\nexport type HasOrigin = {\n    origin: Origin\n}\n\nexport const hasOrigin = (x: any): x is HasOrigin => typeof x.origin !== 'undefined'\n\n\nexport function createWithOrigin( x: Dimension = 0,  y: Dimension = 0): HasOrigin {\n    return {\n        origin: {\n            x: coalesceX(x),\n            y: coalesceY(y)\n        }\n    }\n}\n","export * from './CanBeCarried'\nexport * from './CanCarry'\nexport * from './CanFaceADirection'\nexport * from './CanBeControlled'\nexport * from './CanBlockMovement'\nexport * from './CanHandleDrop'\nexport * from './CanChop'\nexport * from './CanProivde'\nexport * from './HasCounterSpace'\nexport * from './HasRenderer'\nexport * from './HasHitbox'\nexport * from './HasId'\nexport * from './HasOverlay'\nexport * from './CanBread'\nexport * from './HasBoundingbox'\nexport * from './HasOrigin'\n\n\nexport const filter = <I, T1, T2, T3, T4>(\n    objects: I[], \n    callback1: (object: any) => object is T1,\n    callback2?: (object: any) => object is T2,\n    callback3?: (object: any) => object is T3,\n    callback4?: (object: any) => object is T4\n): (I & T1 & T2 & T3 & T4)[] => {\n    // @ts-ignore\n    return objects.filter((object: any): object is T1 & T2 & T3 & T4 => {\n        return callback1(object) \n            && (!callback2 || callback2(object))\n            && (!callback3 || callback3(object))\n            && (!callback4 || callback4(object))\n    })\n}","import { HEIGHT, WIDTH } from \"Dimensions\";\nimport { GameState } from \"State\";\nimport { hasHitbox, hasOverlay, hasRenderer } from \"Traits\";\n\nexport function createGameRenderer(canvas: HTMLCanvasElement){\n    canvas.style.width = '100vw';\n    canvas.style.height = '100vh';\n    canvas.width = WIDTH;\n    canvas.height = HEIGHT;\n\n    const ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n\n    function renderFrame(state: GameState){\n        // Clear the Canvas\n        ctx.clearRect(\n            0,\n            0,\n            WIDTH,\n            HEIGHT\n        );\n\n        // Sort objects with hitboxes on the z-axis\n        const objects  = [ ...state.objects ].sort( (a, b) => {\n            if(hasOverlay(a) && !hasOverlay(b)){\n                return 1\n            }\n            if(!hasOverlay(a) && hasOverlay(b)){\n                return -1\n            }\n            if(hasHitbox(a) && hasHitbox(b)){\n                if(b.hitbox.z == a.hitbox.z) return a.hitbox.y - b.hitbox.y;\n                return b.hitbox.z - a.hitbox.z;\n            }\n            if(hasHitbox(a) && !hasHitbox(b)){\n                return 1\n            }\n            if(!hasHitbox(a) && hasHitbox(b)){\n                return -1;\n            }\n            return 0;\n        });\n\n        // Render All Objects\n        objects.forEach( object => {\n            if(hasRenderer(object)){\n                ctx.save();\n                object.render(state, object, ctx);\n                ctx.restore();\n            }\n        })\n    }\n\n    return renderFrame;\n}\n\n","import { GameObject, GameState } from \"State\";\n\nexport type HasRenderer = {\n    render: Renderer;\n}\n\nexport const hasRenderer = (x: any): x is HasRenderer => Boolean(x.render)\n\nexport type Renderer = (state: GameState, object: GameObject, ctx: CanvasRenderingContext2D) => void;","import { GameObject, GameState } from \"State\";\nimport { Renderer } from \"Traits\";\n\nexport const combineRenderers = (...renderers: Renderer[]): Renderer => {\n    return (state: GameState, object: GameObject, ctx: CanvasRenderingContext2D) => {\n        renderers.forEach( renderer => renderer(state, object, ctx))\n    }\n}","import { coalesceX, Dimension, HEIGHT, Pixels } from \"Dimensions\";\nimport { Animations, Animation } from \"Renderer\";\nimport { AssetManager } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState } from \"State\";\nimport { Renderer, HasHitBox, Hitbox, HasBoundingbox } from \"Traits\";\n\nexport const create2DRenderer = <T extends GameObject & HasBoundingbox>(options: Create2DRendererOptions<T>): Renderer => {\n    const renderer = function(this: HasBoundingbox, state: GameState, object: T, ctx: CanvasRenderingContext2D){\n        const { spriteKey, speed, fade } = process2DRendererOptions(options, object, state);\n\n        let { width, height, x, y } = object.boundingbox;\n\n        if(spriteKey == null) return;\n\n        const animation = Animations[spriteKey];\n\n        const numberOfSyntheticFrames = Math.ceil(animation.numberOfFrames / speed)\n\n        const ratio = animation.numberOfFrames / numberOfSyntheticFrames\n\n        const currentSyntheticAnimationFrame = state.frameNumber % numberOfSyntheticFrames+1;\n\n        const currentAnimationFrame = Math.max(1, Math.min(Math.ceil(currentSyntheticAnimationFrame * ratio), animation.numberOfFrames))\n\n        width = width || animation.size.width as Pixels;\n\n        const scale = width / animation.size.width;\n\n        height = animation.size.height * scale as Pixels\n\n        if(fade){\n            const { startAt, duration } = fade;\n            const elapsed = state.frameNumber - startAt;\n            const finalFrame = duration / MS_PER_FRAME ;\n            ctx.globalAlpha = elapsed / finalFrame\n        }\n\n        ctx.drawImage(\n            AssetManager.getImage(spriteKey + `/${currentAnimationFrame}.png`),\n            x,\n            y,\n            width,\n            height\n        );\n            \n        ctx.globalAlpha = 1;\n    }\n\n    return renderer as Renderer;\n}\n\ntype SpriteKey = keyof typeof Animations | null;\ntype SpriteKeyOption<T> = SpriteKey | ((object: T, state: GameState) => SpriteKey);\ntype SpeedOption<T> = number | ((object: T, state: GameState) => number);\n\nexport type Create2DRendererOptions<T> = SpriteKeyOption<T> | { \n    sprite: SpriteKeyOption<T>, \n    fade?: { startAt: number, duration: number }\n    speed?: SpeedOption<T> \n};\n\nexport function process2DRendererOptions<T>(options: Create2DRendererOptions<T>, object: T, state: GameState) {\n    let spriteKey, speed, fade;\n\n    if(options === null){\n        speed = 1;\n        spriteKey = null;\n    } else if (typeof options === 'function') {\n        speed = 1;\n        spriteKey = options(object, state);\n    } else if (typeof options !== 'object') {\n        speed = 1;\n        spriteKey = options\n    } else {\n        spriteKey = typeof options.sprite === 'function' ? options.sprite(object, state) : options.sprite\n        speed = typeof options.speed === 'function' ? options.speed(object, state) : (options.speed || 1)\n        fade = options.fade\n    }\n\n    speed = Math.min(1, speed)\n\n    return { spriteKey, speed, fade }\n}\n\n","import { coalesceX, Dimension, HEIGHT, Pixels } from \"Dimensions\";\nimport { Animations, Animation } from \"Renderer\";\nimport { AssetManager } from \"Renderer\";\nimport { GameObject, GameState } from \"State\";\nimport { Renderer, HasHitBox, Hitbox } from \"Traits\";\n\n\nexport const create3DRenderer = <T extends GameObject & HasHitBox>(options: Create3DRendererOptions<T>): Renderer => {\n    const renderer = (state: GameState, object: T, ctx: CanvasRenderingContext2D) => {\n        const { spriteKey, padding, speed } = process3DRendererOptions(options, object, state);\n\n        if(spriteKey == null) return;\n\n        const animation = Animations[spriteKey];\n\n        const numberOfSyntheticFrames = Math.ceil(animation.numberOfFrames / speed)\n\n        const ratio = animation.numberOfFrames / numberOfSyntheticFrames\n\n        const currentSyntheticAnimationFrame = state.frameNumber % numberOfSyntheticFrames+1;\n\n        const currentAnimationFrame = Math.max(1, Math.min(Math.ceil(currentSyntheticAnimationFrame * ratio), animation.numberOfFrames))\n\n        if (animation.sideview) {\n            ctx.drawImage(\n                AssetManager.getImage(`${spriteKey}/${currentAnimationFrame}.sideview.png`),\n                ...getSpriteCoords({ ...object.hitbox, y: 0 as Pixels }, animation.sideview.size)\n            )\n        }\n\n        ctx.drawImage(\n            AssetManager.getImage(spriteKey + `/${currentAnimationFrame}.png`),\n            ...getSpriteCoords(object.hitbox, animation.size, padding)\n        );\n    }\n\n    return renderer as Renderer;\n}\n\n\ntype SpriteKey = keyof typeof Animations | null;\n\ntype SpriteKeyOption<T> = SpriteKey | ((object: T, state: GameState) => SpriteKey);\ntype SpeedOption<T> = number | ((object: T, state: GameState) => number);\n\nexport type Create3DRendererOptions<T> = SpriteKeyOption<T> | { sprite: SpriteKeyOption<T>, speed?: SpeedOption<T>, padding?: Dimension };\n\nexport function process3DRendererOptions<T>(options: Create3DRendererOptions<T>, object: T, state: GameState) {\n    let spriteKey, padding, speed;\n\n    if(options === null){\n        padding = 0;\n        speed = 1;\n        spriteKey = null;\n    } else if (typeof options === 'function') {\n        padding = 0;\n        speed = 1;\n        spriteKey = options(object, state);\n    } else if (typeof options !== 'object') {\n        padding = 0;\n        speed = 1;\n        spriteKey = options\n    } else {\n        spriteKey = typeof options.sprite === 'function' ? options.sprite(object, state) : options.sprite\n        speed = typeof options.speed === 'function' ? options.speed(object, state) : (options.speed || 1)\n        padding = coalesceX(options.padding || 0)\n    }\n\n    speed = Math.min(1, speed)\n\n    return { spriteKey, padding, speed }\n}\n\n\nexport function getSpriteCoords(hitbox: Hitbox, size: Animation['size'], padding: number = 0): [number, number, number, number] {\n    const scale = (hitbox.dx + padding) / size.width;\n\n    const width = hitbox.dx + padding;\n\n    const height = size.height * scale;\n\n    const x = hitbox.x - (padding / 2);\n\n    const y = HEIGHT - (hitbox.z + hitbox.y + (height) + padding / 3);\n\n    return [x, y, width, height]\n}\n","import { coalesceX, Dimension } from \"Dimensions\";\nimport { FoodItemId, Tray } from \"Objects\";\nimport { Animations, getSpriteCoords } from \"Renderer\";\nimport { AssetManager } from \"Renderer\";\nimport { GameObject, GameState } from \"State\";\nimport { HasHitBox, Renderer } from \"Traits\";\nimport { renderFoodItemsInArea } from \"./renderFoodItemsInArea\";\n\n\nexport const createContentRenderer = <T extends GameObject & HasHitBox>(options: CreateContentRendererOptions<T>): Renderer => {\n    const renderer = (state: GameState, object: T, ctx: CanvasRenderingContext2D) => {\n        const { spriteKey, content } = processContentRendererOptions(options, object)\n\n        const objectAnimation = Animations[spriteKey];\n\n        const [ x, y, width, height ] = getSpriteCoords(object.hitbox, objectAnimation.size);\n\n        const foodItems = Object.keys(content) as FoodItemId[]\n    \n        const presentFoodItems = foodItems.filter( (foodItem) => content[foodItem] !== 0);\n\n        renderFoodItemsInArea({ x, y, width, height }, presentFoodItems, ctx)\n    }\n\n    return renderer as Renderer;\n}\n\ntype SpriteKey = keyof typeof Animations;\ntype Content = Partial<Record<FoodItemId, number>>;\n\ntype SpriteKeyOption<T> = SpriteKey | ((object: T) => keyof typeof Animations);\ntype ContentOption<T> = FoodItemId | null | Content | ((object: T) => FoodItemId | null | Content);\n\n\nexport type CreateContentRendererOptions<T> = { sprite: SpriteKeyOption<T>, content: ContentOption<T> };\n\nexport function processContentRendererOptions<T>(options: CreateContentRendererOptions<T>, object: T) {\n    let spriteKey = typeof options.sprite === 'function' ? options.sprite(object) : options.sprite\n    let content: Content;\n\n    let contentOption;\n    if(typeof options.content === 'function'){\n       contentOption = options.content(object)\n    } else {\n        contentOption = options.content\n    }\n\n    if(contentOption === null){\n        content = {}\n    } else if(typeof contentOption === 'object'){\n        content = contentOption\n    } else {\n        content = {\n            [contentOption]: 1\n        }\n    }\n\n    return { spriteKey, content }\n}","import { CuttingBoard } from \"Objects\";\nimport { Animations, Create3DRendererOptions, getSpriteCoords, process3DRendererOptions } from \"Renderer\";\nimport { GameObject, GameState } from \"State\";\nimport { HasHitBox, Renderer } from \"Traits\";\n\ntype HasProgress = {\n    progress: null | number\n}\n\nexport const createProgressRenderer = (options: Create3DRendererOptions<GameObject & HasHitBox & HasProgress>): Renderer => {\n    const renderer = (state: GameState, object: GameObject & HasHitBox & HasProgress, ctx: CanvasRenderingContext2D) => {\n        const { spriteKey } = process3DRendererOptions(options, object, state)\n\n        if(spriteKey === null) return;\n\n        const objectAnimation = Animations[spriteKey];\n\n        const [ objectX, objectY, objectWidth, objectHeight ] = getSpriteCoords(object.hitbox, objectAnimation.size);\n\n        if(object.progress !== null) {\n            ctx.beginPath();\n            ctx.lineWidth = 5\n            ctx.strokeStyle = 'white';\n            ctx.moveTo(objectX, objectY);\n            ctx.lineTo(objectX + objectWidth, objectY);\n            ctx.stroke();\n\n            ctx.beginPath();\n            ctx.strokeStyle = '#5e9b4a';\n            ctx.moveTo(objectX, objectY);\n            ctx.lineTo(objectX + (objectWidth * object.progress), objectY);\n            ctx.stroke();\n        }\n\n    }\n\n    return renderer as Renderer;\n}\n","import { coalesceX, Dimension, HEIGHT, Pixels } from \"Dimensions\";\nimport { Animations, Animation } from \"Renderer\";\nimport { AssetManager } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState } from \"State\";\nimport { Renderer, HasHitBox, Hitbox, HasBoundingbox, HasOrigin } from \"Traits\";\n\nexport const createTextRenderer = <T extends GameObject & HasOrigin>(options: CreateTextRendererOptions<T>): Renderer => {\n    const renderer = function(this: HasBoundingbox, state: GameState, object: T, ctx: CanvasRenderingContext2D){\n        let { x, y } = object.origin;\n        renderText(ctx, state, x, y, processTextRendererOptions(options, object, state))\n    }\n\n    return renderer as Renderer;\n}\n\nexport function renderText(ctx: CanvasRenderingContext2D, state: GameState, x: number, y: number, options: ReturnType<typeof processTextRendererOptions>){\n    const { text, font, fade, align, baseline, color } = options;\n\n    if(text === null) return;\n\n    if(fade){\n        const { startAt, duration, loop } = fade;\n        const elapsed = state.frameNumber - startAt;\n        const finalFrame = duration / MS_PER_FRAME ;\n        if(elapsed < 0){\n            ctx.globalAlpha = 0\n        }else if(!loop || elapsed < finalFrame){\n            ctx.globalAlpha = elapsed / finalFrame\n        } else {\n            let currentIteration = Math.floor(elapsed / finalFrame)\n            let elapsedThisIteration = (elapsed % finalFrame) / finalFrame;\n            if(currentIteration % 2 == 0){ // Fade In\n                ctx.globalAlpha = elapsedThisIteration\n            } else { // Fade Out\n                ctx.globalAlpha = 1-elapsedThisIteration\n            }\n        }\n    }\n\n    ctx.save();\n    if(font){\n        ctx.font = font\n    }\n\n    ctx.fillStyle = color\n    ctx.textAlign = align;\n    ctx.textBaseline = baseline;\n\n    ctx.fillText(\n        text,\n        x,\n        y,\n    );\n\n    ctx.restore()\n    ctx.globalAlpha = 1;\n}\n\ntype TextOption<T> = string | ((object: T, state: GameState) => string);\n\nexport type CreateTextRendererOptions<T> = TextOption<T> | {\n    text: TextOption<T>,\n    font?: string,\n    color?: string,\n    baseline?: CanvasTextBaseline,\n    align?: CanvasTextAlign,\n    fade?: { startAt: number, duration: number, loop?: boolean }\n};\n\nexport function processTextRendererOptions<T>(options: CreateTextRendererOptions<T>, object: T, state: GameState) {\n    let text, font, fade;\n    let color = 'black'\n    let align: CanvasTextAlign = 'center';\n    let baseline: CanvasTextBaseline = 'middle';\n\n    if(options === null){\n        text = null;\n    } else if (typeof options === 'function') {\n        text = options(object, state);\n    } else if (typeof options !== 'object') {\n        text = options\n    } else {\n        text = typeof options.text === 'function' ? options.text(object, state) : options.text\n        align = options.align || align\n        baseline = options.baseline || baseline\n        color = options.color || color\n        font = options.font\n        fade = options.fade\n    }\n\n    return { text, fade, font, color, align, baseline }\n}\n\n","import { coalesceX, Dimension, font, HEIGHT, Pixels } from \"Dimensions\";\nimport { Button } from \"Menus\";\nimport { Animations, Animation } from \"Renderer\";\nimport { AssetManager } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState } from \"State\";\nimport { Renderer, HasHitBox, Hitbox, HasBoundingbox } from \"Traits\";\n\nexport const createButtonRenderer = (options: CreateButtonRendererOptions<Button>): Renderer => {\n    const renderer = function(this: HasBoundingbox, state: GameState, button: Button, ctx: CanvasRenderingContext2D){\n        const { text, fade, align, baseline, color } = processButtonRendererOptions(options, button, state);\n\n        let { x, y } = button.origin;\n\n        if(text === null) return\n\n        if(fade){\n            const { startAt, duration } = fade;\n            const elapsed = state.frameNumber - startAt;\n            const finalFrame = duration / MS_PER_FRAME ;\n            ctx.globalAlpha = elapsed / finalFrame\n        }\n\n        ctx.fillStyle = color;\n        ctx.strokeStyle = color;\n\n        ctx.font = `${font.medium}px apercu-medium`\n        ctx.textAlign = align;\n        ctx.textBaseline = baseline;\n\n        const { width, fontBoundingBoxDescent, actualBoundingBoxLeft } = ctx.measureText(text)\n\n        ctx.fillText(\n            text,\n            x,\n            y,\n        );\n\n        if(button.isSelected){\n            ctx.beginPath();\n            ctx.setLineDash([ 5, 5 ])\n            ctx.moveTo(x - actualBoundingBoxLeft, y + fontBoundingBoxDescent);\n            ctx.lineTo(x + width - actualBoundingBoxLeft, y + fontBoundingBoxDescent);\n            ctx.stroke();\n            ctx.setLineDash([])\n        }\n\n        ctx.globalAlpha = 1;\n    }\n\n    return renderer as Renderer;\n}\n\ntype TextOption<T> = string | ((object: T, state: GameState) => string);\n\nexport type CreateButtonRendererOptions<T> = TextOption<T> | {\n    text: TextOption<T>\n    fade?: { startAt: number, duration: number }\n    align?: CanvasTextAlign;\n    baseline?: CanvasTextBaseline\n    color?: string\n};\n\nexport function processButtonRendererOptions<T>(options: CreateButtonRendererOptions<T>, object: T, state: GameState) {\n    let text, fade;\n\n    let align: CanvasTextAlign = 'center';\n    let baseline: CanvasTextBaseline = 'middle'\n    let color = 'black'\n\n    if(options === null){\n        text = null;\n    } else if (typeof options === 'function') {\n        text = options(object, state);\n    } else if (typeof options !== 'object') {\n        text = options\n    } else {\n        text = typeof options.text === 'function' ? options.text(object, state) : options.text\n        fade = options.fade\n        align = options.align || align\n        baseline = options.baseline || baseline\n        color = options.color || color\n    }\n\n    return { text, fade, align, baseline, color  }\n}\n\n","import { coalesceX, Dimension, HEIGHT } from \"Dimensions\";\nimport { FoodItemId, Tray } from \"Objects\";\nimport { Animations, getSpriteCoords } from \"Renderer\";\nimport { AssetManager } from \"Renderer\";\nimport { GameObject, GameState } from \"State\";\nimport { HasHitBox, Renderer } from \"Traits\";\nimport { CanBeSpicy } from \"Traits/CanBeSpicy\";\nimport { renderFoodItemsInArea } from \"./renderFoodItemsInArea\";\n\n\nexport const createSpicyIconRenderer = <T extends GameObject & HasHitBox & CanBeSpicy>(): Renderer => {\n    const renderer = (state: GameState, object: T, ctx: CanvasRenderingContext2D) => {\n        const animation = Animations['spicy-icon'];\n\n        const scale = object.hitbox.dx / 3 / animation.size.width;\n\n        const width = object.hitbox.dx / 3\n        const height = animation.size.height * scale;\n        const x = object.hitbox.x + width\n        const y = HEIGHT - (object.hitbox.z + object.hitbox.y + height + 15);\n\n\n\n        if(object.isSpicy){\n            ctx.drawImage(\n                AssetManager.getImage(`spicy-icon.png`),\n                x, y, width, height\n            )\n        }\n    }\n\n    return renderer as Renderer;\n}\n","import { ControllerId, Controls } from \"Controls\";\nimport { coalesceX, coalesceY, Dimension, font } from \"Dimensions\";\nimport {  create2DRenderer, createTextRenderer, CreateTextRendererOptions } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState } from \"State\";\nimport {  createWithBoundingbox, createWithId, createWithOrigin, HasBoundingbox, HasId, HasOrigin, HasOverlay, HasRenderer } from \"Traits\";\nimport { loadLevelMenu } from \"./loadLevelMenu\";\n\nexport type GameText = HasId & HasOrigin & HasOverlay & HasRenderer;\n\nexport const createGameText = (options: CreateTextRendererOptions<GameText>, x: Dimension = 0, y: Dimension = 0, blink?: boolean): GameText => ({\n    ...createWithId(),\n    ...createWithOrigin(x, y),\n    hasOverlay: true,\n    render: createTextRenderer({\n        text: typeof options === 'string' ? options : '',\n        font: `${font.medium}px apercu-medium`,\n        color: '#e60e33',\n        fade: blink ? {\n            startAt: 25 * 2,\n            duration: 1000,\n            loop: true\n        } : undefined,\n        ...(typeof options === 'object' ? options : {})\n    })\n})","import { Controls } from \"Controls\";\nimport { coalesceX, coalesceY, Dimension } from \"Dimensions\";\nimport { createButtonRenderer, CreateButtonRendererOptions } from \"Renderer\";\nimport { GameObject, GameState, updateGameObjectById, updateGameObjectsWhere } from \"State\";\nimport { createWithBoundingbox, createWithId, createWithOrigin, filter, HasBoundingbox, HasId, HasOrigin, HasOverlay, HasRenderer } from \"Traits\";\n\nlet lastSelectionChange: null | number = null\n\nexport type Button = HasId & HasOrigin & HasRenderer & HasOverlay & {\n    isButton: true;\n    isSelected: boolean;\n    createdAt: number;\n    callback: (state: GameState) => GameState;\n};\n\nexport const isButton = (x: any): x is Button => x && x.isButton;\n\nexport const createButton = (options: CreateButtonRendererOptions<Button>, isSelected: boolean, x: Dimension = 0, y: Dimension = 0, callback: Button['callback']): Button => ({\n    ...createWithId(),\n    ...createWithOrigin(x, y),\n    render: createButtonRenderer(options),\n    isSelected,\n    isButton: true,\n    hasOverlay: true,\n    createdAt: Date.now(),\n    callback\n})\n\nexport function buttonReducer(object: GameObject, state: GameState) {\n    if (!isButton(object)) return state;\n\n    let button = object as Button;\n    let objects = state.objects;\n\n\n    for (let controller of Controls) {\n        if (controller.justPressed('primaryAction') && button.isSelected && button.createdAt < Date.now() - 500) {\n            return button.callback(state);\n        }\n\n        const justChangedSelection = lastSelectionChange !== null && lastSelectionChange > Date.now() - 250;\n        if ((controller.isPressed('down') || controller.isPressed('up')) && button.isSelected && !justChangedSelection) {\n            let direction = controller.isPressed('down') ? 1 : -1;\n\n            lastSelectionChange = Date.now();\n\n            button = {\n                ...button,\n                isSelected: false\n            }\n\n            objects = updateGameObjectById(objects, button)\n\n            let buttons = filter(objects, isButton)\n            for (let i = 0; i < buttons.length; i++) {\n                let currentButton = buttons[i];\n                let nextIndex = i + direction;\n                if (nextIndex >= buttons.length) nextIndex = 0;\n                if (nextIndex < 0) nextIndex = buttons.length - 1;\n                let nextButton = buttons[nextIndex];\n                if (currentButton.id === button.id) {\n                    nextButton = {\n                        ...nextButton,\n                        isSelected: true\n                    }\n                    objects = updateGameObjectById(objects, nextButton)\n                }\n            }\n        }\n\n        if (controller.justReleased('up') || controller.justReleased('down')) {\n            lastSelectionChange = null;\n        }\n    }\n\n    return {\n        ...state,\n        objects\n    };\n}","import { ControllerId, Controls } from \"Controls\";\nimport { coalesceX, coalesceY, Dimension, font, Pixels, WIDTH } from \"Dimensions\";\nimport { CharacterId, isCharacterUnlocked } from \"Objects\";\nimport { Animations, AssetManager, createTextRenderer, renderText } from \"Renderer\";\nimport { GameObject, GameState, updateGameObjectById, updateGameObjectsWhere } from \"State\";\nimport { createWithBoundingbox, createWithId, filter, HasBoundingbox, HasId, HasOverlay, HasRenderer } from \"Traits\";\n\nexport type CharacterMenu = HasId & HasRenderer & HasOverlay & {\n    isCharacterMenu: true;\n    selectedCharacters: Record<ControllerId, CharacterId | null>;\n};\n\nexport const isCharacterMenu = (x: any): x is CharacterMenu => x && x.isCharacterMenu;\n\nexport const createCharacterMenu = (): CharacterMenu => ({\n    ...createWithId(),\n    render,\n    isCharacterMenu: true,\n    hasOverlay: true,\n    selectedCharacters: {\n        1: null,\n        2: null,\n        3: null,\n        4: null\n    },\n})\n\ntype CharacterMatrix = CharacterId[][];\n\nconst characterMatrix: CharacterMatrix = [\n    ['jeannette','hoho',  'mandi', 'josh', 'julie', 'miles', 'lydia'],\n    ['truett',   'nonni', 'james', 'tori', 'charles', 'joy', 'isaac' ]\n]\n\nconst controllerColors: Record<ControllerId, string> = {\n    1: '#1455e8',\n    2: '#21e113',\n    3: '#edb22e ',\n    4: '#d11519'\n}\n\nexport function characterMenuReducer(object: GameObject, state: GameState) {\n    if (!isCharacterMenu(object)) return state;\n\n    let objects = state.objects;\n\n    let menu = object as CharacterMenu;\n\n    for(let controller of Controls){\n\n        let anyArrowPressed = controller.justPressed('up')\n            || controller.justPressed('down')\n            || controller.justPressed('left')\n            || controller.justPressed('right')\n\n        if(anyArrowPressed && state.selectedCharacters[controller.id] === null){\n            let newCharacterId: CharacterId;\n            let selectedCharacterIds = Object.values(menu.selectedCharacters);\n\n            let rowIndex, columnIndex, axis, direction;\n\n            if(menu.selectedCharacters[controller.id] === null){\n                rowIndex = 0;\n                columnIndex = -1;\n                axis = 'horizonal';\n                direction = +1;\n            } else {\n                let currentCharacterIdForPlayer = menu.selectedCharacters[controller.id] as CharacterId;\n                rowIndex = characterMatrix.findIndex( row => row.includes(currentCharacterIdForPlayer))\n                columnIndex = characterMatrix[rowIndex].indexOf(currentCharacterIdForPlayer)\n                axis = controller.justPressed('up') || controller.justPressed('down') ? 'vertical' : 'horizonal'\n                direction = controller.justPressed('up') || controller.justPressed('left') ? -1 : +1;\n            }\n\n\n            do {\n                let formerRowIndex: number = rowIndex;\n                let formerColumnIndex: number = columnIndex;\n                if(axis === 'vertical') rowIndex = characterMatrix[rowIndex + direction]?.[columnIndex] ? rowIndex + direction : rowIndex;\n                else columnIndex = characterMatrix[rowIndex]?.[columnIndex + direction] ? columnIndex + direction : columnIndex;\n\n                newCharacterId = characterMatrix[rowIndex][columnIndex];\n\n                if(formerColumnIndex === columnIndex && formerRowIndex === rowIndex && selectedCharacterIds.includes(newCharacterId)){\n                    newCharacterId = menu.selectedCharacters[controller.id] as CharacterId;\n                    break;\n                }\n\n            } while(selectedCharacterIds.includes(newCharacterId) && menu.selectedCharacters[controller.id] !== newCharacterId)\n\n            menu = {\n                ...menu,\n                selectedCharacters: {\n                    ...menu.selectedCharacters,\n                    [controller.id]: newCharacterId\n                }\n            }\n        }\n\n        let playersSelectedCharacter = menu.selectedCharacters[controller.id];\n\n        if(controller.justPressed('primaryAction') && playersSelectedCharacter && isCharacterUnlocked(state, playersSelectedCharacter)){\n            state = {\n                ...state,\n                selectedCharacters: {\n                    ...state.selectedCharacters,\n                    [controller.id]: playersSelectedCharacter\n                }\n            }\n        }\n\n        if(controller.justPressed('secondaryAction')){\n            state = {\n                ...state,\n                selectedCharacters: {\n                    ...state.selectedCharacters,\n                    [controller.id]: null\n                }\n            }\n        }\n\n    }\n\n    objects = updateGameObjectById(objects, menu);\n\n    return {\n        ...state,\n        objects\n    };\n}\n\n\nfunction render(state: GameState, object: GameObject, ctx: CanvasRenderingContext2D) {\n    let menu = object as CharacterMenu;\n    const menuWidth = coalesceX('80%');\n    const maxCharacterPerRow = Math.max(...characterMatrix.map(row => row.length))\n\n    const topMargin = coalesceY('20%');\n    const leftMargin = coalesceX('10%');\n    const menuHeight = coalesceY('80%');\n\n    if(Object.values(state.selectedCharacters).some( selection => selection !== null)){\n        renderText(ctx, state, coalesceX('90%'), coalesceY('5%'), {\n            text: 'Press Start When Ready',\n            align: 'right',\n            baseline: 'top',\n            font: `${font.small}px apercu-medium`,\n            color: '#e60e33',\n            fade: {\n                startAt: 25 * 2,\n                duration: 1000,\n                loop: true\n            }\n        })\n    }\n\n    characterMatrix.forEach((row, yIndex) => {\n        row.forEach((characterId, xIndex) => {\n\n            const [ controllerId ] = (\n                Object.entries(menu.selectedCharacters)\n                    .find(([ controllerId, selectedCharacterId ]) => characterId === selectedCharacterId)\n                || []\n            )\n\n            const isSelected = controllerId && state.selectedCharacters[Number(controllerId) as ControllerId] === characterId\n\n            renderCharacterIcon(ctx, {\n                characterId,\n                locked: !isCharacterUnlocked(state, characterId),\n                sideLength: menuWidth / maxCharacterPerRow,\n                y: topMargin + (yIndex*(menuWidth / maxCharacterPerRow + 30)),\n                x: leftMargin + (xIndex*(menuWidth / maxCharacterPerRow)),\n                outlineColor: controllerId !== undefined ? controllerColors[Number(controllerId) as ControllerId] : undefined,\n                outlineWidth: isSelected ? 8 : 4\n            })\n        })\n    })\n}\n\ntype RenderCharacterIconOptions = {\n    x: number,\n    y: number,\n    sideLength: number,\n    characterId: CharacterId,\n    locked?: boolean\n    outlineColor?: string\n    outlineWidth?: number\n}\n\nfunction renderCharacterIcon(ctx: CanvasRenderingContext2D, { characterId, sideLength, x, y, outlineColor, outlineWidth = 4, locked  }: RenderCharacterIconOptions){\n    ctx.save();\n    ctx.beginPath();\n    ctx.arc(x + sideLength/2, y + sideLength/2, sideLength/2, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.clip();\n\n    ctx.drawImage(\n        AssetManager.getImage(`characters/${characterId}/${locked ? 'locked' : 'profile'}/1.png`),\n        x, y,\n        sideLength, sideLength\n    )\n\n    ctx.beginPath();\n    ctx.arc(x, y, sideLength/2, 0, Math.PI * 2, true);\n    ctx.clip();\n    ctx.closePath();\n    ctx.restore();\n\n    ctx.fillStyle = locked ? 'black' : '#e60e33'\n    ctx.font = `${font.small}px apercu-medium`\n    ctx.textAlign = 'center'\n    ctx.textBaseline = 'top'\n    ctx.fillText(locked ? 'locked' : characterId, x + sideLength/2, y + sideLength + 4)\n\n    if(outlineColor !== undefined){\n        ctx.beginPath();\n        ctx.strokeStyle = outlineColor\n        ctx.lineWidth = outlineWidth\n        ctx.arc(x + sideLength/2, y + sideLength/2, sideLength/2, 0, Math.PI * 2, true);\n        ctx.stroke();\n    }\n}\n","import { createCharacterMenu } from \"./CharacterMenu\";\nimport { createGameText } from \"./GameText\";\n\n\nexport const loadCharacterMenu = () => ([\n    createGameText({\n        text: 'Select a Character',\n        baseline: 'top',\n        align: 'left'\n    }, '5%', '5%'),\n    createCharacterMenu()\n])","import { coalesceX, coalesceZ, GAME_HEIGHT_STUDS } from \"Dimensions\";\nimport { Character, createFloor, createOrderBoard, createScoreCounter, createTimer, createWall, isCuttingBoard } from \"Objects\";\nimport { GameObject, GameState } from \"State\";\nimport { canProvide, HasHitBox } from \"Traits\";\nimport { createBreadingTable, createBucket, createCharacter, createCuttingBoard, createFryer, createPickUpCounter, createTrashCan, createTrayStack } from \"Objects\";\n\n\nexport const wall = () => createWall()\n\nexport const fry1 = createFryer();\nexport const fry2 = createFryer();\nexport const fry3 = createFryer();\nexport const fry4 = createFryer();\nexport const bTb1 = createBreadingTable();\nexport const bTb2 = createBreadingTable();\nexport const sTb1 = createBreadingTable(true);\nexport const sTb2 = createBreadingTable(true);\nexport const cBrd = () => createCuttingBoard();\nexport const trsh = () => createTrashCan();\n\nexport const trSt = () => createTrayStack();\nexport const piUp = createPickUpCounter();\n\nexport const buns = () => createBucket('bun')\nexport const pikl = () => createBucket('pickles')\nexport const usaC = () => createBucket('american-cheese')\nexport const prJk = () => createBucket('pepper-jack-cheese')\nexport const ltce = () => createBucket('lettuce-head')\nexport const tmto = () => createBucket('tomato')\nexport const ptat = () => createBucket('potato')\nexport const chic = () => createBucket('raw-chicken-breast')\nexport const orng = () => createBucket('mandarin-oranges')\nexport const strb = () => createBucket('strawberries')\nexport const appl = () => createBucket('apple')\nexport const blbr = () => createBucket('blueberries')\n\nexport const cfaS = () => createBucket('cfa-sauce');\nexport const bbqS = () => createBucket('bbq-sauce');\nexport const bflo = () => createBucket('buffalo-sauce');\nexport const srir = () => createBucket('sriracha-sauce');\nexport const rnch = () => createBucket('ranch-sauce');\nexport const hnyM = () => createBucket('hny-mstrd-sauce');\nexport const poly = () => createBucket('poly-sauce');\n\n\n\n\n\n\nexport type Tile = GameObject & HasHitBox | (() => GameObject & HasHitBox) | null;\n\ntype C = Character | null\n\nexport function tileLevel(matrix: (c1: C, c2: C, c3: C, c4: C) => Tile[][], state: GameState): GameObject[]{\n    let objects: GameObject[] = [];\n\n    let z = coalesceZ(`${GAME_HEIGHT_STUDS - 2}studs`) as number;\n\n    let c1 = state.selectedCharacters[1] === null ? null : createCharacter(state.selectedCharacters[1], 1)\n    let c2 = state.selectedCharacters[2] === null ? null : createCharacter(state.selectedCharacters[2], 2)\n    let c3 = state.selectedCharacters[3] === null ? null : createCharacter(state.selectedCharacters[3], 3)\n    let c4 = state.selectedCharacters[4] === null ? null : createCharacter(state.selectedCharacters[4], 4)\n\n\n    for(let row of matrix(c1, c2, c3, c4)){\n        let x = 0;\n        for(let column of row){\n            if(column !== null){\n                let object = typeof column === 'function' ? column() : column;\n                if(!objects.includes(object)){\n                    if(isCuttingBoard(object) || canProvide(object)){\n                        let wall = createWall(x, z);\n                        objects.push(wall, object)\n                        objects = wall.handleDropped(object, objects, 1);\n                    } else {\n                        Object.assign(object.hitbox, {\n                            x, z\n                        })\n                        objects.push(object)\n                    }\n                }\n            }\n\n            x = x + coalesceX('2studs')\n        }\n        z = z - coalesceZ('2studs')\n    }\n\n    return objects;\n}","import { Level } from \"Levels\";\nimport { Character, createFloor, createOrderBoard, createScoreCounter, createTimer, FoodItemId, OrderTimeline, randomElement } from \"Objects\";\nimport type { GameObject, GameState } from \"State\";\nimport { bTb1, bTb2, buns, cBrd, chic, fry1, fry2, fry3, ltce, pikl, piUp, ptat, Tile, tileLevel, tmto, trsh, trSt, usaC, wall } from \"./utils\";\n\nconst map = (cha1: Tile, cha2: Tile, cha3: Tile, cha4: Tile) => ([\n    [wall, piUp, piUp, wall, fry3, fry3, cBrd, ptat, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, wall, fry1, fry1, null, fry2, fry2, null, null ],\n    [null, cha1, cha2, null, null, null, null, null, null, null, null, null, wall, null, null, null, null, null, null, null ],\n    [null, cha3, cha4, null, pikl, buns, wall, usaC, cBrd, ltce, tmto, trSt, wall, null, null, null, null, null, chic, null ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, wall, null, null, null, null, null, chic, null ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, trsh, null ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, bTb1, bTb1, null, bTb2, bTb2, null, null ],\n])\n\nexport const HowWillWeTopThis: Level = {\n    id: 2,\n    name: 'How Will We Top This?',\n    targetScores: [ 4, 7, 10 ],\n    tutorialEntries: ['deluxe-sandwich'],\n    getObjects(state: GameState){\n        return [\n            createFloor(),\n            createOrderBoard(orders, state),\n            createTimer(state.frameNumber, 180 * 1000 / (1000/25)),\n            createScoreCounter(),\n            ...tileLevel(map, state)\n        ]\n    }\n}\n\nconst getEntree = () => randomElement<FoodItemId>([ 'deluxe-sandwich', 'original-sandwich', 'original-sandwich-no-pickles', 'deluxe-sandwich-no-pickles'])\n\nconst getMeal = (): FoodItemId[] => [ getEntree(), 'waffle-fries' ]\n\nconst getEntreeOnly = (): FoodItemId[] => [ getEntree() ]\n\nconst orders : OrderTimeline = [\n    [0, () => ['original-sandwich']],\n    [5, () => ['deluxe-sandwich']],\n    [25, getMeal],\n    [15, getEntreeOnly],\n    [15, getMeal],\n    [20, getEntreeOnly],\n    [15, getMeal],\n    [20, getMeal],\n    [10, getMeal],\n    [20, getEntreeOnly],\n    [15, getMeal],\n    [20, getMeal],\n    [5, () => ['original-sandwich']],\n    [5, getEntreeOnly],\n    [15, getMeal],\n    [5, getMeal],\n    [5, getMeal]\n]","import { Level } from \"Levels\";\nimport { Character, createFloor, createOrderBoard, createScoreCounter, createTimer, FoodItemId, OrderTimeline, randomElement } from \"Objects\";\nimport { GameState } from \"State\";\nimport { appl, bbqS, bflo, blbr, bTb1, bTb2, buns, cBrd, cfaS, chic, fry1, fry2, fry3, hnyM, ltce, orng, pikl, piUp, poly, ptat, rnch, srir, strb, Tile, tileLevel, tmto, trsh, trSt, usaC, wall } from \"./utils\";\n\nconst map = (cha1: Tile, cha2: Tile, cha3: Tile, cha4: Tile) => ([\n    [fry1, fry1, fry2, fry2, fry3, fry3, bTb1, bTb1, bTb2, bTb2, cBrd, chic, buns, wall, wall, wall, wall, wall, piUp, piUp ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, cha1, cha2, null, null, null, null ],\n    [wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, trSt, wall, wall, null, cha3, cha4, null, null, null, bbqS ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, hnyM, null, null, bflo ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, poly, null, null, rnch ],\n    [wall, wall, wall, cBrd, ptat, strb, appl, blbr, orng, pikl, cBrd, null, null, null, null, null, cfaS, null, null, srir ],\n])\n\nexport const LetsGetSaucy : Level = {\n    id: 3,\n    name: 'Let\\'s Get Saucy',\n    targetScores: [ 5, 10, 15 ],\n    tutorialEntries: [ 'fried-nuggets', 'fruit-cup' ],\n    getObjects(state: GameState){\n        return [\n            createFloor(),\n            createOrderBoard(orders, state),\n            createTimer(state.frameNumber, 180 * 1000 / (1000/25)),\n            createScoreCounter(),\n            ...tileLevel(map, state)\n        ]\n    }\n}\n\nconst getSauce = () => randomElement<FoodItemId>(['cfa-sauce', 'bbq-sauce', 'poly-sauce', 'ranch-sauce', 'buffalo-sauce', 'sriracha-sauce', 'hny-mstrd-sauce'])\n\nconst getEntree = () => randomElement<FoodItemId>([ 'original-sandwich', 'fried-nuggets' ])\n\nconst getSide = () => randomElement<FoodItemId>([ 'waffle-fries', 'fruit-cup' ])\n\nconst getMeal = (): FoodItemId[] => [ getEntree(), getSide() ]\n\nconst getSideOnly = (): FoodItemId[] => [ getSide() ]\n\nconst getEntreeWSauce = (): FoodItemId[] => [ getEntree(), getSauce() ]\n\nconst getMealWSauce = (): FoodItemId[] => [ getEntree(), getSide(), getSauce() ]\n\nconst orders : OrderTimeline = [\n    [0, () => ['fried-nuggets', 'cfa-sauce']],\n    [5, () => ['fruit-cup']],\n    [25, getMealWSauce],\n    [15, getEntreeWSauce],\n    [15, getMeal],\n    [5, getSideOnly],\n    [15, getMealWSauce],\n    [15, getEntreeWSauce],\n    [15, getMeal],\n    [15, getEntreeWSauce],\n    [5, getSideOnly],\n    [5, getSideOnly],\n    [20, getMealWSauce],\n    [15, getEntreeWSauce],\n    [15, getMeal],\n    [20, getMealWSauce],\n    [5, () => ['fried-nuggets']],\n    [5, getEntreeWSauce],\n    [5, getMealWSauce]\n]","import { Level } from \"Levels\";\nimport { Character, createFloor, createOrderBoard, createScoreCounter, createTimer, FoodItemId, OrderTimeline, randomElement } from \"Objects\";\nimport { GameState } from \"State\";\nimport { appl, blbr, bTb1, bTb2, buns, cBrd, cfaS, chic, fry1, fry2, fry3, ltce, orng, pikl, piUp, ptat, strb, Tile, tileLevel, trsh, trSt, wall } from \"./utils\";\n\nconst map = (cha1: Tile, cha2: Tile, cha3: Tile, cha4: Tile) => ([\n    [wall, wall, wall, wall, wall, wall, wall, wall, piUp, piUp, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall],\n    [null, null, fry3, fry3, null, null, wall, null, null, null, null, wall, null, null, fry1, fry1, fry2, fry2, null, null ],\n    [null, cBrd, null, null, null, null, wall, null, cha1, cha2, null, wall, null, null, null, null, null, null, null, null ],\n    [null, ptat, null, null, null, null, wall, null, cha3, cha4, null, wall, null, null, null, null, null, null, chic, null ],\n    [null, null, null, null, null, null, trSt, null, null, null, null, trSt, null, null, null, null, null, null, chic, null ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, trsh, null ],\n    [null, null, pikl, buns, null, null, null, null, null, null, null, null, null, null, bTb1, bTb1, bTb2, bTb2, null, null ],\n])\n\nexport const TheOriginal : Level = {\n    id: 1,\n    name: 'The Original',\n    targetScores: [ 5, 10, 15 ],\n    tutorialEntries: [ 'original-sandwich', 'original-sandwich-no-pickles', 'waffle-fries' ],\n    getObjects(state: GameState){\n        return [\n            createFloor(),\n            createOrderBoard(orders, state),\n            createTimer(state.frameNumber, 180 * 1000 / (1000/25)),\n            createScoreCounter(),\n            ...tileLevel(map, state)\n        ]\n    }\n}\n\nfunction getEntree(): FoodItemId {\n    return randomElement([ 'original-sandwich', 'original-sandwich-no-pickles' ])\n}\n\nfunction getMeal(): FoodItemId[] {\n    return [ getEntree(), 'waffle-fries' ]\n}\n\nfunction getEntreeOnly(): FoodItemId[]{\n    return [ getEntree() ]\n}\n\nconst orders: OrderTimeline = [\n    [0, () => [ 'original-sandwich' ]],\n    [5, () => [ 'original-sandwich-no-pickles']],\n    [20, () => [ 'waffle-fries' ] ],\n    [20, getMeal],\n    [15, getEntreeOnly],\n    [15, getMeal],\n    [25, getMeal],\n    [0, getMeal],\n    [15, getEntreeOnly],\n    [0, getMeal],\n    [5, getEntreeOnly],\n    [5, getMeal],\n    [15, getMeal],\n    [0, getMeal],\n    [5, getEntreeOnly],\n    [5, getMeal],\n    [5, getEntreeOnly]\n]","import { Level } from \"Levels\";\nimport { Character, createFloor, createOrderBoard, createScoreCounter, createTimer, FoodItemId, OrderTimeline, randomElement } from \"Objects\";\nimport { GameState } from \"State\";\nimport { appl, bbqS, bflo, blbr, bTb1, bTb2, buns, cBrd, cfaS, chic, fry1, fry2, fry3, hnyM, ltce, orng, pikl, piUp, poly, prJk, ptat, rnch, srir, sTb1, sTb2, strb, Tile, tileLevel, tmto, trsh, trSt, usaC, wall } from \"./utils\";\n\n\n\nconst map = (cha1: Tile, cha2: Tile, cha3: Tile, cha4: Tile) => {\n    let numberOfPlayers = [ cha1, cha2, cha3, cha4].filter( x => x != null).length\n    const wlop = numberOfPlayers > 2 ? wall : null\n    return ([\n        [trsh, appl, strb, blbr, orng, buns, usaC, prJk, wall, wall, piUp, piUp, bTb1, bTb1, sTb1, sTb1, chic, cBrd, wall],\n        [null, null, null, null, null, null, cha1, cha2, null, null, null, null, null, null, null, null, null, null, null, null],\n        [null, null, null, null, null, null, cha3, cha4, null, null, null, null, null, null, null, null, null, null, null, null],\n        [cBrd, wall, cBrd, wall, wall, trSt, null, null, trSt, cfaS, hnyM, poly, null, null, bbqS, bflo, srir, rnch, null, null],\n        [null, null, null, null, null, null, null, null, null, trsh, fry1, fry1, wlop, wlop, fry2, fry2, fry3, fry3, null, null],\n        [null, null, null, null, null, null, null, null, null, wall, null, null, null, null, null, null, null, null, null, null],\n        [trsh, wall, ltce, tmto, pikl, ptat, null, null, null, wall, null, null, null, null, null, null, bTb1, bTb1, null, null],\n    ])\n}\n\nexport const TrulyAPleasure: Level = {\n    id: 5,\n    name: 'Truly A Pleasure',\n    targetScores: [4, 7, 10],\n    tutorialEntries: [],\n    getObjects(state: GameState) {\n        return [\n            createFloor(),\n            createOrderBoard(orders, state),\n            createTimer(state.frameNumber, 180 * 1000 / (1000 / 25)),\n            createScoreCounter(),\n            ...tileLevel(map, state)\n        ]\n    }\n}\n\nconst getEntree = () => randomElement<FoodItemId>([\n    'fried-nuggets',\n    'original-sandwich',\n    'original-sandwich-no-pickles',\n    'deluxe-sandwich',\n    'deluxe-sandwich-no-pickles',\n    'spicy-sandwich',\n    'spicy-sandwich-no-pickles',\n    'spicy-deluxe-sandwich',\n    'spicy-deluxe-sandwich-no-pickles'\n])\n\nconst getSide = () => randomElement<FoodItemId>([\n    'fruit-cup',\n    'waffle-fries'\n])\n\nconst getSauce = () => randomElement<FoodItemId>(['cfa-sauce', 'bbq-sauce', 'poly-sauce', 'ranch-sauce', 'buffalo-sauce', 'sriracha-sauce', 'hny-mstrd-sauce'])\n\nconst getEntreeWSauce = (): FoodItemId[] => [getEntree(), getSauce()]\n\nconst getMeal = (): FoodItemId[] => [getEntree(), getSide()]\n\nconst getEntreeOnly = (): FoodItemId[] => [getEntree()]\n\nconst getFryWSauce = (): FoodItemId[] => ['waffle-fries', getSauce()]\n\nconst orders: OrderTimeline = [\n    [0, getMeal],\n    [5, getEntreeWSauce],\n    [10, getFryWSauce],\n    [30, getMeal],\n    [25, getEntreeOnly],\n    [30, getMeal],\n    [30, getMeal],\n    [25, getEntreeOnly],\n    [30, getMeal],\n    [30, getMeal],\n    [25, getEntreeOnly],\n    [30, getMeal],\n]","import { Level } from \"Levels\";\nimport { Character, createFloor, createOrderBoard, createScoreCounter, createTimer, FoodItemId, OrderTimeline, randomElement } from \"Objects\";\nimport { GameObject, GameState } from \"State\";\nimport { bTb1, bTb2, buns, cBrd, chic, fry1, fry2, fry3, fry4, ltce, pikl, piUp, ptat, sTb1, Tile, tileLevel, tmto, trsh, trSt, usaC, wall } from \"./utils\";\n\nconst map = (cha1: Tile, cha2: Tile, cha3: Tile, cha4: Tile) => ([\n    [piUp, piUp, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null ],\n    [cha1, cha2, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null ],\n    [cha3, cha4, null, null, null, chic, ptat, null, null, bTb1, bTb1, null, null, null, sTb1, sTb1, null, null, wall, wall ],\n    [null, null, trSt, buns, pikl, fry1, fry1, wall, cBrd, fry2, fry2, wall, wall, cBrd, fry3, fry3, null, null, fry4, fry4 ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null ],\n])\n\nexport const TurnUpTheHeat: Level = {\n    id: 4,\n    name: 'Turn Up the Heat',\n    targetScores: [ 4, 7, 10 ],\n    tutorialEntries: [ 'spicy-sandwich' ],\n    getObjects(state: GameState){\n        return [\n            createFloor(),\n            createOrderBoard(orders, state),\n            createTimer(state.frameNumber, 180 * 1000 / (1000/25)),\n            createScoreCounter(),\n            ...tileLevel(map, state)\n        ]\n    }\n}\n\n\nconst getOGEntree = () => randomElement<FoodItemId>([ 'original-sandwich', 'original-sandwich-no-pickles', 'fried-nuggets'])\n\nconst getSpicyEntree = () => randomElement<FoodItemId>([ 'spicy-sandwich', 'spicy-sandwich-no-pickles'])\n\nconst getOGMeal = (): FoodItemId[] => [ getOGEntree(), 'waffle-fries' ]\n\nconst getSpicyMeal = (): FoodItemId[] => [ getSpicyEntree(), 'waffle-fries' ]\n\n\nconst orders : OrderTimeline = [\n    [0, () => ['spicy-sandwich']],\n    [5, () => ['waffle-fries']],\n    [25, getOGMeal],\n    [25, getSpicyMeal],\n    [15, getOGMeal],\n    [20, getSpicyMeal],\n    [25, getOGMeal],\n    [20, getSpicyMeal],\n    [25, getOGMeal],\n    [25, getSpicyMeal],\n    [20, getOGMeal],\n    [25, getSpicyMeal],\n    [20, getOGMeal],\n    [25, getSpicyMeal],\n    [20, getOGMeal],\n    [25, getSpicyMeal],\n    [25, getOGMeal],\n    [25, getSpicyMeal],\n]","import { FoodItemId } from \"Objects\";\nimport type { GameObject, GameState } from \"State\";\nimport { HowWillWeTopThis } from \"./HowWillWeTopThis\";\nimport { LetsGetSaucy } from \"./LetsGetSaucy\";\nimport { TheOriginal } from \"./TheOriginal\";\nimport { TrulyAPleasure } from \"./TrulyAPleasure\";\nimport { TurnUpTheHeat } from \"./TurnUpTheHeat\";\n\nexport type Level = {\n    id: number;\n    name: string;\n    targetScores: [ number, number, number ];\n    getObjects(state: GameState): GameObject[];\n    tutorialEntries: FoodItemId[]\n}\n\nexport const Levels: Level[] = [\n    TheOriginal,\n    HowWillWeTopThis,\n    LetsGetSaucy,\n    TurnUpTheHeat,\n    TrulyAPleasure\n]\n\nexport function isLevelUnlocked(state: GameState, levelId: number){\n    if(state.devMode) return true;\n    let levelIndex = Levels.findIndex( level => level.id === levelId);\n    let formerLevel = Levels[levelIndex-1];\n    if(!formerLevel) return true;\n    return Boolean(state.highScores[formerLevel.id]);\n}\n","import { Dimension } from \"Dimensions\";\nimport { isLevelUnlocked, Levels } from \"Levels\";\nimport { createStarDisplay } from \"Objects\";\nimport { GameState } from \"State\";\nimport { HasBoundingbox } from \"Traits\";\nimport { createButton } from \"./Button\";\nimport { createGameText } from \"./GameText\";\nimport { loadCharacterMenu } from \"./loadCharacterMenu\";\n\nfunction spaceEvenly(x: Dimension, y: Dimension, width: Dimension, height: Dimension, objects: HasBoundingbox[]) {\n    return\n}\n\nexport const loadLevelMenu = (state: GameState) => ([\n    createGameText({\n        text: 'Select a Level',\n        baseline: 'top',\n        align: 'left'\n    }, '5%', '5%'),\n    ...Levels.map((level, index) => (\n        createButton({text: `${index+1}. ${isLevelUnlocked(state, level.id) ? level.name : 'Locked'}`, align: 'right'}, index === 0, '50%', 12 * (index + 2) + '%', (state): GameState => (\n            isLevelUnlocked(state, level.id)\n                ? {\n                    ...state,\n                    selectedLevel: level,\n                    selectedCharacters: { 1: null, 2: null, 3: null, 4: null },\n                    objects: loadCharacterMenu()\n                }\n                : state\n        ))\n    )),\n    ...Levels.map((level, index) => (\n        createStarDisplay(state.highScores[level.id] || 0, '10%', '57%',  12 * (index + 2) - 0.2 + '%')\n    ))\n])","import { coalesceX, coalesceY, Dimension } from \"Dimensions\";\nimport {  create2DRenderer } from \"Renderer\";\nimport { GameObject, GameState } from \"State\";\nimport {  createWithBoundingbox, createWithId, HasBoundingbox, HasId, HasOverlay, HasRenderer, Renderer } from \"Traits\";\n\ntype Overlay = HasId & HasBoundingbox & HasOverlay & HasRenderer & {\n    color: string\n};\n\nexport const createOverlay = (color: string = 'rgba(0, 0, 0, 0.75)'): Overlay => ({\n    ...createWithId(),\n    ...createWithBoundingbox('100%', '100%', 0, 0),\n    hasOverlay: true,\n    render,\n    color\n})\n\nconst render = function(_1: GameState, { boundingbox, color  }: Overlay, ctx: CanvasRenderingContext2D){\n    const { x, y, width, height } = boundingbox\n    ctx.fillStyle = color;\n    ctx.fillRect(x, y, width, height)\n} as Renderer;","import { Controls } from \"Controls\";\nimport { coalesceX, coalesceY, Dimension } from \"Dimensions\";\nimport { Level, Levels } from \"Levels\";\nimport { calculateFinalScore, createScoreCounter, createStarDisplay } from \"Objects\";\nimport { GameObject, GameState } from \"State\";\nimport { HasBoundingbox } from \"Traits\";\nimport { createButton } from \"./Button\";\nimport { loadLevelMenu } from \"./loadLevelMenu\";\nimport { createOverlay } from \"./Overlay\";\n\n\nexport const loadFinishedLevelMenu = (state: GameState) => {\n\n    const finalScore = calculateFinalScore(state);\n\n    let stars: 0 | 1 | 2 | 3 = 0;\n\n    const level = state.selectedLevel as Level;\n\n    if(finalScore >= level.targetScores[0]){\n        stars = 1\n    }\n\n    if(finalScore >= level.targetScores[1]){\n        stars = 2\n    }\n\n    if(finalScore >= level.targetScores[2]){\n        stars = 3\n    }\n\n    const formerHighScore = state.highScores[level.id] || 0;\n    const postLevelState : GameState = {\n        ...state,\n        isPaused: false,\n        canPause: false,\n        selectedLevel: null,\n        highScores: {\n            ...state.highScores,\n            [level.id]: Math.max(formerHighScore, stars) as 0 | 1 | 2 | 3\n        }\n    }\n\n    const objects = [\n        createOverlay(),\n        createScoreCounter('3.5studs', '50%', '25%'),\n        createStarDisplay(stars, '20%', '50%', '45%', Date.now(), level.targetScores.map( score => score.toString())),\n        createButton({ text: 'Return to Menu', color: 'white' }, true, '50%', '60%', handleReturnToLevelMenu)\n    ]\n\n\n\n    function handleReturnToLevelMenu(): GameState{\n\n        return {\n            ...postLevelState,\n            objects: loadLevelMenu(postLevelState)\n        }\n    }\n\n    return objects;\n}\n","import { Controls } from \"Controls\";\nimport { Dimension } from \"Dimensions\";\nimport { Levels } from \"Levels\";\nimport { GameObject, GameState } from \"State\";\nimport { HasBoundingbox } from \"Traits\";\nimport { createButton } from \"./Button\";\nimport { loadFinishedLevelMenu } from \"./loadFinishedLevelMenu\";\nimport { createOverlay } from \"./Overlay\";\n\n\nexport const loadPausedLevelMenu = () => {\n\n    const objects = [\n        createOverlay(),\n        createButton({ text: 'Continue', color: 'white' }, true, '50%', '40%', handleContinue),\n        createButton({ text: 'Quit', color: 'white' }, false, '50%', '50%', handleQuit)\n    ]\n\n    function handleContinue(state: GameState): GameState {\n        return {\n            ...state,\n            isPaused: false,\n            objects: state.objects.filter( object => !menuObjectIds.includes(object.id))\n        }\n    }\n\n    function handleQuit(state: GameState): GameState {\n        return {\n            ...state,\n            objects: [\n                ...state.objects.filter( object => !menuObjectIds.includes(object.id)),\n                ...loadFinishedLevelMenu(state)\n            ]\n        }\n    }\n\n    const menuObjectIds = objects.map( object => object.id )\n\n    return objects;\n}\n\nexport function pauseMenuReducer(_: GameObject, state: GameState){\n    if(!state.canPause) return state;\n\n    for(let controller of Controls){\n        if(controller.justPressed('minus') && !state.isPaused){\n            return {\n                ...state,\n                isPaused: true,\n                objects: [\n                    ...state.objects,\n                    ...loadPausedLevelMenu()\n                ]\n            }\n        }\n    }\n\n    return state\n}","\n\nexport const Persistence = {\n\n    load(key: string, fallback: any): any{\n        try {\n            let encoded = localStorage.getItem(key);\n            return encoded !== null ? JSON.parse(encoded) : fallback;\n        } catch(err) {\n            return fallback\n        }\n    },\n\n    save(key: string, data: any){\n        localStorage.setItem(key, JSON.stringify(data))\n    }\n}","import { createCFALogo, createGameText, createLegoLogo, loadLevelMenu } from \"Menus\";\nimport { loadPausedLevelMenu } from \"Menus\";\nimport { GameState } from \"./GameState\";\nimport { Persistence } from \"./persistence\";\n\nexport const initialState: GameState = {\n    frameNumber: 0,\n    isStarted: false,\n    isPaused: false,\n    canPause: false,\n\n    selectedLevel: null,\n    selectedCharacters: {\n        1: null,\n        2: null,\n        3: null,\n        4: null\n    },\n\n    objects: [\n        createLegoLogo('20%', 0, '15%', '15%'),\n        createCFALogo('50%', 0, '37%', '15%'),\n        createGameText('Press Start', '50%', '70%', true)\n    ],\n\n    highScores: Persistence.load('highScores', {}),\n\n    devMode: Persistence.load('devMode', false)\n}\n","import { coalesceX, coalesceY, Dimension } from \"Dimensions\";\nimport {  create2DRenderer } from \"Renderer\";\nimport {  createWithBoundingbox, createWithId, HasBoundingbox, HasId, HasRenderer } from \"Traits\";\n\ntype LegoLogo = HasId & HasBoundingbox & HasRenderer;\n\nexport const createLegoLogo = (width: Dimension = 0, height: Dimension = 0, x: Dimension = 0, y: Dimension = 0): LegoLogo => ({\n    ...createWithId(),\n    ...createWithBoundingbox(width, height, x, y),\n   render: create2DRenderer({ sprite: 'lego-logo', fade: { \n    startAt: 1, duration: 2000\n   } })\n})","import { coalesceX, coalesceY, Dimension } from \"Dimensions\";\nimport {  create2DRenderer } from \"Renderer\";\nimport {  createWithBoundingbox, createWithId, HasBoundingbox, HasId, HasRenderer } from \"Traits\";\n\ntype CFALogo = HasId & HasBoundingbox & HasRenderer;\n\nexport const createCFALogo = (width: Dimension = 0, height: Dimension = 0, x: Dimension = 0, y: Dimension = 0): CFALogo => ({\n    ...createWithId(),\n    ...createWithBoundingbox(width, height, x, y),\n   render: create2DRenderer({ sprite: 'cfa-logo', fade: {\n    startAt: 1, duration: 2000\n   }})\n})","import { Controls } from \"Controls\";\nimport { coalesceX, coalesceY, Dimension, WIDTH } from \"Dimensions\";\nimport { Levels } from \"Levels\";\nimport { breadYield, chopYield, FoodItemId, fryYield, Recipe, recipes, spicyBreadYield } from \"Objects\";\nimport { create2DRenderer } from \"Renderer\";\nimport { GameObject, GameState } from \"State\";\nimport { createWithBoundingbox, createWithId, HasBoundingbox, HasId, HasOverlay, HasRenderer } from \"Traits\";\nimport { createButton } from \"./Button\";\nimport { createGameText } from \"./GameText\";\nimport { loadFinishedLevelMenu } from \"./loadFinishedLevelMenu\";\nimport { createOverlay } from \"./Overlay\";\n\n\nexport const loadTutorialScreen = (state: GameState) => {\n    let foodItems = state.selectedLevel?.tutorialEntries as FoodItemId[];\n\n    const objects = [\n        createOverlay('rgba(255, 255, 255, 0.75)'),\n        createGameText({\n            text: 'Help',\n            color: '#e60e33',\n            baseline: 'top',\n            align: 'left'\n        }, '5%', '5%'),\n\n        ...loadTutorial(foodItems),\n\n        createButton({ text: 'Close', color: '#e60e33', baseline: 'top', align: 'right' }, true, WIDTH - coalesceX('5%'), '5%', handleContinue),\n    ]\n\n    function handleContinue(state: GameState): GameState {\n        return {\n            ...state,\n            isPaused: false,\n            objects: state.objects.filter(object => !tutorialScreenObjectIds.includes(object.id))\n        }\n    }\n\n    const tutorialScreenObjectIds = objects.map(object => object.id)\n\n    return objects;\n}\n\nexport function tutorialScreenReducer(_: GameObject, state: GameState) {\n    if (!state.canPause) return state;\n\n    for (let controller of Controls) {\n        if (controller.justPressed('tertiaryAction') && !state.isPaused) {\n            return {\n                ...state,\n                isPaused: true,\n                objects: [\n                    ...state.objects,\n                    ...loadTutorialScreen(state)\n                ]\n            }\n        }\n    }\n\n    return state\n}\n\n\n\nfunction loadTutorial(foodItemIds: FoodItemId[]): GameObject[] {\n    let s = createTutorialSprite;\n    const tutorial: GameObject[] = [];\n\n    let y: number = coalesceY('12%')\n\n    for (let foodItemId of foodItemIds) {\n        let recipe = recipes.find(recipe => recipe.name === foodItemId) as Recipe;\n        if (recipe) {\n            tutorial.push(\n                ...loadRecipe(foodItemId, recipe.ingredientList, y)\n            )\n            for(let ingredientId of recipe.ingredientList){\n                if(canBeCreated(ingredientId)){\n                    y += coalesceY('15%')\n                    tutorial.push(...loadIngredientCreationProcess(ingredientId, y, 12))\n                }\n            }\n        } else if (canBeCreated(foodItemId)) {\n            tutorial.push(\n                s('6%', y, `food-items/${foodItemId}`),\n                s('12%', y, 'equals'),\n                ...loadIngredientCreationProcess(foodItemId, y, 18)\n            )\n        }\n\n        y += coalesceY('15%')\n    }\n\n    return tutorial;\n}\n\nfunction loadRecipe(recipeName: FoodItemId, ingredientList: FoodItemId[], y: Dimension): GameObject[] {\n    let s = createTutorialSprite;\n    return [\n        s('6%', y, `food-items/${recipeName}`),\n        s('12%', y, 'equals'),\n        ...join(ingredientList.map((foodItemId, index) => (\n            s(18 + (6 * (index * 2)) + '%', y, `food-items/${foodItemId}`)\n        )), i => s(18 + (6 * (i * 2 - 1)) + '%', y, 'plus'))\n    ]\n}\n\nfunction loadIngredientCreationProcess(foodItem: FoodItemId, y: Dimension, indentation: number = 0): GameObject[] {\n    let s = createTutorialSprite;\n\n    const steps : string[] = [];\n\n    steps.unshift(`food-items/${foodItem}`)\n\n    while(canBeCreated(foodItem)){\n\n        let record: Partial<Record<FoodItemId, FoodItemId>>, sprite: string;\n\n        if(itemsThatComeFromChopping.includes(foodItem)){\n            record = chopYield\n            sprite = 'cutting-board'\n        } else if(itemsThatComeFromFrying.includes(foodItem)){\n            record = fryYield\n            sprite = 'fryer/off'\n        } else if(itemsThatComeFromBreading.includes(foodItem)){\n            record = breadYield\n            sprite = 'breading-table'\n        } else if(itemsThatComeFromSpicyBreading.includes(foodItem)){\n            record = spicyBreadYield\n            sprite = 'spicy-breading-table'\n        }  else {\n            throw Error(`Couldnt figure out how ${foodItem} got created`)\n        }\n\n        steps.unshift(sprite);\n        foodItem = reverseLookup(record, foodItem);\n        steps.unshift(`food-items/${foodItem}`);\n    }\n\n    const result = steps.map( (step,i) => s(indentation + (i*2)*6 + '%', y, step))\n\n    return join(result, i => s(indentation + (i*2-1)*6 + '%', y, 'arrow'));\n}\n\nfunction join(array: GameObject[], callback: (i: number) => GameObject): GameObject[] {\n    const result: GameObject[] = []\n    for (let i = 0; i < array.length; i++) {\n        if (i !== 0) result.push(callback(i));\n        result.push(array[i]);\n    }\n    return result\n}\n\nconst itemsThatComeFromChopping = Object.values(chopYield)\nconst itemsThatComeFromFrying = Object.values(fryYield)\nconst itemsThatComeFromBreading = Object.values(breadYield)\nconst itemsThatComeFromSpicyBreading = Object.values(spicyBreadYield)\n\nfunction canBeCreated(foodItemId: FoodItemId) {\n    return (\n        itemsThatComeFromChopping.includes(foodItemId)\n        || itemsThatComeFromFrying.includes(foodItemId)\n        || itemsThatComeFromBreading.includes(foodItemId)\n        || itemsThatComeFromSpicyBreading.includes(foodItemId)\n    )\n}\n\nfunction reverseLookup(record: Partial<Record<FoodItemId, FoodItemId>>, foodItemId: FoodItemId): FoodItemId {\n    for(let strKey in record){\n        const key = strKey as FoodItemId\n        if(record[key] === foodItemId){\n            return key;\n        }\n    }\n    throw Error(\"Invalid Reverse Lookup\")\n}\n\nexport type TutorialSprite = HasId & HasRenderer & HasBoundingbox & HasOverlay;\n\nexport const createTutorialSprite = (x: Dimension, y: Dimension, sprite: string): TutorialSprite => ({\n    ...createWithId(),\n    ...createWithBoundingbox('5%', '5%', x, y),\n    render: create2DRenderer(sprite),\n    hasOverlay: true\n})","import { canBeCarriedReducer, canBeControlledReducer, canBreadReducer, canCarryReducer, canChopReducer } from \"Traits\";\nimport { GameState } from \"./GameState\";\nimport { GameObject } from \"./GameObject\";\nimport { fryerReducer, orderBoardReducer, pickUpCounterReducer, timerReducer } from \"Objects\";\nimport { buttonReducer, loadLevelMenu, pauseMenuReducer } from \"Menus\";\nimport { Controls } from \"Controls\";\nimport { characterMenuReducer } from \"Menus/CharacterMenu\";\nimport { Persistence } from \"./persistence\";\nimport { AssetManager } from \"Renderer\";\nimport { tutorialScreenReducer } from \"Menus/loadTutorialScreen\";\n\nconst allReducers = [\n    canBeControlledReducer,\n    canCarryReducer,\n    canChopReducer,\n    canBeCarriedReducer,\n    fryerReducer,\n    canBreadReducer,\n    orderBoardReducer,\n    timerReducer,\n\n    buttonReducer,\n\n    startButtonReducer,\n    pauseMenuReducer,\n    tutorialScreenReducer,\n    characterMenuReducer,\n    pickUpCounterReducer\n];\n\nexport function gameReducer(state: GameState){\n    AssetManager.clearAudio();\n\n    state = state.objects.reduce(objectReducer, {\n        ...state,\n        frameNumber: state.isPaused ? state.frameNumber : state.frameNumber + 1\n    });\n\n    Persistence.save('highScores', state.highScores);\n\n    return state;\n}\n\nexport function objectReducer(state: GameState, { id }: GameObject): GameState{\n    return allReducers.reduce( (state, reducer) => {\n        const object = state.objects.find( object => object.id === id);\n        if(object) return reducer(object, state)\n        return state\n    }, state);\n}\n\n\nfunction startButtonReducer(object: GameObject, state: GameState){\n    if(state.canPause) return state\n\n    for(let controller of Controls){\n        if(controller.justPressed('start') && state.selectedLevel === null){\n            return {\n                ...state,\n                isStarted: true,\n                objects: loadLevelMenu(state)\n            }\n        }\n\n        const atLeastOneCharacterSelected = Object.values(state.selectedCharacters).some( selection => selection !== null)\n\n        if(controller.justPressed('start') && state.selectedLevel !== null && atLeastOneCharacterSelected){\n            return {\n                ...state,\n                canPause: true,\n                objects: state.selectedLevel.getObjects(state)\n            }\n        }\n    }\n\n    return state\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","import { GameState, initialState, gameReducer } from 'State';\nimport { createGameRenderer } from 'Renderer';\nimport { Controls, recordInputs } from 'Controls';\nimport { Persistence } from 'State/persistence';\n\nexport const MS_PER_FRAME = 1000 / 25;\n\nexport function startGame(){\n    let state: GameState = initialState\n\n    const canvas = document.createElement('canvas');\n\n    const renderFrame = createGameRenderer(canvas);\n\n    const history: GameState[] = [];\n\n    function runFrame(){\n        // Save Current State\n        // history.push(state);\n\n        // Run Reducers\n        state = gameReducer(state);\n\n        // Save that the current input states have been addressed\n        recordInputs();\n\n        // Render\n        renderFrame(state)\n    }\n\n    const interval = setInterval(runFrame, MS_PER_FRAME);\n\n    function clearData(){\n        clearInterval(interval);\n        localStorage.clear();\n        window.location.reload();\n    }\n\n    function startDevMode(){\n        Persistence.save('devMode', true);\n        window.location.reload();\n    }\n\n    function stopDevMode(){\n        Persistence.save('devMode', false);\n        window.location.reload();\n    }\n\n    const game = {\n        history,\n        canvas,\n        clearData,\n        startDevMode,\n        stopDevMode\n    }\n\n    return game;\n}\n","import { startGame } from \"./startGame\";\n\nconst Root = document.getElementById('root') as HTMLElement;\ndocument.body.style.margin = '0px';\ndocument.body.style.overflow = 'hidden';\n\nconst game = startGame();\n\nRoot.append(game.canvas)\n\n\n// @ts-ignore\nwindow.game = game"],"names":["updateGameObjectById","objects","target","map","object","id","removeGameObjectById","filter","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_arrayLikeToArray","arr","len","arr2","Array","_iterableToArray","iter","Symbol","iterator","from","_unsupportedIterableToArray","o","minLen","n","prototype","toString","call","slice","constructor","name","test","_toConsumableArray","isArray","TypeError","WIDTH","window","innerWidth","HEIGHT","innerHeight","GAME_WIDTH_STUDS","font","small","medium","large","coalesceX","a","endsWith","parsePercent","parseFloat","Error","coalesceZ","coalesceY","containerSize","toStuds","createVector","speed","direction","north","x","z","south","east","west","createVectors","_arrayWithHoles","_nonIterableRest","_slicedToArray","_i","_s","_e","_arr","_n","_d","next","done","err","hasHitbox","hitbox","createWithHitbox","dx","dz","y","getOverlappingObjects","b","createCanFaceADirection","facing","getObjectsInfrontOf","getAreaInfrontOf","offset","offsets","padding","canHandleDrop","this","counterSpaceTakenBy","handleDropped","droppedObject","canBeCarried","Boolean","canBePickedUp","carriedBy","createCanBeCarried","handlePickedUpBy","canBeDropped","handleDrop","carrier","update","updateGameObjectsWhere","positionInfrontOfCarrier","undefined","hasCounterSpace","counterSpaceContains","space","find","frameNumber","somethingToDropOn","_typeof","_regeneratorRuntime","exports","Op","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","Promise","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","_defineProperties","props","descriptor","Controller","instance","Constructor","down","up","left","right","primaryAction","secondaryAction","tertiaryAction","start","bumper","minus","lastInput","protoProps","staticProps","control","gamepadInput","gamepadIndex","gamepad","navigator","getGamepads","axes","buttons","pressed","getGamePadInput","assign","Controls","recordInputs","recordInput","keyboardMap","addEventListener","e","preventDefault","repeat","controllerId","createCharacter","characterId","createWithId","createCanBeControlled","createCanCarry","createCanChop","createCanBread","render","create3DRenderer","sprite","getSprite","character","animationState","breading","chopping","moving","carrying","characterLocks","isCharacterUnlocked","devMode","scores","highScores","reduce","total","score","getAverageStars","createWall","createCanBlockMovement","floorWidth","floorHeight","createFloor","_","ctx","fillStyle","fillRect","strokeStyle","cursorX","beginPath","moveTo","lineTo","stroke","cursorY","createFoodItem","foodItemId","foodItem","isFoodItem","recipes","recipeIndex","ingredientList","recipe","sort","createRecipes","_createForOfIteratorHelper","allowArrayLike","it","F","s","f","normalCompletion","didErr","step","_e2","isTray","droppedFoodItem","formerQuantity","contents","consolidateFoodItems","foodItems","results","remainingIngredients","expanded","itemName","quantity","ingredientName","expand","haveEverything","every","ingredient","remaining","isCuttingBoard","choppableIds","includes","content","cuttingBoard","progress","canChop","chop","chopper","newProgress","newFoodItem","chopYield","fryableIds","spicyFryableIds","createFryer","isSpicy","isFryer","finishedAt","onFire","combineRenderers","getSpeed","createProgressRenderer","fryer","createSpicyIconRenderer","retrieve","MS_PER_FRAME","secondsElapased","isFinishedFryer","isSpicyFryable","fryYield","breadableIDs","spicyBreadableIDs","isBreadingTable","createBreadingTable","lastInUse","createContentRenderer","breadingTable","getFlour","canBread","bread","isSpicyBreadable","spicyBreadYield","breadYield","loadedImages","loadedAudioTracks","aliasedAudioTracks","AssetManager","getImage","path","Image","src","loadImage","image","getAudio","Audio","loadAudio","audio","loadAliasedAudio","alias","loop","play","volume","currentlyPlaying","clearAudio","pause","currentTime","Animations","animations","loadAssets","all","assetPath","animation","numberOfFrames","fill","frameIndex","sideview","renderFoodItemsInArea","area","foodItemAnimation","width","Math","min","max","scale","size","height","leftPadding","topPadding","drawImage","isOrderBoard","numberOfPlayers","selectedCharacters","firstDeadlines","Infinity","secondDeadlines","createOrderBoard","upcomingOrders","createHasOverlay","orders","fullfilled","timestampForNextOrder","firstDeadline","secondDeadline","sideLength","board","roundRect","index","order","framesElapsed","placedAt","lineWidth","randomElement","array","floor","random","guests","tray","orderBoard","splice","fullfilledAt","pickupCounter","lastFullfillment","currentGuest","defaultWidth","createScoreCounter","createWithBoundingbox","isScoreCounter","counter","boundingbox","finalScore","calculateFinalScore","textBaseline","textAlign","strokeText","fillText","timeToDeliveryGreaterThan","deadline","timeToDeliveryLessThan","ordersToScore","doubleScoringItems","some","item","createBucket","createCanProvide","createTrayStack","createTray","createTimer","startedAt","duration","isTimer","timer","elapsed","totalSeconds","round","minutes","seconds","time","padStart","createStarDisplay","fadeInFrom","labels","hasOverlay","starDisplay","alpha1","alpha2","alpha3","startAt","Date","now","color1","color2","color3","renderStar","color","label","outerRadius","innerRadius","rot","PI","cx","cy","cos","sin","closePath","canBlockMovement","startedDashAt","canBeControlled","canCarry","canProvide","provide","idSerial","createWithOrigin","origin","callback1","callback2","callback3","callback4","createGameRenderer","canvas","style","getContext","clearRect","save","restore","renderers","renderer","create2DRenderer","options","spriteKey","fade","process2DRendererOptions","numberOfSyntheticFrames","ceil","ratio","currentSyntheticAnimationFrame","currentAnimationFrame","finalFrame","globalAlpha","process3DRendererOptions","getSpriteCoords","contentOption","processContentRendererOptions","objectAnimation","objectX","objectY","objectWidth","createTextRenderer","renderText","text","align","baseline","processTextRendererOptions","currentIteration","elapsedThisIteration","createButtonRenderer","button","processButtonRendererOptions","measureText","fontBoundingBoxDescent","actualBoundingBoxLeft","isSelected","setLineDash","createGameText","blink","lastSelectionChange","isButton","createButton","callback","createdAt","characterMatrix","controllerColors","menu","menuWidth","maxCharacterPerRow","row","topMargin","leftMargin","selection","yIndex","xIndex","entries","selectedCharacterId","Number","outlineColor","outlineWidth","locked","arc","clip","renderCharacterIcon","wall","fry1","fry2","fry3","fry4","bTb1","bTb2","sTb1","cBrd","trsh","trSt","piUp","isPickupCounter","c","buns","pikl","usaC","prJk","ltce","tmto","ptat","chic","orng","strb","appl","blbr","cfaS","bbqS","bflo","srir","rnch","hnyM","poly","tileLevel","matrix","GAME_HEIGHT_STUDS","column","cha1","cha2","cha3","cha4","HowWillWeTopThis","targetScores","tutorialEntries","getObjects","getEntree","getMeal","getEntreeOnly","LetsGetSaucy","getSauce","getSide","getSideOnly","getEntreeWSauce","getMealWSauce","TheOriginal","wlop","TrulyAPleasure","TurnUpTheHeat","getOGMeal","getSpicyMeal","Levels","isLevelUnlocked","levelId","levelIndex","findIndex","level","formerLevel","loadLevelMenu","selectedLevel","isCharacterMenu","createOverlay","_1","loadFinishedLevelMenu","stars","formerHighScore","postLevelState","isPaused","canPause","loadPausedLevelMenu","menuObjectIds","Persistence","fallback","encoded","localStorage","getItem","JSON","parse","data","setItem","stringify","initialState","isStarted","createLegoLogo","createCFALogo","loadTutorialScreen","foodItemIds","createTutorialSprite","tutorial","recipeName","join","loadRecipe","ingredientId","canBeCreated","loadIngredientCreationProcess","loadTutorial","tutorialScreenObjectIds","indentation","steps","unshift","itemsThatComeFromChopping","itemsThatComeFromFrying","itemsThatComeFromBreading","itemsThatComeFromSpicyBreading","reverseLookup","strKey","allReducers","controller","isPressed","justPressed","movedObject","vector","moveObject","hasCollision","outsidePlayArea","justReleased","whatsBeingCarried","targets","objectToPickUp","provider","finishedFryer","provided","track","fryingSounds","fireSounds","beeping1","beeping2","beeping3","breader","getOrder","justChangedSelection","currentButton","nextIndex","nextButton","atLeastOneCharacterSelected","newCharacterId","selectedCharacterIds","rowIndex","columnIndex","axis","currentCharacterIdForPlayer","indexOf","formerRowIndex","formerColumnIndex","playersSelectedCharacter","objectReducer","reducer","Root","document","getElementById","body","margin","overflow","game","createElement","renderFrame","interval","setInterval","gameReducer","history","clearData","clearInterval","clear","location","reload","startDevMode","stopDevMode","startGame","append"],"sourceRoot":""}