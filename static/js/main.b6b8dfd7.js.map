{"version":3,"file":"static/js/main.b6b8dfd7.js","mappings":"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","sources":["State/utils.ts","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","Dimensions.ts","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","Traits/HasHitbox.ts","Traits/CanFaceADirection.ts","Traits/CanHandleDrop.ts","Traits/HasCounterSpace.ts","Traits/CanBeCarried.ts","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","Controls/index.ts","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","Objects/Character.ts","Objects/Wall.ts","Objects/Floor.ts","Objects/FoodItem.ts","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","Objects/Tray.ts","Objects/CuttingBoard.ts","Objects/Fryer.ts","Objects/BreadingTable.ts","Objects/TrashCan.ts","Renderer/Animations.ts","Renderer/AssetManager.ts","Renderer/renderFoodItemsInArea.ts","Objects/OrderBoard.ts","Objects/PickUpCounter.ts","Objects/ScoreCounter.ts","Objects/Bucket.ts","Objects/TrayStack.ts","Objects/Timer.ts","Objects/StarDisplay.ts","Traits/CanBlockMovement.ts","Traits/CanBeControlled.ts","Traits/CanCarry.ts","Traits/CanChop.ts","Traits/CanProivde.ts","Traits/HasId.ts","Traits/HasOverlay.ts","Traits/CanBread.ts","Traits/HasBoundingbox.ts","Traits/HasOrigin.ts","Traits/index.ts","Renderer/createGameRenderer.ts","Traits/HasRenderer.ts","Renderer/combineRenderers.ts","Renderer/create2DRenderer.ts","Renderer/create3DRenderer.ts","Renderer/createContentsRenderer.ts","Renderer/createProgressRenderer.ts","Renderer/createTextRenderer.ts","Renderer/createButtonRenderer.ts","Renderer/createSpicyIconRenderer.ts","Menus/GameText.ts","Menus/Button.ts","Menus/CharacterMenu.ts","Menus/loadCharacterMenu.ts","Levels/utils.ts","Levels/HowWillWeTopThis.ts","Levels/LetsGetSaucy.ts","Levels/TheOriginal.ts","Levels/TrulyAPleasure.ts","Levels/TurnUpTheHeat.ts","Levels/index.ts","Menus/loadLevelMenu.ts","Menus/Overlay.ts","Menus/loadFinishedLevelMenu.ts","Menus/loadPausedLevelMenu.ts","State/persistence.ts","State/initialState.ts","Menus/LegoLogo.ts","Menus/CFALogo.ts","Menus/loadTutorialScreen.ts","State/gameReducer.ts","../node_modules/@babel/runtime/helpers/esm/toArray.js","startGame.ts","index.tsx"],"sourcesContent":["import { GameObject } from \"./GameObject\";\n\n\nexport function updateGameObjectById(objects: GameObject[], target: GameObject){\n    return objects.map( object => object.id === target.id ? target : object );\n}\n\nexport function updateGameObjectsWhere(objects: GameObject[], filter: (object: GameObject) => boolean, update: <T extends GameObject>(object: T) => GameObject) : GameObject[]{\n    return objects.map( object => filter(object) ? update(object) : object)\n}\n\nexport function removeGameObjectById(objects: GameObject[], target: GameObject){\n    return objects.filter( object => object.id !== target.id)\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export const WIDTH = window.innerWidth\nexport const HEIGHT = window.innerHeight\n\nexport const GAME_WIDTH_STUDS = 40;\nexport const GAME_HEIGHT_STUDS = 14;\n\nexport type Dimension = string | number;\n\nexport type Pixels = number & {\n    __pixels__: true;\n}\n\n// @ts-ignore\nwindow.toStuds = function(a: number){\n    return a / (WIDTH / GAME_WIDTH_STUDS)\n}\n\nexport function coalesceX(a: Dimension): Pixels {\n    if (typeof a === 'number') return a as Pixels;\n    if(a.endsWith('%')) return parsePercent(a, WIDTH);\n    if (a.endsWith('studs')) return parseFloat(a) * (WIDTH / GAME_WIDTH_STUDS) as Pixels;\n    throw Error(`Cannot Coalesce \"${a}\"`)\n}\n\nexport function coalesceZ(a: Dimension): Pixels {\n    if (typeof a === 'number') return a as Pixels;\n    if(a.endsWith('%')) throw Error('Does a % measurement in the z axis make sense?')\n    if (a.endsWith('studs')) return parseFloat(a) * (WIDTH / GAME_WIDTH_STUDS) as Pixels;\n    throw Error(`Cannot Coalesce \"${a}\"`)\n}\n\nexport function coalesceY(a: Dimension): Pixels {\n    if (typeof a === 'number') return a as Pixels;\n    if(a.endsWith('%')) return parsePercent(a, HEIGHT);\n    if (a.endsWith('studs')) return parseFloat(a) * (WIDTH / GAME_WIDTH_STUDS * 1.4) as Pixels;\n    throw Error(`Cannot Coalesce \"${a}\"`)\n}\n\nfunction parsePercent(a: string, containerSize: number): Pixels {\n    return parseFloat(a) / 100 * containerSize as Pixels\n}\n\nexport type Direction = 'north' | 'south' | 'east' | 'west';\n\nexport type Vector = {\n    x: number;\n    z: number;\n}\n\nexport const createVectors = (speed: Dimension): Record<Direction, Vector> => {\n    return {\n        north: {\n            x: 0,\n            z: +coalesceZ(speed)\n        },\n        south: {\n            x: 0,\n            z: -coalesceZ(speed)\n        },\n        east: {\n            x: +coalesceX(speed),\n            z: 0\n        },\n        west: {\n            x: -coalesceX(speed),\n            z: 0\n        }\n    }\n}\n\nexport const createVector = (speed: Dimension, direction: Direction) => createVectors(speed)[direction]","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _s, _e;\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}","import { coalesceX, coalesceY, coalesceZ, Pixels, Vector } from \"Dimensions\";\nimport { GameObject } from \"State\";\n\nexport type Hitbox = {\n    x: Pixels;\n    z: Pixels;\n    y: Pixels;\n    dx: Pixels;\n    dz: Pixels;\n}\n\nexport type HasHitBox = {\n    hitbox: Hitbox\n}\n\nexport const hasHitbox = (x: any): x is HasHitBox => typeof x.hitbox !== 'undefined'\n\nexport type Dimension = string | number;\n\nexport function createWithHitbox(dx: Dimension, dz: Dimension, x: Dimension = 0, z: Dimension = 0, y: Dimension = 0): HasHitBox {\n    return {\n        hitbox: {\n            dx: coalesceX(dx),\n            dz: coalesceZ(dz),\n            x: coalesceX(x),\n            z: coalesceZ(z),\n            y: coalesceY(y)\n        }\n    }\n}\n\nexport function moveObject<T extends HasHitBox>(object: T, vector: Vector): T {\n    return {\n        ...object,\n        hitbox: {\n            ...object.hitbox,\n            x: object.hitbox.x + vector.x as Pixels,\n            z: object.hitbox.z + vector.z as Pixels,\n        }\n    }\n}\n\nexport function getAjacentObjects(target: HasHitBox, objects: GameObject[]) {\n    const padding = coalesceX('1studs')\n    const { hitbox } = target;\n\n    const adjustedHitbox: Hitbox = {\n        x: hitbox.x - padding as Pixels,\n        z: hitbox.z - padding as Pixels,\n        y: hitbox.y,\n        dx: hitbox.dx + (2 * padding) as Pixels,\n        dz: hitbox.dz + (2 * padding) as Pixels,\n    }\n\n    return getOverlappingObjects(adjustedHitbox, objects);\n}\n\nexport function hasCollision(object: HasHitBox, objects: GameObject[]): boolean {\n    return getOverlappingObjects(object.hitbox, objects).length > 0\n}\n\nexport function getOverlappingObjects<T extends GameObject>(hitbox: Hitbox, objects: T[]): T[] {\n    return objects.filter((object) => hasHitbox(object) && overlaps(hitbox, object.hitbox))\n}\n\nexport function overlaps(a: Hitbox, b: Hitbox) {\n    return (\n        a.x < b.x + b.dx &&\n        a.x + a.dx > b.x &&\n        a.z < b.z + b.dz &&\n        a.dz + a.z > b.z\n    )\n}","import { coalesceX, Direction, Pixels } from \"Dimensions\";\nimport { GameObject } from \"State\";\nimport { getOverlappingObjects, hasHitbox, HasHitBox, Hitbox, overlaps } from \"./HasHitbox\";\n\nexport type CanFaceADirection = {\n    facing: Direction;\n}\n\nexport const createCanFaceADirection = (facing: Direction = 'south'): CanFaceADirection => ({\n    facing\n})\n\nexport const canFaceADirection = (x: any): x is CanFaceADirection => typeof x.facing !== 'undefined'\n\nexport function getObjectsInfrontOf<T extends GameObject>(target: CanFaceADirection & HasHitBox, objects: T[]) : T[] {\n    const adjustedHitbox = getAreaInfrontOf(target)\n    return getOverlappingObjects(adjustedHitbox, objects)\n}\n\nexport function getObjectsFacing<T extends GameObject>(target: HasHitBox, objects: T[]) {\n    const { hitbox } = target\n    return objects.filter((object) => \n        canFaceADirection(object)  \n        && hasHitbox(object)\n        && overlaps(hitbox, getAreaInfrontOf(object))\n    )\n}\n\nfunction getAreaInfrontOf({ hitbox, facing }: CanFaceADirection & HasHitBox) {\n    const offset = offsets[facing];\n\n    const adjustedHitbox: Hitbox = {\n        x: hitbox.x + offset.x as Pixels,\n        z: hitbox.z + offset.z as Pixels,\n        y: hitbox.y,\n        dx: hitbox.dx + offset.dx as Pixels,\n        dz: hitbox.dz + offset.dz as Pixels,\n    }\n\n    return adjustedHitbox\n}\n\nconst padding = coalesceX('1studs')\nconst offsets = {\n    north: {\n        x: +(padding/2),\n        z: +padding,\n        dx: -padding,\n        dz: 0\n    },\n    south: {\n        x: +(padding/2),\n        z: -padding,\n        dx: -padding,\n        dz: 0\n    },\n    east: {\n        x: +padding,\n        z: +(padding),\n        dx: 0,\n        dz: -(padding*2)\n    },\n    west: {\n        x: -padding,\n        z: +(padding),\n        dx: 0,\n        dz: -(padding*2)\n    },\n}\n","import { GameObject } from \"State\"\nimport { HasHitBox } from \"./HasHitbox\"\n\nexport type CanHandleDrop = {\n    canHandleDrop(object: GameObject): object is GameObject & HasHitBox\n    handleDropped(this: GameObject & CanHandleDrop & HasHitBox, object: GameObject & HasHitBox, objects: GameObject[], frameNumber: number): GameObject[]\n}\n\nexport const canHandleDrop = (object: GameObject) => (x: any): x is CanHandleDrop => {\n    if(typeof x.canHandleDrop === 'function'){\n        return x.canHandleDrop(object);\n    } \n    return false\n}","import { coalesceY } from \"Dimensions\"\nimport { GameObject, updateGameObjectById } from \"State\"\nimport { CanHandleDrop } from \"./CanHandleDrop\"\nimport { hasHitbox, HasHitBox } from \"./HasHitbox\"\n\nexport type HasCounterSpace =  CanHandleDrop & {\n    counterSpaceTakenBy: number | null\n}\n\nexport const createWithCounterSpace = (): HasCounterSpace => ({\n    counterSpaceTakenBy: null,\n    canHandleDrop,\n    handleDropped\n})\n\nexport const hasCounterSpace = (x: any): x is HasCounterSpace => x.counterSpaceTakenBy !== undefined\n\nexport const counterSpaceContains = (object: GameObject) => (x: any) => hasCounterSpace(x) && x.counterSpaceTakenBy === object.id\n\nfunction canHandleDrop(this: HasCounterSpace, object: GameObject) : object is GameObject & HasHitBox {\n    return this.counterSpaceTakenBy === null && hasHitbox(object)\n}\n\nfunction handleDropped(this: GameObject & HasCounterSpace & HasHitBox, droppedObject: GameObject & HasHitBox, objects: GameObject[]){\n    const counterSpace: GameObject & HasCounterSpace = {\n        ...this,\n        counterSpaceTakenBy: droppedObject.id\n    }\n    \n    objects = updateGameObjectById(objects, counterSpace);\n\n    objects = updateGameObjectById(objects, {\n        ...droppedObject,\n        hitbox: {\n            ...this.hitbox,\n            y: coalesceY('1.1studs')\n        }\n    })\n\n    return objects;\n}","import { coalesceX, Direction, Pixels, Vector } from \"Dimensions\";\nimport { GameObject, GameState, updateGameObjectById, updateGameObjectsWhere } from \"State\";\nimport { CanCarry } from \"./CanCarry\";\nimport { CanFaceADirection, getObjectsInfrontOf } from \"./CanFaceADirection\";\nimport { CanHandleDrop, canHandleDrop } from \"./CanHandleDrop\";\nimport { counterSpaceContains } from \"./HasCounterSpace\";\nimport { HasHitBox } from \"./HasHitbox\";\n\nexport type CanBeCarried = {\n    canBeCarried: true;\n    carriedBy: number | null;\n    handlePickedUpBy: typeof handlePickedUpBy;\n    canBeDropped: typeof canBeDropped;\n    handleDrop: typeof handleDrop;\n}\n\nexport const canBeCarried = (x: any): x is CanBeCarried => Boolean(x?.canBeCarried)\n\nexport const canBePickedUp = (x: any): x is CanBeCarried => canBeCarried(x) && x.carriedBy === null\n\nexport const createCanBeCarried = (): CanBeCarried => ({\n    canBeCarried: true,\n    handlePickedUpBy,\n    carriedBy: null,\n    canBeDropped,\n    handleDrop\n})\n\nfunction handlePickedUpBy(this: GameObject & CanBeCarried & HasHitBox, carrier: GameObject & HasHitBox & CanFaceADirection & CanCarry, objects: GameObject[]) {\n    let object: GameObject & CanBeCarried & HasHitBox = {\n        ...this,\n        carriedBy: carrier.id\n    }\n\n    object = positionInfrontOfCarrier(object, objects)\n\n    objects = updateGameObjectById(objects, object)\n\n    objects = updateGameObjectsWhere(objects, counterSpaceContains(object), space => ({\n        ...space,\n        counterSpaceTakenBy: null\n    }))\n\n    return objects\n}\n\nfunction canBeDropped(this: GameObject & CanBeCarried & HasHitBox, objects: GameObject[]): boolean {\n    const carrier = objects.find( carrier => carrier.id === this.carriedBy) as HasHitBox & CanCarry & CanFaceADirection\n\n    const [ somethingToDropOn ] = getObjectsInfrontOf(carrier, objects.filter(canHandleDrop(this))) as CanHandleDrop[];\n\n    if(somethingToDropOn){\n        return true;\n    }\n\n    return false;\n}\n\nfunction handleDrop(this: GameObject & CanBeCarried & HasHitBox, objects: GameObject[], frameNumber: number): GameObject[] {\n\n    let object = {\n        ...this,\n        carriedBy: null\n    }\n\n    const carrier = objects.find( carrier => carrier.id === this.carriedBy) as HasHitBox & CanCarry & CanFaceADirection\n\n    let [ somethingToDropOn ] = getObjectsInfrontOf(carrier, objects.filter(canHandleDrop(this))) as (GameObject & CanHandleDrop & HasHitBox)[];\n\n    objects = updateGameObjectById(objects, object);\n\n    objects = somethingToDropOn.handleDropped(object, objects, frameNumber);\n\n    return objects\n}\n\nfunction positionInfrontOfCarrier(object: GameObject & HasHitBox & CanBeCarried, objects: GameObject[]){\n    const carrier = objects.find( carrier => carrier.id === object.carriedBy) as HasHitBox & CanCarry & CanFaceADirection\n    const offset = offsets[carrier.facing]\n    return {\n        ...object,\n        hitbox: {\n            ...object.hitbox,\n            x: carrier.hitbox.x + offset.x as Pixels,\n            z: carrier.hitbox.z + offset.z as Pixels,\n            y: coalesceX('2studs')\n        }\n    }\n}\n\nexport function canBeCarriedReducer(object: GameObject, state: GameState): GameState {\n    if(!canBeCarried(object) || object.carriedBy === null) return state;\n\n    object = positionInfrontOfCarrier(object, state.objects);\n\n    return {\n        ...state,\n        objects: updateGameObjectById(state.objects, object)\n    }\n}\n\n\nconst offsets : Record<Direction, Vector> = {\n    north: {\n        x: 0,\n        z: +coalesceX('1.5studs')\n    },\n    south: {\n        x: 0,\n        z: -coalesceX('1.5studs')\n    },\n    east: {\n        x: +coalesceX('1.5studs'),\n        z: 0\n    },\n    west: {\n        x: -coalesceX('1.5studs'),\n        z: 0\n    }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nexport default function _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  };\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n      return ContinueSentinel;\n    }\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) {\n              if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            }\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","\nexport type ControlName = 'down' | 'up' | 'left' | 'right' | 'primaryAction' | 'secondaryAction' | 'tertiaryAction' | 'start' | 'bumper' | 'minus'\n\nexport type ControllerId = 1 | 2 | 3 | 4;\n\nexport type ControllerData = Record<ControlName, boolean>;\n\nclass Controller {\n\n    down: boolean = false\n    up: boolean = false\n    left: boolean = false\n    right: boolean = false\n    primaryAction: boolean = false\n    secondaryAction: boolean = false\n    tertiaryAction: boolean = false\n    start: boolean = false\n    bumper: boolean = false\n    minus: boolean = false;\n\n    id: ControllerId;\n\n    constructor(id: ControllerId){\n        this.id = id\n    }\n\n    isPressed(control: ControlName){\n        return this[control]\n    }\n\n    justPressed(control: ControlName){\n        return this[control] && this.lastInput && !this.lastInput[control]\n    }\n\n    justReleased(control: ControlName){\n        return !this[control] && this.lastInput && this.lastInput[control]\n    }\n\n    lastInput: ControllerData | null = null\n\n    recordInput(){\n        this.lastInput = { ...this }\n        const gamepadIndex = this.id - 1;\n        const gamepadInput = getGamePadInput(gamepadIndex);\n        if(gamepadInput) Object.assign(this, gamepadInput);\n    }\n}\n\nexport const Controls  = {\n    1: new Controller(1),\n    2: new Controller(2),\n    3: new Controller(3),\n    4: new Controller(4),\n    [Symbol.iterator]: function*(){\n        yield Controls[1];\n        yield Controls[2];\n    }\n}\n\nexport function recordInputs(){\n    for(let controllerId of [1, 2]){\n        Controls[controllerId as ControllerId].recordInput();\n    }\n}\n\nfunction getGamePadInput(gamepadIndex: number): false | ControllerData {\n    const gamepads = navigator.getGamepads();\n    const gamepad = gamepads[gamepadIndex];\n    if(!gamepad){\n        return false;\n    }\n    return {\n        up: gamepad.axes[1] === -1,\n        down: gamepad.axes[1] === 1,\n        left: gamepad.axes[0] === -1,\n        right: gamepad.axes[0] === 1,\n        primaryAction: gamepad.buttons[1].pressed === true,\n        secondaryAction: gamepad.buttons[0].pressed === true || gamepad.buttons[2].pressed === true,\n        tertiaryAction: gamepad.buttons[3].pressed === true,\n        start: gamepad.buttons[9].pressed === true,\n        bumper: gamepad.buttons[4].pressed === true || gamepad.buttons[5].pressed === true,\n        minus: gamepad.buttons[8].pressed === true\n    }\n}\n\n\nconst keyboardMap: Record<string, [ 1 | 2, ControlName ]> = {\n    'ArrowDown':    [ 1, 'down' ],\n    'ArrowUp':      [ 1, 'up' ],\n    'ArrowLeft':    [ 1, 'left' ],\n    'ArrowRight':   [ 1, 'right' ],\n    ' ':            [ 1, 'primaryAction' ],\n    'Meta':         [ 1, 'secondaryAction' ],\n    'Shift':        [ 1, 'bumper' ],\n    'Escape':       [ 1, 'minus' ],\n    's':            [ 1, 'start' ],\n    'h':            [ 1, 'tertiaryAction' ]\n}\n\nfunction handleKeyDown(e: KeyboardEvent) {\n    if (e.repeat) return;\n    recordInputs();\n    if(e.key in keyboardMap){\n        const [ controllerId, control ] = keyboardMap[e.key as keyof typeof keyboardMap];\n        Controls[controllerId][control] = true;\n    }\n}\n\nfunction handleKeyUp(e: KeyboardEvent) {\n    if (e.repeat) return;\n    recordInputs();\n    if(e.key in keyboardMap){\n        const [ controllerId, control ] = keyboardMap[e.key as keyof typeof keyboardMap];\n        Controls[controllerId][control] = false;\n    }\n}\n\nwindow.addEventListener('keydown', handleKeyDown);\nwindow.addEventListener('keyup', handleKeyUp)","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import { ControllerId } from \"Controls\";\nimport { Dimension } from \"Dimensions\";\nimport { Levels } from \"Levels\";\nimport { create3DRenderer } from \"Renderer\";\nimport { GameState } from \"State\";\nimport { createWithHitbox, createWithId, HasHitBox, HasId, createCanBeControlled, CanBeControlled, HasRenderer, CanCarry, createCanCarry, CanChop, createCanChop, createCanBread, CanBread } from \"Traits\";\n\nexport type CharacterId =\n    | 'truett'\n    | 'jeannette'\n    | 'hoho'\n    | 'nonni'\n    | 'james'\n    | 'mandi'\n    | 'charles'\n    | 'julie'\n    | 'tori'\n    | 'josh'\n    | 'joy'\n    | 'miles'\n    | 'isaac'\n    | 'lydia';\n\nexport const CharacterIds: CharacterId[] = [\n    'truett', 'jeannette',\n    'hoho', 'nonni',\n    'james', 'mandi',\n    'charles', 'julie',\n    'tori'\n]\n\nexport type Character = HasId & HasHitBox & HasRenderer & CanBeControlled & CanCarry & CanChop & CanBread & {\n    characterId: CharacterId\n}\n\nexport const createCharacter = (characterId: CharacterId, controllerId: ControllerId, x?: Dimension, z?: Dimension): Character => ({\n    characterId,\n    ...createWithId(),\n    ...createWithHitbox('2studs', '2studs', x, z),\n    ...createCanBeControlled(controllerId),\n    ...createCanCarry(),\n    ...createCanChop(),\n    ...createCanBread(),\n    render: create3DRenderer({ sprite: getSprite, padding: '2studs' })\n});\n\nfunction getSprite(character: Character){\n    let animationState;\n\n    if(character.breading){\n        animationState = 'standing.carrying'\n    } else if(character.chopping){\n        animationState = 'chopping'\n    } else if (character.moving) {\n        animationState = character.carrying ? 'walking.carrying' : 'walking'\n    } else {\n        animationState = character.carrying ? 'standing.carrying' : 'standing'\n    }\n\n    return `characters/${character.characterId}/${animationState}/${character.facing}`\n}\n\nlet numberOfLevels = 6\n\nconst characterLocks: Record<CharacterId, number> = {\n    'truett': 0,\n    'jeannette': 0,\n    'hoho': 0,\n    'nonni': 0,\n    'james': 1 / numberOfLevels,\n    'mandi': 1 / numberOfLevels,\n    'josh': 3 / numberOfLevels,\n    'tori': 3 / numberOfLevels,\n    'charles': 6 / numberOfLevels,\n    'julie': 6 / numberOfLevels,\n    'joy': 9 / numberOfLevels,\n    'miles': 9 / numberOfLevels,\n    'isaac': 9 / numberOfLevels,\n    'lydia': 9 / numberOfLevels,\n}\n\nexport function isCharacterUnlocked(state: GameState, characterId: CharacterId){\n    return state.devMode || getAverageStars(state) >= characterLocks[characterId]\n}\n\nfunction getAverageStars(state: GameState){\n    let scores = Object.values(state.highScores);\n    if(scores.length === 0) return 0;\n    return scores.reduce( (total: number, score) => total + score, 0) / scores.length\n}","import { coalesceX, Dimension } from \"Dimensions\";\nimport { create3DRenderer } from \"Renderer\";\nimport { GameObject } from \"State\";\nimport { CanBlockMovement, createCanBlockMovement, createWithCounterSpace, createWithHitbox, createWithId, HasRenderer, HasCounterSpace, HasHitBox, HasId } from \"Traits\";\n\nexport type Wall = HasId & HasHitBox & CanBlockMovement & HasCounterSpace & HasRenderer;\n\nexport const createWall = (x?: Dimension, z?: Dimension): Wall => ({\n    ...createWithId(),\n    ...createWithHitbox('2studs', '2studs', x, z, '1studs'),\n    ...createCanBlockMovement(),\n    ...createWithCounterSpace(),\n    render: create3DRenderer('walls/normal-wall'),\n})\n\nexport const tileWallX = (x: Dimension, z: Dimension, objects: (GameObject | null)[]) => {\n    let results: GameObject[] = []\n    objects.forEach( (object, i) => {\n        let wall = createWall(coalesceX(x) + coalesceX('2studs')*i, z)\n\n        results.push(wall)\n\n        if(object !== null && wall.canHandleDrop(object)){\n            results.push(object)\n            \n            results = wall.handleDropped(object, results, 1);\n        } \n    })\n    return results;\n}\n\n\nexport const tileWallZ = (x: Dimension, z: Dimension, objects: (GameObject | null)[]) => {\n    let results: GameObject[] = []\n    objects.forEach( (object, i) => {\n        let wall = createWall(x, coalesceX(z) + coalesceX('2studs')*i)\n\n        results.push(wall)\n\n        if(object !== null && wall.canHandleDrop(object)){\n            results.push(object)\n            \n            results = wall.handleDropped(object, results, 1);\n        } \n    })\n    return results;\n}","import { WIDTH, coalesceX, HEIGHT, coalesceZ, GAME_HEIGHT_STUDS } from \"Dimensions\";\nimport { GameState } from \"State\";\nimport { createWithId, HasId, HasRenderer } from \"Traits\";\n\nexport type Floor = HasId & HasRenderer;\n\nconst floorWidth = WIDTH;\nconst floorHeight = coalesceZ(`${GAME_HEIGHT_STUDS}studs`)\n\nexport const createFloor = (): Floor => ({\n    ...createWithId(),\n    render: (_: GameState, state: Floor, ctx: CanvasRenderingContext2D) => {\n        ctx.fillStyle = \"#9c9a9e\";\n        ctx.fillRect(0, HEIGHT - floorHeight, floorWidth, floorHeight);\n        ctx.fillStyle = '#bfa186';\n        ctx.fillRect(0, 0, floorWidth, HEIGHT - floorHeight);\n        ctx.strokeStyle = 'black';\n        for(let cursorX = 0; cursorX <= floorWidth; cursorX += coalesceX('2studs')){\n            ctx.beginPath();\n            ctx.moveTo(cursorX, 0);\n            ctx.lineTo(cursorX, HEIGHT);\n            ctx.stroke();\n        }\n\n        for(let cursorY = HEIGHT; cursorY > 0; cursorY -= coalesceX('2studs')){\n            ctx.beginPath();\n            ctx.moveTo(0, cursorY);\n            ctx.lineTo(floorWidth, cursorY);\n            ctx.stroke();\n        }\n    }\n})","import { Dimension } from \"Dimensions\";\nimport { create3DRenderer } from \"Renderer\";\nimport { CanBeCarried, createCanBeCarried, createWithHitbox, createWithId, HasRenderer, HasHitBox, HasId } from \"Traits\"\n\nexport type FoodItemId =\n    | 'bun'\n    | 'pickles'\n    | 'american-cheese'\n    | 'pepper-jack-cheese'\n    | 'lettuce-head'\n    | 'lettuce-leaf'\n    | 'tomato'\n    | 'tomato-slice'\n    | 'strawberries'\n    | 'diced-strawberries'\n    | 'apple'\n    | 'diced-apples'\n    | 'blueberries'\n    | 'mandarin-oranges'\n    | 'fruit-cup'\n    | 'potato'\n    | 'potato-slices'\n    | 'waffle-fries'\n    | 'raw-chicken-breast'\n    | 'original-raw-filet'\n    | 'original-fried-filet'\n    | 'original-sandwich'\n    | 'original-sandwich-no-pickles'\n    | 'deluxe-sandwich'\n    | 'deluxe-sandwich-no-pickles'\n    | 'spicy-raw-filet'\n    | 'spicy-fried-filet'\n    | 'spicy-sandwich'\n    | 'spicy-sandwich-no-pickles'\n    | 'spicy-deluxe-sandwich'\n    | 'spicy-deluxe-sandwich-no-pickles'\n    | 'raw-nuggets'\n    | 'raw-breaded-nuggets'\n    | 'fried-nuggets'\n    | 'cfa-sauce'\n    | 'bbq-sauce'\n    | 'hny-mstrd-sauce'\n    | 'buffalo-sauce'\n    | 'poly-sauce'\n    | 'ranch-sauce'\n    | 'sriracha-sauce';\n\nexport type FoodItem = HasId & HasHitBox & HasRenderer & CanBeCarried & {\n    foodItemId: FoodItemId;\n}\n\nexport const createFoodItem = (foodItemId: FoodItemId, x?: Dimension, z?: Dimension, y?: Dimension): FoodItem => ({\n    ...createWithId(),\n    ...createCanBeCarried(),\n    ...createWithHitbox('2studs', '2studs', x, z, y),\n    render: create3DRenderer((foodItem: FoodItem) => `food-items/${foodItem.foodItemId}`),\n    foodItemId\n})\n\nexport const isFoodItem = (x: any): x is FoodItem => x.foodItemId !== undefined\n\nexport const recipes = createRecipes({\n    'original-sandwich': [\n        'bun',\n        'pickles',\n        'original-fried-filet'\n    ],\n    'original-sandwich-no-pickles': [\n        'bun',\n        'original-fried-filet'\n    ],\n    'deluxe-sandwich': [\n        'bun',\n        'pickles',\n        'original-fried-filet',\n        'american-cheese',\n        'tomato-slice',\n        'lettuce-leaf'\n    ],\n    'deluxe-sandwich-no-pickles': [\n        'bun',\n        'original-fried-filet',\n        'american-cheese',\n        'tomato-slice',\n        'lettuce-leaf'\n    ],\n    'spicy-sandwich': [\n        'bun',\n        'pickles',\n        'spicy-fried-filet'\n    ],\n    'spicy-sandwich-no-pickles': [\n        'bun',\n        'spicy-fried-filet'\n    ],\n    'spicy-deluxe-sandwich': [\n        'bun',\n        'pickles',\n        'spicy-fried-filet',\n        'pepper-jack-cheese',\n        'tomato-slice',\n        'lettuce-leaf'\n    ],\n    'spicy-deluxe-sandwich-no-pickles': [\n        'bun',\n        'spicy-fried-filet',\n        'pepper-jack-cheese',\n        'tomato-slice',\n        'lettuce-leaf'\n    ],\n    'fruit-cup': [\n        'diced-apples',\n        'diced-strawberries',\n        'blueberries',\n        'mandarin-oranges'\n    ]\n})\n\nexport type Recipe = {\n    name: FoodItemId,\n    ingredientList: FoodItemId[]\n}\n\nfunction createRecipes(recipeIndex: Partial<Record<FoodItemId, FoodItemId[]>>){\n    const recipes : Recipe[] = [];\n    for(const key in recipeIndex){\n        const name = key as FoodItemId;\n        const ingredientList: FoodItemId[] = recipeIndex[name] || []\n        const recipe: Recipe = {\n            name, ingredientList\n        }\n        recipes.push(recipe);\n    }\n\n    recipes.sort((a, b) => b.ingredientList.length - a.ingredientList.length)\n\n    return recipes;\n}\n\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import { Dimension } from \"Dimensions\";\nimport { combineRenderers, create3DRenderer, createContentRenderer } from \"Renderer\";\nimport { GameObject, removeGameObjectById, updateGameObjectById } from \"State\";\nimport { CanBeCarried, CanHandleDrop, createCanBeCarried, createWithHitbox, createWithId, HasRenderer, hasHitbox, HasHitBox, HasId } from \"Traits\"\nimport { FoodItem, FoodItemId, isFoodItem, recipes } from \"./FoodItem\";\n\ntype FoodItemSet = Partial<Record<FoodItemId, number>>\n\nexport type Tray = HasId & HasHitBox & HasRenderer & CanBeCarried & CanHandleDrop & {\n    isTray: true\n    contents: FoodItemSet\n}\n\nexport const createTray = (x?: Dimension, z?: Dimension): Tray => ({\n    ...createWithId(),\n    ...createCanBeCarried(),\n    ...createWithHitbox('2studs', '2studs', x, z),\n    isTray: true,\n    contents: {},\n    render: combineRenderers(\n        create3DRenderer('tray'),\n        createContentRenderer({ sprite: 'tray', content: (tray: Tray) => tray.contents })\n    ),\n    canHandleDrop,\n    handleDropped\n})\n\nexport const isTray = (x: any): x is Tray => x && x.isTray;\n\nfunction canHandleDrop(object: GameObject): object is GameObject & HasHitBox {\n    return hasHitbox(object) && isFoodItem(object)\n}\n\nfunction handleDropped(this: Tray, droppedFoodItem: FoodItem, objects: GameObject[]): GameObject[] {\n    const formerQuantity = this.contents[droppedFoodItem.foodItemId] || 0;\n\n    const tray: Tray = {\n        ...this,\n        contents: consolidateFoodItems({\n            ...this.contents,\n            [droppedFoodItem.foodItemId]: formerQuantity + 1\n        })\n    }\n\n    objects = updateGameObjectById(objects, tray)\n\n    objects = removeGameObjectById(objects, droppedFoodItem);\n\n    return objects;\n}\n\nfunction consolidateFoodItems(foodItems: FoodItemSet): FoodItemSet {\n    const results: FoodItemSet = {};\n    const remainingIngredients: FoodItemSet = expand(foodItems);\n\n    recipes.forEach( recipe => {\n        const haveEverything = recipe.ingredientList.every( ingredient => Boolean(remainingIngredients[ingredient]) )\n        if(haveEverything){\n            results[recipe.name] = 1;\n            for(let ingredient of recipe.ingredientList){\n                const remaining = remainingIngredients[ingredient] || 0\n                remainingIngredients[ingredient] = remaining - 1;\n            }\n        }\n    })\n\n    return { ...results, ...remainingIngredients };\n}\n\n\nfunction expand(foodItems: FoodItemSet){\n    const expanded: FoodItemSet = {};\n\n    for(let key in foodItems){\n        let itemName = key as FoodItemId;\n\n        const quantity = foodItems[itemName] || 0;\n\n        const recipe = recipes.find( recipe => recipe.name === itemName)\n        if (typeof recipe !== 'undefined'){\n            for(let ingredientName of recipe.ingredientList){\n                expanded[ingredientName] = (expanded[ingredientName] || 0) + quantity\n            }\n        } else {\n            expanded[itemName] = (expanded[itemName] || 0) + quantity\n        }\n    }\n\n    return expanded\n}","import { Dimension } from \"Dimensions\";\nimport { combineRenderers, create3DRenderer, createContentRenderer, createProgressRenderer } from \"Renderer\";\nimport { GameObject, removeGameObjectById, updateGameObjectById } from \"State\";\nimport { createWithHitbox, createWithId, HasRenderer, HasHitBox, HasId, CanHandleDrop, hasHitbox } from \"Traits\";\nimport { Character } from \"./Character\";\nimport { createFoodItem, FoodItem, FoodItemId, isFoodItem } from \"./FoodItem\";\n\nexport type CuttingBoard = HasId & HasHitBox & HasRenderer & CanHandleDrop & {\n    isCuttingBoard: true,\n    content: null | ChoppableId,\n    progress: null | number,\n    canChop: () => boolean,\n    chop: (chopper: Character, objects: GameObject[]) => GameObject[]\n};\n\nexport const isCuttingBoard = (x: any): x is CuttingBoard => x && x.isCuttingBoard\n\nexport const createCuttingBoard = (x?: Dimension, z?: Dimension): CuttingBoard => ({\n    ...createWithId(),\n    isCuttingBoard: true,\n    content: null,\n    progress: null,\n    ...createWithHitbox('2studs', '2studs', x, z),\n    render: combineRenderers(\n        create3DRenderer('cutting-board'),\n        createContentRenderer({ sprite: 'cutting-board', content: (cuttingBoard: CuttingBoard) => cuttingBoard.content }),\n        createProgressRenderer('cutting-board')\n    ),\n    canHandleDrop,\n    handleDropped,\n    canChop,\n    chop\n})\n\ntype ChoppableId = 'lettuce-head' | 'raw-chicken-breast' | 'tomato' | 'potato' | 'apple' | 'strawberries';\n\nconst choppableIds = [ 'lettuce-head','raw-chicken-breast', 'tomato', 'potato', 'apple', 'strawberries' ]\n\nexport type Choppable = FoodItem & {\n    foodItemId: ChoppableId\n}\n\nexport const isChoppable = (x: any): x is Choppable => isFoodItem(x) && choppableIds.includes(x.foodItemId)\n\nfunction canHandleDrop(this: CuttingBoard, object: GameObject): object is GameObject & HasHitBox {\n    return hasHitbox(object) && isChoppable(object) &&  this.content === null\n}\n\nfunction handleDropped(this: CuttingBoard, droppedObject: Choppable, objects: GameObject[]){\n    const cuttingBoard: CuttingBoard = {\n        ...this,\n        content: droppedObject.foodItemId,\n        progress: 0\n    }\n\n    objects = removeGameObjectById(objects, droppedObject)\n\n    objects = updateGameObjectById(objects, cuttingBoard)\n\n    return objects;\n}\n\nfunction canChop(this: CuttingBoard){\n    return this.content !== null\n}\n\nfunction chop(this: CuttingBoard, chopper: Character, objects: GameObject[]){\n    if(this.content === null) return objects\n\n    let newProgress = (this.progress || 0) + 0.01;\n\n    let cuttingBoard: CuttingBoard;\n\n    if(newProgress < 1){\n        cuttingBoard = {\n            ...this,\n            progress: newProgress\n        }\n    } else {\n        const newFoodItem = createFoodItem(chopYield[this.content])\n\n        cuttingBoard = {\n            ...this,\n            progress: null,\n            content: null\n        }\n\n        objects = [ ...objects, newFoodItem ]\n\n        objects = newFoodItem.handlePickedUpBy(chopper, objects)\n\n        objects = updateGameObjectById(objects, {\n            ...chopper,\n            carrying: newFoodItem.id\n        })\n\n    }\n\n    objects = updateGameObjectById(objects, cuttingBoard)\n\n    return objects\n}\n\nexport const chopYield : Record<ChoppableId, FoodItemId> = {\n    'lettuce-head': 'lettuce-leaf',\n    'raw-chicken-breast':'raw-nuggets',\n    'tomato': 'tomato-slice',\n    'potato': 'potato-slices',\n    'apple': 'diced-apples',\n    'strawberries': 'diced-strawberries'\n}","import { Dimension } from \"Dimensions\";\nimport { loadFinishedLevelMenu } from \"Menus\";\nimport { AssetManager, combineRenderers, create3DRenderer, createProgressRenderer, createSpicyIconRenderer } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState, removeGameObjectById, updateGameObjectById } from \"State\";\nimport { createWithHitbox, createWithId, HasRenderer, HasHitBox, HasId, CanHandleDrop, hasHitbox, CanBlockMovement, createCanBlockMovement, getObjectsFacing, canBeControlled, filter, canCarry } from \"Traits\";\nimport { CanBeSpicy } from \"Traits/CanBeSpicy\";\nimport { createFoodItem, FoodItem, FoodItemId, isFoodItem } from \"./FoodItem\";\n\ntype FryableId = 'original-raw-filet' | 'spicy-raw-filet' | 'raw-breaded-nuggets' | 'potato-slices'\n\nconst fryableIds = [ 'original-raw-filet', 'spicy-raw-filet', 'raw-breaded-nuggets', 'potato-slices'  ]\n\nconst spicyFryableIds = [ 'spicy-raw-filet', 'potato-slices' ]\n\nexport type Fryable = FoodItem & {\n    foodItemId: FryableId\n}\n\nexport type Fryer = HasId & HasHitBox & HasRenderer & CanHandleDrop & CanBlockMovement & CanBeSpicy & {\n    isFryer: true,\n    onFire: boolean,\n    content: null | FryableId,\n    progress: null | number,\n    finishedAt: null | number,\n    retrieve: (objects: GameObject[]) => [ GameObject[], FoodItem ]\n};\n\n\nexport const createFryer = (x?: Dimension, z?: Dimension): Fryer => ({\n    ...createWithId(),\n    isSpicy: false,\n    isFryer: true,\n    content: null,\n    progress: null,\n    finishedAt: null,\n    onFire: false,\n    ...createWithHitbox('4studs', '2studs', x, z),\n    ...createCanBlockMovement(),\n    render: combineRenderers(\n        create3DRenderer({ sprite: getSprite, speed: getSpeed }),\n        createProgressRenderer('fryer/off'),\n        create3DRenderer({ sprite: (fryer: Fryer) => fryer.content != null ? 'steam' : null, speed: 0.5}),\n        createSpicyIconRenderer()\n    ),\n    canHandleDrop,\n    handleDropped,\n    retrieve\n})\n\nconst getSprite = (fryer: Fryer, state: GameState) => {\n    if(fryer.progress !== null) return `fryer/on`\n    if(fryer.finishedAt !== null) {\n        const framesElapsed =  state.frameNumber -  fryer.finishedAt;\n\n        const secondsElapased = ((framesElapsed * MS_PER_FRAME) / 1000);\n\n        if(secondsElapased < 12){\n            return `fryer/done`\n        } else {\n            return `fryer/on-fire`\n        }\n    }\n    else return `fryer/off`\n}\n\nconst getSpeed = (fryer: Fryer, state: GameState) => {\n    if(fryer.finishedAt === null) return 1;\n\n    const framesElapsed =  state.frameNumber -  fryer.finishedAt;\n\n    const secondsElapased = ((framesElapsed * MS_PER_FRAME) / 1000);\n\n    if(secondsElapased < 4){\n        return 0.1\n    }\n\n    if(secondsElapased < 8){\n        return 0.25\n    }\n\n    if(secondsElapased < 12){\n        return 0.5\n    }\n\n    return 1\n}\n\nexport const isFryer = (x: any): x is Fryer => x && x.isFryer\nexport const isFinishedFryer = (x: any): x is Fryer => isFryer(x) && x.finishedAt !== null && x.onFire === false\n\nconst isFryable = (x: any): x is Fryable => isFoodItem(x) && fryableIds.includes(x.foodItemId)\n\nconst isSpicyFryable = (x: any): x is Fryable => isFoodItem(x) && spicyFryableIds.includes(x.foodItemId)\n\nfunction canHandleDrop(this: Fryer, object: GameObject): object is GameObject & HasHitBox {\n    return hasHitbox(object)\n        && isFryable(object)\n        && (!this.isSpicy || isSpicyFryable(object))\n        &&  this.content === null\n}\n\nfunction handleDropped(this: Fryer, droppedObject: Fryable, objects: GameObject[]){\n    const fryer: Fryer = {\n        ...this,\n        isSpicy: this.isSpicy || droppedObject.foodItemId === 'spicy-raw-filet',\n        content: droppedObject.foodItemId,\n        progress: 0\n    }\n\n    objects = removeGameObjectById(objects, droppedObject)\n\n    objects = updateGameObjectById(objects, fryer)\n\n    return objects;\n}\n\nfunction retrieve(this: Fryer, objects: GameObject[]){\n    if(this.content === null) throw Error('Cannot retreive from fryer when it has no content')\n\n    const newFoodItem = createFoodItem(fryYield[this.content])\n\n    let fryer = {\n        ...this,\n        content: null,\n        finishedAt: null\n    }\n\n    objects = updateGameObjectById(objects, fryer);\n\n    objects = [ ...objects, newFoodItem ]\n\n    return [ objects, newFoodItem ] as [ GameObject[], FoodItem ]\n}\n\nexport function fryerReducer(object: GameObject, state: GameState) {\n    if (!isFryer(object) || state.isPaused) return state;\n\n    let fryer = object as Fryer;\n\n    if(fryer.content === null) {\n        return state;\n    }\n\n    let objects = state.objects;\n\n    let newProgress = (fryer.progress || 0) + 0.005;\n\n    if(!fryer.finishedAt){\n        if(newProgress < 1){\n            fryer = {\n                ...fryer,\n                progress: newProgress\n            }\n        } else {\n            fryer = {\n                ...fryer,\n                progress: null,\n                finishedAt: state.frameNumber\n            }\n        }\n    }\n\n    const fryingSounds = AssetManager.loadAliasedAudio(`frying.${fryer.id}`, `frying.mp3`)\n    const fireSounds = AssetManager.loadAliasedAudio(`fire.${fryer.id}`, `fire.mp3`)\n    const beeping1 = AssetManager.loadAliasedAudio(`beeping.${fryer.id}.1`, 'beeping-1.mp3')\n    const beeping2 = AssetManager.loadAliasedAudio(`beeping.${fryer.id}.2`, 'beeping-2.mp3')\n    const beeping3 = AssetManager.loadAliasedAudio(`beeping.${fryer.id}.3`, 'beeping-3.mp3')\n\n    if(fryer.finishedAt){\n        const framesElapsed =  state.frameNumber -  fryer.finishedAt;\n        const secondsElapased = ((framesElapsed * MS_PER_FRAME) / 1000);\n\n        if(secondsElapased < 4){\n            beeping1.play(0.15);\n            fryingSounds.play(0.15);\n        } else if(secondsElapased < 8){\n            beeping2.play(0.15);\n            fryingSounds.play(0.15);\n        } else if(secondsElapased < 12){\n            beeping3.play(0.15);\n            fryingSounds.play(0.15);\n        } else if(secondsElapased > 12){\n            fireSounds.play(0.15);\n            fryer = {\n                ...fryer,\n                onFire: true\n            }\n        }\n        if(secondsElapased > 18){\n            return {\n                ...state,\n                isPaused: true,\n                canPause: false,\n                objects: [\n                    ...state.objects,\n                    ...loadFinishedLevelMenu(state)\n                ]\n            }\n        }\n    } else {\n        fryingSounds.play(0.15);\n    }\n\n    objects = updateGameObjectById(objects, fryer)\n\n    return {\n        ...state,\n        objects\n    }\n}\n\nexport const fryYield : Record<FryableId, FoodItemId> = {\n    'original-raw-filet': 'original-fried-filet',\n    'spicy-raw-filet': 'spicy-fried-filet',\n    'raw-breaded-nuggets': 'fried-nuggets',\n    'potato-slices': 'waffle-fries'\n}","import { Dimension } from \"Dimensions\";\nimport { combineRenderers, create3DRenderer, createContentRenderer, createProgressRenderer, createSpicyIconRenderer } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState, removeGameObjectById, updateGameObjectById } from \"State\";\nimport { createWithHitbox, createWithId, HasRenderer, HasHitBox, HasId, CanHandleDrop, hasHitbox, CanBlockMovement, createCanBlockMovement } from \"Traits\";\nimport { CanBeSpicy } from \"Traits/CanBeSpicy\";\nimport { Character } from \"./Character\";\nimport { createFoodItem, FoodItem, FoodItemId, isFoodItem } from \"./FoodItem\";\n\ntype BreadableId = 'raw-chicken-breast'|'raw-nuggets' ;\n\ntype SpicyBreadableId = 'raw-chicken-breast'\n\nconst breadableIDs = [ 'raw-chicken-breast','raw-nuggets' ]\n\nconst spicyBreadableIDs = [ 'raw-chicken-breast' ]\n\n\nexport type BreadingTable = HasId & HasHitBox & HasRenderer & CanHandleDrop & CanBlockMovement & CanBeSpicy & {\n    isBreadingTable: true,\n    lastInUse: null | number,\n    content: null | BreadableId,\n    progress: null | number,\n    canBread: () => boolean,\n    bread: (breader: Character, objects: GameObject[], frameNumber: number) => GameObject[]\n};\n\nexport const isBreadingTable = (x: any): x is BreadingTable => x && x.isBreadingTable\n\nexport const createBreadingTable = (isSpicy = false, x?: Dimension, z?: Dimension): BreadingTable => ({\n    ...createWithId(),\n    isSpicy,\n    isBreadingTable: true,\n    lastInUse: null,\n    content: null,\n    progress: null,\n    ...createWithHitbox('4studs', '2studs', x, z, '1studs'),\n    ...createCanBlockMovement(),\n    render: combineRenderers(\n        create3DRenderer('breading-table'),\n        createSpicyIconRenderer(),\n        createContentRenderer({ sprite: 'breading-table', content: (breadingTable: BreadingTable) => breadingTable.content }),\n        createProgressRenderer('breading-table'),\n        create3DRenderer({ sprite: getFlour, speed: 0.25 }),\n    ),\n    canHandleDrop,\n    handleDropped,\n    canBread,\n    bread\n})\n\nconst getFlour = (breadingTable: BreadingTable, state: GameState) => {\n    if(breadingTable.lastInUse != null && breadingTable.lastInUse > (state.frameNumber-10)){\n        return 'flour'\n    } else {\n        return null\n    }\n}\n\n\nexport type Breadable = FoodItem & {\n    foodItemId: BreadableId\n}\n\nconst isBreadable = (x: any): x is Breadable => isFoodItem(x) && breadableIDs.includes(x.foodItemId)\n\nconst isSpicyBreadable = (x: any): x is Breadable => isFoodItem(x) && spicyBreadableIDs.includes(x.foodItemId)\n\n\nfunction canHandleDrop(this: BreadingTable, object: GameObject): object is GameObject & HasHitBox {\n    return hasHitbox(object)\n        && ((!this.isSpicy && isBreadable(object)) || (this.isSpicy && isSpicyBreadable(object)))\n        &&  this.content === null\n}\n\nfunction handleDropped(this: BreadingTable, droppedObject: Breadable, objects: GameObject[]){\n    const breadingTable: BreadingTable = {\n        ...this,\n        content: droppedObject.foodItemId,\n        progress: 0\n    }\n\n    objects = removeGameObjectById(objects, droppedObject)\n\n    objects = updateGameObjectById(objects, breadingTable)\n\n    return objects;\n}\n\nfunction canBread(this: BreadingTable){\n    return this.content !== null\n}\n\nfunction bread(this: BreadingTable, chopper: Character, objects: GameObject[], frameNumber: number){\n    if(this.content === null) return objects\n\n    let newProgress = (this.progress || 0) + 0.01;\n\n    let breadingTable: BreadingTable;\n\n    if(newProgress < 1){\n        breadingTable = {\n            ...this,\n            lastInUse: frameNumber,\n            progress: newProgress\n        }\n    } else {\n        const newFoodItem = this.isSpicy\n            ? createFoodItem(spicyBreadYield[this.content as SpicyBreadableId])\n            : createFoodItem(breadYield[this.content])\n\n        breadingTable = {\n            ...this,\n            progress: null,\n            content: null\n        }\n\n        objects = [ ...objects, newFoodItem ]\n\n        objects = newFoodItem.handlePickedUpBy(chopper, objects)\n\n        objects = updateGameObjectById(objects, {\n            ...chopper,\n            carrying: newFoodItem.id\n        })\n    }\n\n    objects = updateGameObjectById(objects, breadingTable)\n\n    return objects\n}\n\nexport const breadYield : Record<BreadableId, FoodItemId> = {\n    'raw-chicken-breast': 'original-raw-filet',\n    'raw-nuggets':'raw-breaded-nuggets'\n}\n\nexport const spicyBreadYield : Record<SpicyBreadableId, FoodItemId> = {\n    'raw-chicken-breast': 'spicy-raw-filet'\n}","import { coalesceX, Dimension } from \"Dimensions\";\nimport { create3DRenderer } from \"Renderer\";\nimport { GameObject, removeGameObjectById } from \"State\";\nimport { CanBlockMovement, createCanBlockMovement, createWithCounterSpace, createWithHitbox, createWithId, HasRenderer, HasCounterSpace, HasHitBox, HasId, CanHandleDrop, hasHitbox } from \"Traits\";\n\nexport type TrashCan = HasId & HasHitBox & CanBlockMovement & HasRenderer & CanHandleDrop;\n\nexport const createTrashCan = (x?: Dimension, z?: Dimension): TrashCan => ({\n    ...createWithId(),\n    ...createWithHitbox('2studs', '2studs', x, z, '1studs'),\n    ...createCanBlockMovement(),\n    render: create3DRenderer('trash-can'),\n    canHandleDrop,\n    handleDropped\n})\n\nfunction canHandleDrop(object: GameObject): object is GameObject & HasHitBox{\n    return hasHitbox(object);\n}\n\nfunction handleDropped(object: GameObject, objects: GameObject[]){\n\n    objects = removeGameObjectById(objects, object)\n\n    return objects;\n}","import { AssetManager } from \"./AssetManager\"\nimport animationData from 'animations.json'\n\nexport type Animation = {\n    numberOfFrames: number,\n    sideview: false | Pick<Animation, 'size'>,\n    size: {\n        width:  number,\n        height: number\n    },\n    handleOffset: \"bottom-left\" | \"bottom-center\"\n}\n\nexport const Animations = animationData as Record<string, Animation>\n\n// export const assetLoading = Promise.all(Object.keys(Animations).map( assetPath => {\n//     const animation = Animations[assetPath];\n//     return Promise.all(new Array(animation.numberOfFrames).fill(1).map( (_, frameIndex) => {\n//         return animation.sideview\n//             ? Promise.all([\n//                 AssetManager.loadImage(`${assetPath}/${frameIndex+1}.png`),\n//                 AssetManager.loadImage(`${assetPath}/${frameIndex+1}.sideview.png`)\n//             ])\n//             : AssetManager.loadImage(`${assetPath}/${frameIndex+1}.png`)\n//     }))\n// }))","\nconst loadedImages: Record<string, HTMLImageElement> = {};\n\nconst loadedAudioTracks: Record<string, HTMLAudioElement> = {};\n\nconst aliasedAudioTracks: Record<string, HTMLAudioElement> = {};\n\nexport const AssetManager = {\n\n    getImage(path: string){\n        if(!(path in loadedImages)){\n            loadedImages[path] = new Image();\n            loadedImages[path].src = `assets/${path}`;\n        }\n        return loadedImages[path];\n    },\n\n    loadImage(path: string){\n        return new Promise( resolve => {\n            const image = AssetManager.getImage(path);\n            image.addEventListener('load', () => {\n                resolve(image)\n            })\n        })\n    },\n\n    getAudio(path: string){\n        if(!(path in loadedAudioTracks)){\n            loadedAudioTracks[path] = new Audio(`assets/${path}`);\n        }\n        return loadedAudioTracks[path];\n    },\n\n    loadAudio(path: string){\n        return new Promise( resolve => {\n            const audio = AssetManager.getAudio(path);\n            audio.addEventListener('canplay', () => {\n                resolve(audio)\n            })\n        })\n    },\n\n    loadAliasedAudio(alias: string, path: string){\n        if(!(alias in aliasedAudioTracks)){\n            aliasedAudioTracks[alias] = new Audio(`assets/${path}`);\n            aliasedAudioTracks[alias].loop = true;\n        }\n        return {\n            play: (volume: number = 1) => {\n                this.currentlyPlaying.push(alias)\n                aliasedAudioTracks[alias].volume = volume;\n                aliasedAudioTracks[alias].play();\n            }\n        }\n    },\n\n    currentlyPlaying: [] as string[],\n    clearAudio(){\n        for(let alias in aliasedAudioTracks){\n            if(!this.currentlyPlaying.includes(alias)){\n                aliasedAudioTracks[alias].pause();\n                aliasedAudioTracks[alias].currentTime = 0\n            }\n        }\n        this.currentlyPlaying = [];\n    }\n}","import { coalesceX } from \"Dimensions\";\nimport { FoodItemId } from \"Objects\";\nimport { Animations } from \"./Animations\";\nimport { AssetManager } from \"./AssetManager\";\n\ntype Area2D = {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\n\nexport function renderFoodItemsInArea(area: Area2D, foodItems: FoodItemId[], ctx: CanvasRenderingContext2D){\n    let offset = 0;\n    for(let foodItem of foodItems) {\n        const foodItemAnimation = Animations[`food-items/${foodItem}`];\n\n        const width = Math.min(area.width / Math.max((foodItems.length), 1), coalesceX('2studs'));\n\n        const scale = width / foodItemAnimation.size.width;\n\n        const height = foodItemAnimation.size.height * scale;\n\n        let leftPadding = 0, topPadding = (area.height - height) / 2;\n\n        if(width < area.width && foodItems.length === 1){\n            leftPadding = (area.width - width) / 2;\n            topPadding = (area.height - height) / 2;\n        }\n\n        ctx.drawImage(\n            AssetManager.getImage(`food-items/${foodItem}` + `/1.png`),\n            area.x + offset + leftPadding,\n            area.y + topPadding,\n            width,\n            height\n        )\n\n        offset += (width);\n    }\n}","import { Animations, AssetManager } from \"Renderer\";\nimport { renderFoodItemsInArea } from \"Renderer/renderFoodItemsInArea\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState, updateGameObjectById } from \"State\";\nimport { createHasOverlay, createWithId, HasId, HasOverlay, HasRenderer, Renderer } from \"Traits\";\nimport { FoodItemId } from \"./FoodItem\";\n\n\n\nexport type Order = {\n    foodItems: FoodItemId[];\n    placedAt: number;\n    fullfilledAt: number | null;\n}\n\nexport type OrderTimeline = [number, (() => FoodItemId[])][]\n\nexport type OrderBoard = HasId & HasRenderer & HasOverlay & {\n    isOrderBoard: true;\n    orders: Order[];\n    fullfilled: (Order & { fullfilledAt: number })[];\n    upcomingOrders: OrderTimeline;\n    timestampForNextOrder: number;\n    firstDeadline: number;\n    secondDeadline: number;\n}\n\nexport const isOrderBoard = (x: any): x is OrderBoard => x && x.isOrderBoard\n\nexport const createOrderBoard = (upcomingOrders: OrderTimeline): OrderBoard => ({\n    ...createWithId(),\n    ...createHasOverlay(),\n    isOrderBoard: true,\n    orders: [],\n    fullfilled: [],\n    upcomingOrders,\n    timestampForNextOrder: upcomingOrders[0]?.[0],\n    firstDeadline: 30,\n    secondDeadline: 60,\n    render\n})\n\nconst render = ((state: GameState, board: OrderBoard, ctx: CanvasRenderingContext2D) => {\n    ctx.beginPath();\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n    //@ts-ignore\n    ctx.roundRect(0, 0, 100 * board.orders.length, 100, 5);\n    ctx.fill();\n\n    let index = 0;\n    for (let order of board.orders) {\n\n        const framesElapsed = state.frameNumber - order.placedAt\n\n        let firstDeadline = board.firstDeadline * 1000 / MS_PER_FRAME;\n        let secondDeadline = board.secondDeadline * 1000 / MS_PER_FRAME;\n\n        if(secondDeadline < framesElapsed && framesElapsed < secondDeadline + (500 / MS_PER_FRAME)){\n            AssetManager.loadAliasedAudio(`buzzer.${board.id}`, 'buzzer.mp3').play(0.5);\n        }\n\n        ctx.beginPath();\n        // @ts-ignore\n        ctx.roundRect(index*100, 0, 100, 100, 5);\n        ctx.strokeStyle = 'rgba(0, 0, 0, 0.75)'\n        ctx.lineWidth = 2\n        ctx.stroke()\n\n        if(framesElapsed > board.firstDeadline * 1000 / MS_PER_FRAME){\n            ctx.beginPath()\n            ctx.fillStyle =  framesElapsed > board.secondDeadline * 1000 / MS_PER_FRAME\n                ? 'rgba(255, 0, 0, 0.5)'\n                : 'rgba(255, 255, 0, 0.5)'\n            // @ts-ignore\n            ctx.roundRect(index*100, 0, 100, 100, 5);\n            ctx.fill();\n        }\n\n        const area = {\n            x: index * 100,\n            y: 0,\n            width: 100,\n            height: 100\n        }\n\n        renderFoodItemsInArea(area, order.foodItems, ctx)\n\n        index++;\n    }\n}) as Renderer;\n\nexport function orderBoardReducer(object: GameObject, state: GameState) {\n    if (!isOrderBoard(object)) return state;\n\n    let board = object as OrderBoard;\n\n    if (board.timestampForNextOrder < state.frameNumber) {\n        let [[ _, getOrder ], ...upcomingOrders] = board.upcomingOrders;\n        let duration = upcomingOrders[0]?.[0]\n        if(duration === undefined) duration = Infinity\n        board = {\n            ...board,\n            upcomingOrders,\n            timestampForNextOrder: state.frameNumber + (duration*1000/MS_PER_FRAME),\n            orders: [\n                ...board.orders,\n                {\n                    foodItems: getOrder(),\n                    placedAt: state.frameNumber,\n                    fullfilledAt: null\n                }\n            ]\n        }\n    }\n\n    return {\n        ...state,\n        objects: updateGameObjectById(state.objects, board)\n    }\n}\n\nexport function randomElement<T>(array: T[]) {\n    return array[Math.floor(Math.random() * array.length)];\n}\n\nfunction generateRandomNumber(min: number, max: number) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n}","import { Dimension } from \"Dimensions\";\nimport { AssetManager, combineRenderers, create2DRenderer, create3DRenderer } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState, removeGameObjectById, updateGameObjectById } from \"State\";\nimport { CanBlockMovement, createCanBlockMovement, createWithHitbox, createWithId, HasRenderer, HasCounterSpace, HasHitBox, HasId, CanHandleDrop, hasHitbox, filter } from \"Traits\";\nimport { FoodItemId } from \"./FoodItem\";\nimport { isOrderBoard, Order, randomElement } from \"./OrderBoard\";\nimport { isTray, Tray } from \"./Tray\";\n\nconst guests = [\n    'violet',\n    'ursula',\n    'storm-trooper',\n    'santa',\n    'leia',\n    'iron-man',\n    'elrond',\n    'captain-america',\n    'batman',\n    'aang'\n]\n\nexport type PickUpCounter = HasId & HasHitBox & CanBlockMovement & HasRenderer & CanHandleDrop & {\n    isPickupCounter: true;\n    lastFullfillment: number | null;\n    currentGuest: string;\n};\n\nexport const createPickUpCounter = (x?: Dimension, z?: Dimension): PickUpCounter => ({\n    isPickupCounter: true,\n    ...createWithId(),\n    ...createWithHitbox('4studs', '2studs', x, z, '1studs'),\n    ...createCanBlockMovement(),\n    currentGuest: randomElement(guests),\n    render: combineRenderers(\n        create3DRenderer<PickUpCounter>({ sprite: c => `guests/${c.currentGuest}`, padding: -30 }),\n        create3DRenderer('pick-up-counter')\n    ),\n    canHandleDrop,\n    handleDropped,\n    lastFullfillment: null\n})\n\nexport const isPickupCounter = (x: any): x is PickUpCounter => x?.isPickupCounter\n\nconst canHandleDrop = (x: any): x is GameObject & HasHitBox => {\n    return hasHitbox(x) && isTray(x)\n}\n\nfunction handleDropped(this: PickUpCounter, tray: Tray, objects: GameObject[], frameNumber: number){\n\n    let [ orderBoard ] = filter(objects, isOrderBoard);\n\n    if(orderBoard) {\n\n        let orders: Order[] = [ ...orderBoard.orders ]\n        let fullfilled: Order[] = [ ...orderBoard.fullfilled ]\n        for(let i = 0; i < orders.length; i++){\n            const order = orders[i]\n            const foodItems = order.foodItems;\n            if(foodItems.every( foodItem => foodItem in tray.contents)){\n                orders.splice(i, 1)\n                fullfilled = [ ...fullfilled, {\n                    ...order,\n                    fullfilledAt: frameNumber\n                }]\n                break;\n            }\n        }\n\n        let pickupCounter = {\n            ...this,\n            lastFullfillment: fullfilled.length !== orderBoard.fullfilled.length ? frameNumber : this.lastFullfillment,\n            currentGuest: fullfilled.length !== orderBoard.fullfilled.length ? randomElement(guests) : this.currentGuest,\n        }\n\n        orderBoard = {\n            ...orderBoard,\n            orders,\n            // @ts-ignore\n            fullfilled\n        }\n\n        objects = updateGameObjectById(objects, pickupCounter)\n\n        objects = updateGameObjectById(objects, orderBoard)\n\n    }\n\n    objects = removeGameObjectById(objects, tray)\n\n    return objects;\n}\n\nexport function pickUpCounterReducer(object: GameObject, state: GameState){\n    if(!isPickupCounter(object)) return state;\n\n    if(object.lastFullfillment !== null && state.frameNumber - (1000 / MS_PER_FRAME) < object.lastFullfillment){\n        AssetManager.loadAliasedAudio('success', 'success.mp3').play();\n    }\n\n    return state;\n}\n\n","\n\nimport { Dimension, HEIGHT, WIDTH } from \"Dimensions\";\nimport { AssetManager } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameState } from \"State\";\nimport { createHasOverlay, createWithBoundingbox, createWithId, filter, HasBoundingbox, HasId, HasOverlay, HasRenderer, Renderer } from \"Traits\";\nimport { isOrderBoard, Order } from \"./OrderBoard\";\n\nexport type ScoreCounter = HasId & HasRenderer & HasOverlay & HasBoundingbox & {\n    isScoreCounter: true;\n}\n\nexport const isScoreCounter = (x: any): x is ScoreCounter => x && x.isScoreCounter\n\nexport const createScoreCounter = (sideLength: Dimension = 125, x: Dimension = WIDTH - (125/2), y: Dimension = HEIGHT - (125/2)): ScoreCounter => ({\n    ...createWithId(),\n    ...createHasOverlay(),\n    ...createWithBoundingbox(sideLength, sideLength, x, y),\n    isScoreCounter: true,\n    render\n})\n\n\nconst render = ((state: GameState, counter: ScoreCounter, ctx: CanvasRenderingContext2D) => {\n\n    let { x, y, width: sideLength } = counter.boundingbox;\n\n    ctx.beginPath();\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n\n    ctx.drawImage(\n        AssetManager.getImage(`score-counter/1.png`),\n        x - (sideLength/2), y - (sideLength/2), sideLength, sideLength\n    )\n    ctx.fill();\n\n    const finalScore = calculateFinalScore(state)\n\n    ctx.beginPath();\n    ctx.font = 'italic 60px apercu-medium';\n    ctx.textBaseline = 'middle';\n    ctx.textAlign = 'center';\n    ctx.fillStyle = 'rgba(255, 255, 255, 1)';\n    ctx.strokeStyle = 'black';\n    ctx.lineWidth = 8;\n    ctx.strokeText(`${finalScore}`, x - (sideLength*.1), y - (sideLength*.1))\n    ctx.fillText(`${finalScore}`, x - (sideLength*.1), y - (sideLength*.1))\n}) as Renderer;\n\nconst timeToDeliveryGreaterThan = (deadline: number, frameNumber: number) => (order: Order) =>\n    (order.fullfilledAt || frameNumber) - order.placedAt > deadline  * 1000 / MS_PER_FRAME\n\nconst timeToDeliveryLessThan = (deadline: number, frameNumber: number) => (order: Order) =>\n    (order.fullfilledAt || frameNumber) - order.placedAt < deadline  * 1000 / MS_PER_FRAME\n\nexport function calculateFinalScore({ objects, frameNumber }: GameState){\n    let [ orderBoard ] = filter(objects, isOrderBoard);\n\n    if(!orderBoard) return 0;\n\n    const { firstDeadline, secondDeadline } = orderBoard;\n\n    const numberOfExpiredOrders =\n        orderBoard.orders.filter(timeToDeliveryGreaterThan(secondDeadline, frameNumber)).length\n        + orderBoard.fullfilled.filter(timeToDeliveryGreaterThan(secondDeadline, frameNumber)).length\n\n    const numberOfBarelyFulfilledOrders = orderBoard.fullfilled\n        .filter(timeToDeliveryGreaterThan(firstDeadline, frameNumber))\n        .filter(timeToDeliveryLessThan(secondDeadline, frameNumber))\n        .length\n\n    const numberOfBonusFulfilledOrders = orderBoard.fullfilled\n        .filter(timeToDeliveryLessThan(firstDeadline, frameNumber))\n        .length\n\n    const finalScore = numberOfBarelyFulfilledOrders + (numberOfBonusFulfilledOrders*2) - numberOfExpiredOrders\n\n    return finalScore\n}\n","import { Dimension } from \"Dimensions\";\nimport { combineRenderers, create3DRenderer, createContentRenderer } from \"Renderer\";\nimport { CanBlockMovement, createCanBlockMovement, createWithCounterSpace, createWithHitbox, createWithId, HasRenderer, HasCounterSpace, HasHitBox, HasId, CanHandleDrop, hasHitbox, CanProvide, createCanProvide, canBlockMovement } from \"Traits\";\nimport { createFoodItem, FoodItemId } from \"./FoodItem\";\n\nexport type Bucket = HasId & HasHitBox & CanProvide & HasRenderer;\n\nexport const createBucket = (content: FoodItemId, x?: Dimension, z?: Dimension): Bucket => ({\n    ...createWithId(),\n    ...createWithHitbox('2studs', '2studs', x, z, '1studs'),\n    ...createCanProvide(() => createFoodItem(content)),\n    render: combineRenderers(\n        create3DRenderer('bucket'),\n        createContentRenderer({ sprite: 'bucket', content  })\n    ),\n})\n","import { Dimension } from \"Dimensions\";\nimport { combineRenderers, create3DRenderer, createContentRenderer } from \"Renderer\";\nimport { CanBlockMovement, createCanBlockMovement, createWithCounterSpace, createWithHitbox, createWithId, HasRenderer, HasCounterSpace, HasHitBox, HasId, CanHandleDrop, hasHitbox, CanProvide, createCanProvide } from \"Traits\";\nimport { createFoodItem, FoodItemId } from \"./FoodItem\";\nimport { createTray } from \"./Tray\";\n\nexport type TrayStack = HasId & HasHitBox & CanProvide & HasRenderer;\n\nexport const createTrayStack = (x?: Dimension, z?: Dimension): TrayStack => ({\n    ...createWithId(),\n    ...createWithHitbox('2studs', '2studs', x, z, '1studs'),\n    ...createCanProvide(() => createTray()),\n    render: create3DRenderer('tray-stack'),\n})\n\n","\n\nimport { HEIGHT, WIDTH } from \"Dimensions\";\nimport { loadFinishedLevelMenu } from \"Menus\";\nimport { AssetManager } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState } from \"State\";\nimport { createHasOverlay, createWithId, filter, HasId, HasOverlay, HasRenderer, Renderer } from \"Traits\";\n\nexport type Timer = HasId & HasRenderer & HasOverlay & {\n    isTimer: true;\n    startedAt: number;\n    duration: number;\n}\n\nexport const isTimer = (x: any): x is Timer => x && x.isTimer\n\nexport const createTimer = (startedAt: number, duration: number): Timer => ({\n    ...createWithId(),\n    ...createHasOverlay(),\n    startedAt,\n    duration,\n    isTimer: true,\n    render\n})\n\nconst render = (({ frameNumber, objects }: GameState, timer: Timer, ctx: CanvasRenderingContext2D) => {\n    ctx.beginPath();\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n    ctx.drawImage(\n        AssetManager.getImage(`clock/1.png`),\n        0, HEIGHT - 135, 125, 125\n    )\n    ctx.fill();\n\n    const elapsed = frameNumber - timer.startedAt\n\n    const remaining = timer.duration - elapsed\n\n    const totalSeconds = Math.round(remaining * MS_PER_FRAME / 1000)\n\n    const minutes = Math.floor(totalSeconds / 60);\n\n    const seconds = Math.round(totalSeconds % 60);\n\n    const time = minutes.toString().padStart(2, '0') + \":\" + seconds.toString().padStart(2, '0')\n\n    ctx.beginPath();\n    ctx.font = 'italic 40px apercu-medium';\n    ctx.textBaseline = 'top';\n    ctx.strokeStyle = 'black';\n    ctx.lineWidth = 8;\n    ctx.fillStyle = 'rgba(255, 255, 255, 1)';\n    ctx.strokeText(`${time}`, 15, HEIGHT - 100)\n    ctx.fillText(`${time}`, 15, HEIGHT - 100)\n}) as Renderer;\n\nexport function timerReducer(object: GameObject, state: GameState){\n    if(!isTimer(object)) return state;\n\n    const timer = object as Timer;\n\n    const elapsed = state.frameNumber - timer.startedAt\n\n    const remaining = timer.duration - elapsed\n\n    if(remaining <= 0 && !state.isPaused){\n        return {\n            ...state,\n            isPaused: true,\n            canPause: false,\n            objects: [\n                ...state.objects,\n                ...loadFinishedLevelMenu(state)\n            ]\n        }\n    } else {\n        return state\n    }\n}\n","import { coalesceX, coalesceY, Dimension } from \"Dimensions\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState } from \"State\";\nimport { createWithBoundingbox, createWithId, HasBoundingbox, HasId, HasOverlay, HasRenderer } from \"Traits\";\n\n\nexport type StarDisplay = HasId & HasBoundingbox & HasRenderer & HasOverlay & {\n    score: number;\n    fadeInFrom: number | null;\n    labels: string[];\n};\n\nexport const createStarDisplay = (score: 0 | 1 | 2 | 3, width: Dimension, x: Dimension = 0, y: Dimension = 0, fadeInFrom: number | null = null, labels: string[] = []): StarDisplay => ({\n    ...createWithId(),\n    ...createWithBoundingbox(width, (coalesceX(width) / 3), x, y),\n    hasOverlay: true,\n    render,\n    score,\n    fadeInFrom,\n    labels\n})\n\nexport function render(state: GameState, object: GameObject, ctx: CanvasRenderingContext2D) {\n    const starDisplay = object as StarDisplay;\n\n    const { score, labels } = starDisplay;\n    const { width, x, y } = starDisplay.boundingbox;\n\n    let alpha1 = 1, alpha2 = 1, alpha3 = 1;\n\n    if(starDisplay.fadeInFrom !== null){\n        const startAt = starDisplay.fadeInFrom\n        const duration = 1000;\n        const elapsed = Date.now() - startAt;\n        if(elapsed < 0){\n            alpha1 = 0;\n            alpha2 = 0;\n            alpha3 = 0;\n        } else {\n            alpha1 = elapsed / duration\n            alpha2 = (elapsed - duration)  / duration\n            alpha3 = (elapsed - duration * 2)  / duration\n        }\n    }\n\n    let color1 = score > 0 ? `rgba(250, 198, 42, ${alpha1})` : 'rgba(194, 189, 174, 1)';\n    let color2 = score > 1 ? `rgba(250, 198, 42, ${alpha2})` : 'rgba(194, 189, 174, 1)';\n    let color3 = score > 2 ? `rgba(250, 198, 42, ${alpha3})` : 'rgba(194, 189, 174, 1)';\n\n    renderStar(ctx, width/3, x - width*.4, y, color1, labels[0])\n    renderStar(ctx, width/3, x, y, color2, labels[1])\n    renderStar(ctx, width/3, x + width*.4, y, color3, labels[2])\n}\n\nfunction renderStar(ctx: CanvasRenderingContext2D, sideLength: Dimension, x: Dimension, y: Dimension, color: string, label?: string) {\n    const outerRadius = coalesceX(sideLength) / 2\n    const innerRadius = outerRadius / 2\n\n    let rot: number = Math.PI / 2 * 3;\n    const cx = coalesceX(x);\n    const cy = coalesceY(y);\n    x = cx;\n\n    y = cy;\n    const step = Math.PI / 5;\n\n    ctx.beginPath();\n    ctx.moveTo(cx, cy - outerRadius)\n    for (let i = 0; i < 5; i++) {\n        x = cx + Math.cos(rot) * outerRadius;\n        y = cy + Math.sin(rot) * outerRadius;\n        ctx.lineTo(x, y)\n        rot += step\n\n        x = cx + Math.cos(rot) * innerRadius;\n        y = cy + Math.sin(rot) * innerRadius;\n        ctx.lineTo(x, y)\n        rot += step\n    }\n    ctx.lineTo(cx, cy - outerRadius);\n    ctx.closePath();\n    ctx.lineWidth = 5;\n    ctx.strokeStyle = color;\n    ctx.stroke();\n    ctx.fillStyle = color;\n    ctx.fill();\n\n    if(label){\n        ctx.textAlign = 'center';\n        ctx.fillText(label, cx, cy + outerRadius + 10)\n    }\n}","export type CanBlockMovement = {\n    canBlockMovement: true;\n}\n\nexport const canBlockMovement = (x: any): x is CanBlockMovement => Boolean(x?.canBlockMovement)\n\nexport const createCanBlockMovement = (): CanBlockMovement => ({\n    canBlockMovement: true\n})\n","import { ControllerId, Controls } from \"Controls\"\nimport { coalesceX, coalesceZ, createVector, Direction, GAME_HEIGHT_STUDS, GAME_WIDTH_STUDS } from \"Dimensions\";\nimport { GameState, GameObject, updateGameObjectById } from \"State\";\nimport { canBlockMovement } from \"./CanBlockMovement\";\nimport { CanFaceADirection, createCanFaceADirection } from \"./CanFaceADirection\";\nimport { hasCollision, HasHitBox, moveObject } from \"./HasHitbox\";\n\nexport type CanBeControlled = CanFaceADirection & {\n    controllerId: ControllerId;\n    facing: Direction;\n    moving: boolean;\n    startedDashAt: null | number;\n}\n\nexport const createCanBeControlled = (controllerId: ControllerId, facing: Direction = 'south'): CanBeControlled => ({\n    ...createCanFaceADirection(facing),\n    controllerId,\n    moving: false,\n    startedDashAt: null\n})\n\nexport const canBeControlled = (x: any): x is CanBeControlled => typeof x.controllerId !== 'undefined'\n\nexport function canBeControlledReducer(object: GameObject, state: GameState): GameState {\n    if(!canBeControlled(object) || state.isPaused) return state;\n\n    const controller = Controls[object.controllerId];\n\n    let facing: Direction;\n    if(controller.isPressed('up')){\n        facing = 'north';\n    } else if(controller.isPressed('down')){\n       facing = 'south';\n    } else if(controller.isPressed('left')){\n        facing = 'west';\n    } else if(controller.isPressed('right')){\n        facing = 'east';\n    } else {\n        facing = object.facing;\n    }\n\n    let moving = controller.isPressed('up') || controller.isPressed('down') || controller.isPressed('left') || controller.isPressed('right');\n\n    object = {\n        ...object,\n        facing,\n        moving,\n    }\n\n    let speed = '0.25studs';\n\n    if(controller.justPressed('bumper')){\n        object = {\n            ...object,\n            startedDashAt: state.frameNumber\n        }\n    }\n\n    if(object.startedDashAt && object.startedDashAt > state.frameNumber - 3.5){\n        speed = '1studs'\n    }\n\n    if (object.moving) {\n        const movedObject = moveObject(object, createVector(speed, object.facing));\n        const blockers = state.objects.filter(canBlockMovement);\n\n        if(!hasCollision(movedObject, blockers) && !outsidePlayArea(movedObject)) {\n            object = movedObject\n        }\n    }\n\n    return {\n        ...state,\n        objects: updateGameObjectById(state.objects, object)\n    };\n}\n\nfunction outsidePlayArea(object: HasHitBox){\n\n    if(object.hitbox.x < 0) return true;\n    if(object.hitbox.x + object.hitbox.dx > coalesceX(`${GAME_WIDTH_STUDS}studs`)) return true;\n    if(object.hitbox.z < 0) return true;\n    if(object.hitbox.z + object.hitbox.dz > coalesceZ(`${GAME_HEIGHT_STUDS}studs`)) return true;\n\n    return false\n}","import { Controls } from \"Controls\";\nimport { Character, isFinishedFryer, isTray, Tray } from \"Objects\";\nimport { GameObject, GameState, updateGameObjectById } from \"State\";\nimport { canProvide, filter } from \"Traits\";\nimport { CanBeCarried, canBeCarried, canBePickedUp } from \"./CanBeCarried\";\nimport { CanBeControlled, canBeControlled } from \"./CanBeControlled\";\nimport { getObjectsInfrontOf } from \"./CanFaceADirection\";\nimport { hasHitbox, HasHitBox } from \"./HasHitbox\";\n\nexport type CanCarry = {\n    carrying: null | number;\n    canCarry: true;\n}\n\nexport const canCarry = (x: any): x is CanCarry => Boolean(x?.canCarry)\n\nexport const createCanCarry = (): CanCarry => ({\n    carrying: null,\n    canCarry: true\n})\n\nexport function canCarryReducer(object: GameObject, state: GameState): GameState {\n    if(!canCarry(object) || !canBeControlled(object)) return state;\n\n    let carrier = object as Character;\n\n    const controller = Controls[carrier.controllerId];\n\n    let objects = state.objects\n\n    if (controller.justReleased('primaryAction')) {\n\n        const whatsBeingCarried = carrier.carrying\n            ? objects.find( x => x.id === carrier.carrying) as GameObject & CanBeCarried & HasHitBox\n            : null\n\n        if(whatsBeingCarried?.canBeDropped(objects)){\n            objects = whatsBeingCarried.handleDrop(objects, state.frameNumber);\n\n            carrier = {\n                ...carrier,\n                carrying: null\n            }\n\n            objects = updateGameObjectById(objects, carrier)\n\n            return { ...state, objects}\n        }\n\n        if(whatsBeingCarried && !isTray(whatsBeingCarried)){\n            return state;\n        }\n\n        const tray = whatsBeingCarried as null | Tray;\n\n        let targets = objects.filter( object => object.id !== tray?.id);\n\n        let [ objectToPickUp ] = getObjectsInfrontOf(object, filter(targets, canBePickedUp, hasHitbox));\n        const [ provider ] = getObjectsInfrontOf(object, filter(targets, canProvide))\n        const [ finishedFryer ] = getObjectsInfrontOf(object, filter(targets, isFinishedFryer))\n\n        if(!objectToPickUp && provider) {\n            let provided = provider.provide();\n            if(isTray(provided) && tray){\n\n            } else {\n                objectToPickUp = provided;\n                objects = [ ...objects, objectToPickUp ]\n            }\n        }\n\n        if(!objectToPickUp && finishedFryer){\n            ([objects, objectToPickUp] = finishedFryer.retrieve(objects));\n        }\n\n        if (objectToPickUp && !tray) {\n            objects = objectToPickUp.handlePickedUpBy(carrier, objects);\n            carrier = {\n                ...carrier,\n                carrying: objectToPickUp.id\n            }\n        }\n\n        if(objectToPickUp && tray && tray.canHandleDrop(objectToPickUp)){\n            objects = objectToPickUp.handlePickedUpBy(carrier, objects)\n            objects = tray.handleDropped(objectToPickUp, objects, state.frameNumber)\n        }\n\n    }\n\n    return {\n        ...state,\n        objects: updateGameObjectById(objects, carrier)\n    }\n}\n","import { Controls } from \"Controls\";\nimport { Character, isCuttingBoard } from \"Objects\";\nimport { AssetManager } from \"Renderer\";\nimport { GameObject, GameState, updateGameObjectById } from \"State\";\nimport { filter } from \"Traits\";\nimport { canBeControlled } from \"./CanBeControlled\";\nimport { canCarry } from \"./CanCarry\";\nimport { getObjectsInfrontOf } from \"./CanFaceADirection\";\n\n\nexport type CanChop = {\n    canChop: true;\n    chopping: boolean;\n}\n\nexport const canChop = (x: any): x is CanChop => Boolean(x?.canChop)\n\nexport const createCanChop = (): CanChop => ({\n    canChop: true,\n    chopping: false,\n})\n\nexport function canChopReducer(object: GameObject, state: GameState): GameState {\n    if(!canChop(object) || !canBeControlled(object) || !canCarry(object)) return state;\n\n    const controller = Controls[object.controllerId];\n\n    let chopper = object as Character;\n\n    let objects = state.objects;\n\n    chopper = {\n        ...chopper,\n        chopping: false\n    }\n\n    if (controller.isPressed('secondaryAction') && object.carrying === null && !state.isPaused){\n        const [ cuttingBoard ] = getObjectsInfrontOf(object, filter(state.objects, isCuttingBoard));\n\n        if(cuttingBoard && cuttingBoard.canChop()){\n            chopper = {\n                ...chopper,\n                chopping: true\n            }\n            objects = updateGameObjectById(objects, chopper)\n            objects = cuttingBoard.chop(chopper, objects);\n            chopper = objects.find( object => object.id === chopper.id) as Character\n        }\n    }\n\n    let track = AssetManager.loadAliasedAudio(`chopping.${chopper.id}`, 'chopping.mp3');\n    if(chopper.chopping){\n        track.play(0.15);\n    }\n\n    objects = updateGameObjectById(objects, chopper)\n\n    return {\n        ...state,\n        objects\n    }\n}\n","import { GameObject } from \"State\";\nimport { CanBeCarried } from \"./CanBeCarried\";\nimport { HasHitBox } from \"./HasHitbox\";\n\ntype Provide = () => GameObject & HasHitBox & CanBeCarried\n\nexport type CanProvide = {\n    canProvide: true;\n    provide: Provide\n}\n\nexport const canProvide = (x: any): x is CanProvide => Boolean(x?.canProvide)\n\nexport const createCanProvide = (provide: Provide): CanProvide => ({\n    canProvide: true,\n    provide\n})\n","export type HasId = {\n    id: number\n}\n\nlet idSerial = 1;\n\nexport const createWithId = () => ({\n    id: idSerial++\n})","\n\nexport type HasOverlay = {\n    hasOverlay: true;\n}\n\nexport const createHasOverlay = (): HasOverlay => ({\n    hasOverlay: true\n})\n\nexport const hasOverlay = (x: any): x is HasOverlay => x.hasOverlay","import { Controls } from \"Controls\";\nimport { Character, isBreadingTable } from \"Objects\";\nimport { AssetManager } from \"Renderer\";\nimport { GameObject, GameState, updateGameObjectById } from \"State\";\nimport { filter, HasHitBox } from \"Traits\";\nimport { canBeControlled } from \"./CanBeControlled\";\nimport { canCarry } from \"./CanCarry\";\nimport { CanFaceADirection, getObjectsInfrontOf } from \"./CanFaceADirection\";\n\n\nexport type CanBread = {\n    canBread: true;\n    breading: boolean;\n}\n\nexport const canBread = (x: any): x is CanBread => Boolean(x?.canBread)\n\nexport const createCanBread = (): CanBread => ({\n    canBread: true,\n    breading: false,\n})\n\nexport function canBreadReducer(object: GameObject, state: GameState): GameState {\n    if(!canBread(object) || !canBeControlled(object)) return state;\n\n    const controller = Controls[object.controllerId];\n\n    let breader = object as Character;\n\n    let objects = state.objects;\n\n    breader = {\n        ...breader,\n        breading: false\n    }\n\n    if (controller.isPressed('secondaryAction') && breader.carrying === null && !state.isPaused){\n        const [ breadingTable ] = getObjectsInfrontOf(breader, filter(state.objects, isBreadingTable));\n\n        if(breadingTable && breadingTable.canBread()){\n            breader = {\n                ...breader,\n                breading: true\n            }\n            objects = updateGameObjectById(objects, breader)\n            objects = breadingTable.bread(breader, objects, state.frameNumber);\n            breader = objects.find( object => object.id === breader.id) as Character\n        }\n    }\n    let track = AssetManager.loadAliasedAudio(`breading.${breader.id}`, 'breading.mp3');\n    if(breader.breading){\n        track.play();\n    }\n\n    objects = updateGameObjectById(objects, breader)\n\n    return {\n        ...state,\n        objects\n    }\n}\n","import { coalesceX, coalesceY, coalesceZ, Dimension, Pixels } from \"Dimensions\";\n\nexport type Boundingbox = {\n    x: Pixels;\n    y: Pixels;\n    width: Pixels;\n    height: Pixels;\n}\n\nexport type HasBoundingbox = {\n    boundingbox: Boundingbox\n}\n\nexport const HasBoundingbox = (x: any): x is HasBoundingbox => typeof x.boundingbox !== 'undefined'\n\nexport function createWithBoundingbox(width: Dimension, height: Dimension, x: Dimension = 0, y: Dimension = 0): HasBoundingbox {\n    return {\n        boundingbox: {\n            width: coalesceX(width),\n            height: coalesceY(height),\n            x: coalesceX(x),\n            y: coalesceY(y)\n        }\n    }\n}","import { coalesceX, coalesceY, coalesceZ, Dimension, Pixels, Vector } from \"Dimensions\";\n\nexport type Origin = {\n    x: Pixels;\n    y: Pixels;\n}\n\nexport type HasOrigin = {\n    origin: Origin\n}\n\nexport const hasOrigin = (x: any): x is HasOrigin => typeof x.origin !== 'undefined'\n\n\nexport function createWithOrigin( x: Dimension = 0,  y: Dimension = 0): HasOrigin {\n    return {\n        origin: {\n            x: coalesceX(x),\n            y: coalesceY(y)\n        }\n    }\n}\n","export * from './CanBeCarried'\nexport * from './CanCarry'\nexport * from './CanFaceADirection'\nexport * from './CanBeControlled'\nexport * from './CanBlockMovement'\nexport * from './CanHandleDrop'\nexport * from './CanChop'\nexport * from './CanProivde'\nexport * from './HasCounterSpace'\nexport * from './HasRenderer'\nexport * from './HasHitbox'\nexport * from './HasId'\nexport * from './HasOverlay'\nexport * from './CanBread'\nexport * from './HasBoundingbox'\nexport * from './HasOrigin'\n\n\nexport const filter = <I, T1, T2, T3, T4>(\n    objects: I[], \n    callback1: (object: any) => object is T1,\n    callback2?: (object: any) => object is T2,\n    callback3?: (object: any) => object is T3,\n    callback4?: (object: any) => object is T4\n): (I & T1 & T2 & T3 & T4)[] => {\n    // @ts-ignore\n    return objects.filter((object: any): object is T1 & T2 & T3 & T4 => {\n        return callback1(object) \n            && (!callback2 || callback2(object))\n            && (!callback3 || callback3(object))\n            && (!callback4 || callback4(object))\n    })\n}","import { HEIGHT, WIDTH } from \"Dimensions\";\nimport { GameState } from \"State\";\nimport { hasHitbox, hasOverlay, hasRenderer } from \"Traits\";\n\nexport function createGameRenderer(canvas: HTMLCanvasElement){\n    canvas.style.width = '100vw';\n    canvas.style.height = '100vh';\n    canvas.width = WIDTH;\n    canvas.height = HEIGHT;\n\n    const ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n\n    function renderFrame(state: GameState){\n        // Clear the Canvas\n        ctx.clearRect(\n            0,\n            0,\n            WIDTH,\n            HEIGHT\n        );\n\n        // Sort objects with hitboxes on the z-axis\n        const objects  = [ ...state.objects ].sort( (a, b) => {\n            if(hasOverlay(a) && !hasOverlay(b)){\n                return 1\n            }\n            if(!hasOverlay(a) && hasOverlay(b)){\n                return -1\n            }\n            if(hasHitbox(a) && hasHitbox(b)){\n                if(b.hitbox.z == a.hitbox.z) return a.hitbox.y - b.hitbox.y;\n                return b.hitbox.z - a.hitbox.z;\n            }\n            if(hasHitbox(a) && !hasHitbox(b)){\n                return 1\n            }\n            if(!hasHitbox(a) && hasHitbox(b)){\n                return -1;\n            }\n            return 0;\n        });\n\n        // Render All Objects\n        objects.forEach( object => {\n            if(hasRenderer(object)){\n                ctx.save();\n                object.render(state, object, ctx);\n                ctx.restore();\n            }\n        })\n    }\n\n    return renderFrame;\n}\n\n","import { GameObject, GameState } from \"State\";\n\nexport type HasRenderer = {\n    render: Renderer;\n}\n\nexport const hasRenderer = (x: any): x is HasRenderer => Boolean(x.render)\n\nexport type Renderer = (state: GameState, object: GameObject, ctx: CanvasRenderingContext2D) => void;","import { GameObject, GameState } from \"State\";\nimport { Renderer } from \"Traits\";\n\nexport const combineRenderers = (...renderers: Renderer[]): Renderer => {\n    return (state: GameState, object: GameObject, ctx: CanvasRenderingContext2D) => {\n        renderers.forEach( renderer => renderer(state, object, ctx))\n    }\n}","import { coalesceX, Dimension, HEIGHT, Pixels } from \"Dimensions\";\nimport { Animations, Animation } from \"Renderer\";\nimport { AssetManager } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState } from \"State\";\nimport { Renderer, HasHitBox, Hitbox, HasBoundingbox } from \"Traits\";\n\nexport const create2DRenderer = <T extends GameObject & HasBoundingbox>(options: Create2DRendererOptions<T>): Renderer => {\n    const renderer = function(this: HasBoundingbox, state: GameState, object: T, ctx: CanvasRenderingContext2D){\n        const { spriteKey, speed, fade } = process2DRendererOptions(options, object, state);\n\n        let { width, height, x, y } = object.boundingbox;\n\n        if(spriteKey == null) return;\n\n        const animation = Animations[spriteKey];\n\n        const numberOfSyntheticFrames = Math.ceil(animation.numberOfFrames / speed)\n\n        const ratio = animation.numberOfFrames / numberOfSyntheticFrames\n\n        const currentSyntheticAnimationFrame = state.frameNumber % numberOfSyntheticFrames+1;\n\n        const currentAnimationFrame = Math.max(1, Math.min(Math.ceil(currentSyntheticAnimationFrame * ratio), animation.numberOfFrames))\n\n        width = width || animation.size.width as Pixels;\n\n        const scale = width / animation.size.width;\n\n        height = animation.size.height * scale as Pixels\n\n        if(fade){\n            const { startAt, duration } = fade;\n            const elapsed = state.frameNumber - startAt;\n            const finalFrame = duration / MS_PER_FRAME ;\n            ctx.globalAlpha = elapsed / finalFrame\n        }\n\n        ctx.drawImage(\n            AssetManager.getImage(spriteKey + `/${currentAnimationFrame}.png`),\n            x,\n            y,\n            width,\n            height\n        );\n            \n        ctx.globalAlpha = 1;\n    }\n\n    return renderer as Renderer;\n}\n\ntype SpriteKey = keyof typeof Animations | null;\ntype SpriteKeyOption<T> = SpriteKey | ((object: T, state: GameState) => SpriteKey);\ntype SpeedOption<T> = number | ((object: T, state: GameState) => number);\n\nexport type Create2DRendererOptions<T> = SpriteKeyOption<T> | { \n    sprite: SpriteKeyOption<T>, \n    fade?: { startAt: number, duration: number }\n    speed?: SpeedOption<T> \n};\n\nexport function process2DRendererOptions<T>(options: Create2DRendererOptions<T>, object: T, state: GameState) {\n    let spriteKey, speed, fade;\n\n    if(options === null){\n        speed = 1;\n        spriteKey = null;\n    } else if (typeof options === 'function') {\n        speed = 1;\n        spriteKey = options(object, state);\n    } else if (typeof options !== 'object') {\n        speed = 1;\n        spriteKey = options\n    } else {\n        spriteKey = typeof options.sprite === 'function' ? options.sprite(object, state) : options.sprite\n        speed = typeof options.speed === 'function' ? options.speed(object, state) : (options.speed || 1)\n        fade = options.fade\n    }\n\n    speed = Math.min(1, speed)\n\n    return { spriteKey, speed, fade }\n}\n\n","import { coalesceX, Dimension, HEIGHT, Pixels } from \"Dimensions\";\nimport { Animations, Animation } from \"Renderer\";\nimport { AssetManager } from \"Renderer\";\nimport { GameObject, GameState } from \"State\";\nimport { Renderer, HasHitBox, Hitbox } from \"Traits\";\n\n\nexport const create3DRenderer = <T extends GameObject & HasHitBox>(options: Create3DRendererOptions<T>): Renderer => {\n    const renderer = (state: GameState, object: T, ctx: CanvasRenderingContext2D) => {\n        const { spriteKey, padding, speed } = process3DRendererOptions(options, object, state);\n\n        if(spriteKey == null) return;\n\n        const animation = Animations[spriteKey];\n\n        const numberOfSyntheticFrames = Math.ceil(animation.numberOfFrames / speed)\n\n        const ratio = animation.numberOfFrames / numberOfSyntheticFrames\n\n        const currentSyntheticAnimationFrame = state.frameNumber % numberOfSyntheticFrames+1;\n\n        const currentAnimationFrame = Math.max(1, Math.min(Math.ceil(currentSyntheticAnimationFrame * ratio), animation.numberOfFrames))\n\n        if (animation.sideview) {\n            ctx.drawImage(\n                AssetManager.getImage(`${spriteKey}/${currentAnimationFrame}.sideview.png`),\n                ...getSpriteCoords({ ...object.hitbox, y: 0 as Pixels }, animation.sideview.size)\n            )\n        }\n\n        ctx.drawImage(\n            AssetManager.getImage(spriteKey + `/${currentAnimationFrame}.png`),\n            ...getSpriteCoords(object.hitbox, animation.size, padding)\n        );\n    }\n\n    return renderer as Renderer;\n}\n\n\ntype SpriteKey = keyof typeof Animations | null;\n\ntype SpriteKeyOption<T> = SpriteKey | ((object: T, state: GameState) => SpriteKey);\ntype SpeedOption<T> = number | ((object: T, state: GameState) => number);\n\nexport type Create3DRendererOptions<T> = SpriteKeyOption<T> | { sprite: SpriteKeyOption<T>, speed?: SpeedOption<T>, padding?: Dimension };\n\nexport function process3DRendererOptions<T>(options: Create3DRendererOptions<T>, object: T, state: GameState) {\n    let spriteKey, padding, speed;\n\n    if(options === null){\n        padding = 0;\n        speed = 1;\n        spriteKey = null;\n    } else if (typeof options === 'function') {\n        padding = 0;\n        speed = 1;\n        spriteKey = options(object, state);\n    } else if (typeof options !== 'object') {\n        padding = 0;\n        speed = 1;\n        spriteKey = options\n    } else {\n        spriteKey = typeof options.sprite === 'function' ? options.sprite(object, state) : options.sprite\n        speed = typeof options.speed === 'function' ? options.speed(object, state) : (options.speed || 1)\n        padding = coalesceX(options.padding || 0)\n    }\n\n    speed = Math.min(1, speed)\n\n    return { spriteKey, padding, speed }\n}\n\n\nexport function getSpriteCoords(hitbox: Hitbox, size: Animation['size'], padding: number = 0): [number, number, number, number] {\n    const scale = (hitbox.dx + padding) / size.width;\n\n    const width = hitbox.dx + padding;\n\n    const height = size.height * scale;\n\n    const x = hitbox.x - (padding / 2);\n\n    const y = HEIGHT - (hitbox.z + hitbox.y + (height) + padding / 3);\n\n    return [x, y, width, height]\n}\n","import { coalesceX, Dimension } from \"Dimensions\";\nimport { FoodItemId, Tray } from \"Objects\";\nimport { Animations, getSpriteCoords } from \"Renderer\";\nimport { AssetManager } from \"Renderer\";\nimport { GameObject, GameState } from \"State\";\nimport { HasHitBox, Renderer } from \"Traits\";\nimport { renderFoodItemsInArea } from \"./renderFoodItemsInArea\";\n\n\nexport const createContentRenderer = <T extends GameObject & HasHitBox>(options: CreateContentRendererOptions<T>): Renderer => {\n    const renderer = (state: GameState, object: T, ctx: CanvasRenderingContext2D) => {\n        const { spriteKey, content } = processContentRendererOptions(options, object)\n\n        const objectAnimation = Animations[spriteKey];\n\n        const [ x, y, width, height ] = getSpriteCoords(object.hitbox, objectAnimation.size);\n\n        const foodItems = Object.keys(content) as FoodItemId[]\n    \n        const presentFoodItems = foodItems.filter( (foodItem) => content[foodItem] !== 0);\n\n        renderFoodItemsInArea({ x, y, width, height }, presentFoodItems, ctx)\n    }\n\n    return renderer as Renderer;\n}\n\ntype SpriteKey = keyof typeof Animations;\ntype Content = Partial<Record<FoodItemId, number>>;\n\ntype SpriteKeyOption<T> = SpriteKey | ((object: T) => keyof typeof Animations);\ntype ContentOption<T> = FoodItemId | null | Content | ((object: T) => FoodItemId | null | Content);\n\n\nexport type CreateContentRendererOptions<T> = { sprite: SpriteKeyOption<T>, content: ContentOption<T> };\n\nexport function processContentRendererOptions<T>(options: CreateContentRendererOptions<T>, object: T) {\n    let spriteKey = typeof options.sprite === 'function' ? options.sprite(object) : options.sprite\n    let content: Content;\n\n    let contentOption;\n    if(typeof options.content === 'function'){\n       contentOption = options.content(object)\n    } else {\n        contentOption = options.content\n    }\n\n    if(contentOption === null){\n        content = {}\n    } else if(typeof contentOption === 'object'){\n        content = contentOption\n    } else {\n        content = {\n            [contentOption]: 1\n        }\n    }\n\n    return { spriteKey, content }\n}","import { CuttingBoard } from \"Objects\";\nimport { Animations, Create3DRendererOptions, getSpriteCoords, process3DRendererOptions } from \"Renderer\";\nimport { GameObject, GameState } from \"State\";\nimport { HasHitBox, Renderer } from \"Traits\";\n\ntype HasProgress = {\n    progress: null | number\n}\n\nexport const createProgressRenderer = (options: Create3DRendererOptions<GameObject & HasHitBox & HasProgress>): Renderer => {\n    const renderer = (state: GameState, object: GameObject & HasHitBox & HasProgress, ctx: CanvasRenderingContext2D) => {\n        const { spriteKey } = process3DRendererOptions(options, object, state)\n\n        if(spriteKey === null) return;\n\n        const objectAnimation = Animations[spriteKey];\n\n        const [ objectX, objectY, objectWidth, objectHeight ] = getSpriteCoords(object.hitbox, objectAnimation.size);\n\n        if(object.progress !== null) {\n            ctx.beginPath();\n            ctx.lineWidth = 5\n            ctx.strokeStyle = 'white';\n            ctx.moveTo(objectX, objectY);\n            ctx.lineTo(objectX + objectWidth, objectY);\n            ctx.stroke();\n\n            ctx.beginPath();\n            ctx.strokeStyle = '#5e9b4a';\n            ctx.moveTo(objectX, objectY);\n            ctx.lineTo(objectX + (objectWidth * object.progress), objectY);\n            ctx.stroke();\n        }\n\n    }\n\n    return renderer as Renderer;\n}\n","import { coalesceX, Dimension, HEIGHT, Pixels } from \"Dimensions\";\nimport { Animations, Animation } from \"Renderer\";\nimport { AssetManager } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState } from \"State\";\nimport { Renderer, HasHitBox, Hitbox, HasBoundingbox, HasOrigin } from \"Traits\";\n\nexport const createTextRenderer = <T extends GameObject & HasOrigin>(options: CreateTextRendererOptions<T>): Renderer => {\n    const renderer = function(this: HasBoundingbox, state: GameState, object: T, ctx: CanvasRenderingContext2D){\n        let { x, y } = object.origin;\n        renderText(ctx, state, x, y, processTextRendererOptions(options, object, state))\n    }\n\n    return renderer as Renderer;\n}\n\nexport function renderText(ctx: CanvasRenderingContext2D, state: GameState, x: number, y: number, options: ReturnType<typeof processTextRendererOptions>){\n    const { text, font, fade, align, baseline, color } = options;\n\n    if(text === null) return;\n\n    if(fade){\n        const { startAt, duration, loop } = fade;\n        const elapsed = state.frameNumber - startAt;\n        const finalFrame = duration / MS_PER_FRAME ;\n        if(elapsed < 0){\n            ctx.globalAlpha = 0\n        }else if(!loop || elapsed < finalFrame){\n            ctx.globalAlpha = elapsed / finalFrame\n        } else {\n            let currentIteration = Math.floor(elapsed / finalFrame)\n            let elapsedThisIteration = (elapsed % finalFrame) / finalFrame;\n            if(currentIteration % 2 == 0){ // Fade In\n                ctx.globalAlpha = elapsedThisIteration\n            } else { // Fade Out\n                ctx.globalAlpha = 1-elapsedThisIteration\n            }\n        }\n    }\n\n    ctx.save();\n    if(font){\n        ctx.font = font\n    }\n\n    ctx.fillStyle = color\n    ctx.textAlign = align;\n    ctx.textBaseline = baseline;\n\n    ctx.fillText(\n        text,\n        x,\n        y,\n    );\n\n    ctx.restore()\n    ctx.globalAlpha = 1;\n}\n\ntype TextOption<T> = string | ((object: T, state: GameState) => string);\n\nexport type CreateTextRendererOptions<T> = TextOption<T> | {\n    text: TextOption<T>,\n    font?: string,\n    color?: string,\n    baseline?: CanvasTextBaseline,\n    align?: CanvasTextAlign,\n    fade?: { startAt: number, duration: number, loop?: boolean }\n};\n\nexport function processTextRendererOptions<T>(options: CreateTextRendererOptions<T>, object: T, state: GameState) {\n    let text, font, fade;\n    let color = 'black'\n    let align: CanvasTextAlign = 'center';\n    let baseline: CanvasTextBaseline = 'middle';\n\n    if(options === null){\n        text = null;\n    } else if (typeof options === 'function') {\n        text = options(object, state);\n    } else if (typeof options !== 'object') {\n        text = options\n    } else {\n        text = typeof options.text === 'function' ? options.text(object, state) : options.text\n        align = options.align || align\n        baseline = options.baseline || baseline\n        color = options.color || color\n        font = options.font\n        fade = options.fade\n    }\n\n    return { text, fade, font, color, align, baseline }\n}\n\n","import { coalesceX, Dimension, HEIGHT, Pixels } from \"Dimensions\";\nimport { Button } from \"Menus\";\nimport { Animations, Animation } from \"Renderer\";\nimport { AssetManager } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState } from \"State\";\nimport { Renderer, HasHitBox, Hitbox, HasBoundingbox } from \"Traits\";\n\nexport const createButtonRenderer = (options: CreateButtonRendererOptions<Button>): Renderer => {\n    const renderer = function(this: HasBoundingbox, state: GameState, button: Button, ctx: CanvasRenderingContext2D){\n        const { text, fade, align, baseline, color } = processButtonRendererOptions(options, button, state);\n\n        let { x, y } = button.origin;\n\n        if(text === null) return\n\n        if(fade){\n            const { startAt, duration } = fade;\n            const elapsed = state.frameNumber - startAt;\n            const finalFrame = duration / MS_PER_FRAME ;\n            ctx.globalAlpha = elapsed / finalFrame\n        }\n\n        ctx.fillStyle = color;\n        ctx.strokeStyle = color;\n\n        ctx.font = '40px apercu-medium'\n        ctx.textAlign = align;\n        ctx.textBaseline = baseline;\n\n        const { width, fontBoundingBoxDescent, actualBoundingBoxLeft } = ctx.measureText(text)\n\n        ctx.fillText(\n            text,\n            x,\n            y,\n        );\n\n        if(button.isSelected){\n            ctx.beginPath();\n            ctx.setLineDash([ 5, 5 ])\n            ctx.moveTo(x - actualBoundingBoxLeft, y + fontBoundingBoxDescent);\n            ctx.lineTo(x + width - actualBoundingBoxLeft, y + fontBoundingBoxDescent);\n            ctx.stroke();\n            ctx.setLineDash([])\n        }\n\n        ctx.globalAlpha = 1;\n    }\n\n    return renderer as Renderer;\n}\n\ntype TextOption<T> = string | ((object: T, state: GameState) => string);\n\nexport type CreateButtonRendererOptions<T> = TextOption<T> | {\n    text: TextOption<T>\n    fade?: { startAt: number, duration: number }\n    align?: CanvasTextAlign;\n    baseline?: CanvasTextBaseline\n    color?: string\n};\n\nexport function processButtonRendererOptions<T>(options: CreateButtonRendererOptions<T>, object: T, state: GameState) {\n    let text, fade;\n\n    let align: CanvasTextAlign = 'center';\n    let baseline: CanvasTextBaseline = 'middle'\n    let color = 'black'\n\n    if(options === null){\n        text = null;\n    } else if (typeof options === 'function') {\n        text = options(object, state);\n    } else if (typeof options !== 'object') {\n        text = options\n    } else {\n        text = typeof options.text === 'function' ? options.text(object, state) : options.text\n        fade = options.fade\n        align = options.align || align\n        baseline = options.baseline || baseline\n        color = options.color || color\n    }\n\n    return { text, fade, align, baseline, color  }\n}\n\n","import { coalesceX, Dimension, HEIGHT } from \"Dimensions\";\nimport { FoodItemId, Tray } from \"Objects\";\nimport { Animations, getSpriteCoords } from \"Renderer\";\nimport { AssetManager } from \"Renderer\";\nimport { GameObject, GameState } from \"State\";\nimport { HasHitBox, Renderer } from \"Traits\";\nimport { CanBeSpicy } from \"Traits/CanBeSpicy\";\nimport { renderFoodItemsInArea } from \"./renderFoodItemsInArea\";\n\n\nexport const createSpicyIconRenderer = <T extends GameObject & HasHitBox & CanBeSpicy>(): Renderer => {\n    const renderer = (state: GameState, object: T, ctx: CanvasRenderingContext2D) => {\n        const animation = Animations['spicy-icon'];\n\n        const scale = object.hitbox.dx / 3 / animation.size.width;\n\n        const width = object.hitbox.dx / 3\n        const height = animation.size.height * scale;\n        const x = object.hitbox.x + width\n        const y = HEIGHT - (object.hitbox.z + object.hitbox.y + height + 15);\n\n\n\n        if(object.isSpicy){\n            ctx.drawImage(\n                AssetManager.getImage(`spicy-icon.png`),\n                x, y, width, height\n            )\n        }\n    }\n\n    return renderer as Renderer;\n}\n","import { ControllerId, Controls } from \"Controls\";\nimport { coalesceX, coalesceY, Dimension } from \"Dimensions\";\nimport {  create2DRenderer, createTextRenderer, CreateTextRendererOptions } from \"Renderer\";\nimport { MS_PER_FRAME } from \"startGame\";\nimport { GameObject, GameState } from \"State\";\nimport {  createWithBoundingbox, createWithId, createWithOrigin, HasBoundingbox, HasId, HasOrigin, HasOverlay, HasRenderer } from \"Traits\";\nimport { loadLevelMenu } from \"./loadLevelMenu\";\n\nexport type GameText = HasId & HasOrigin & HasOverlay & HasRenderer;\n\nexport const createGameText = (options: CreateTextRendererOptions<GameText>, x: Dimension = 0, y: Dimension = 0, blink?: boolean): GameText => ({\n    ...createWithId(),\n    ...createWithOrigin(x, y),\n    hasOverlay: true,\n    render: createTextRenderer({\n        text: typeof options === 'string' ? options : '',\n        font: '40px apercu-medium',\n        color: '#e60e33',\n        fade: blink ? {\n            startAt: 25 * 2,\n            duration: 1000,\n            loop: true\n        } : undefined,\n        ...(typeof options === 'object' ? options : {})\n    })\n})","import { Controls } from \"Controls\";\nimport { coalesceX, coalesceY, Dimension } from \"Dimensions\";\nimport { createButtonRenderer, CreateButtonRendererOptions } from \"Renderer\";\nimport { GameObject, GameState, updateGameObjectById, updateGameObjectsWhere } from \"State\";\nimport { createWithBoundingbox, createWithId, createWithOrigin, filter, HasBoundingbox, HasId, HasOrigin, HasOverlay, HasRenderer } from \"Traits\";\n\nlet lastSelectionChange: null | number = null\n\nexport type Button = HasId & HasOrigin & HasRenderer & HasOverlay & {\n    isButton: true;\n    isSelected: boolean;\n    createdAt: number;\n    callback: (state: GameState) => GameState;\n};\n\nexport const isButton = (x: any): x is Button => x && x.isButton;\n\nexport const createButton = (options: CreateButtonRendererOptions<Button>, isSelected: boolean, x: Dimension = 0, y: Dimension = 0, callback: Button['callback']): Button => ({\n    ...createWithId(),\n    ...createWithOrigin(x, y),\n    render: createButtonRenderer(options),\n    isSelected,\n    isButton: true,\n    hasOverlay: true,\n    createdAt: Date.now(),\n    callback\n})\n\nexport function buttonReducer(object: GameObject, state: GameState) {\n    if (!isButton(object)) return state;\n\n    let button = object as Button;\n    let objects = state.objects;\n\n\n    for (let controller of Controls) {\n        if (controller.justPressed('primaryAction') && button.isSelected && button.createdAt < Date.now() - 500) {\n            return button.callback(state);\n        }\n\n        const justChangedSelection = lastSelectionChange !== null && lastSelectionChange > Date.now() - 250;\n        if ((controller.isPressed('down') || controller.isPressed('up')) && button.isSelected && !justChangedSelection) {\n            let direction = controller.isPressed('down') ? 1 : -1;\n\n            lastSelectionChange = Date.now();\n\n            button = {\n                ...button,\n                isSelected: false\n            }\n\n            objects = updateGameObjectById(objects, button)\n\n            let buttons = filter(objects, isButton)\n            for (let i = 0; i < buttons.length; i++) {\n                let currentButton = buttons[i];\n                let nextIndex = i + direction;\n                if (nextIndex >= buttons.length) nextIndex = 0;\n                if (nextIndex < 0) nextIndex = buttons.length - 1;\n                let nextButton = buttons[nextIndex];\n                if (currentButton.id === button.id) {\n                    nextButton = {\n                        ...nextButton,\n                        isSelected: true\n                    }\n                    objects = updateGameObjectById(objects, nextButton)\n                }\n            }\n        }\n\n        if (controller.justReleased('up') || controller.justReleased('down')) {\n            lastSelectionChange = null;\n        }\n    }\n\n    return {\n        ...state,\n        objects\n    };\n}","import { ControllerId, Controls } from \"Controls\";\nimport { coalesceX, coalesceY, Dimension, Pixels, WIDTH } from \"Dimensions\";\nimport { CharacterId, isCharacterUnlocked } from \"Objects\";\nimport { Animations, AssetManager, createTextRenderer, renderText } from \"Renderer\";\nimport { GameObject, GameState, updateGameObjectById, updateGameObjectsWhere } from \"State\";\nimport { createWithBoundingbox, createWithId, filter, HasBoundingbox, HasId, HasOverlay, HasRenderer } from \"Traits\";\n\nexport type CharacterMenu = HasId & HasRenderer & HasOverlay & {\n    isCharacterMenu: true;\n    selectedCharacters: Record<ControllerId, CharacterId | null>;\n};\n\nexport const isCharacterMenu = (x: any): x is CharacterMenu => x && x.isCharacterMenu;\n\nexport const createCharacterMenu = (): CharacterMenu => ({\n    ...createWithId(),\n    render,\n    isCharacterMenu: true,\n    hasOverlay: true,\n    selectedCharacters: {\n        1: null,\n        2: null,\n        3: null,\n        4: null\n    },\n})\n\ntype CharacterMatrix = CharacterId[][];\n\nconst characterMatrix: CharacterMatrix = [\n    ['jeannette','hoho',  'mandi', 'josh', 'julie', 'miles', 'lydia'],\n    ['truett',   'nonni', 'james', 'tori', 'charles', 'joy', 'isaac' ]\n]\n\nconst controllerColors: Record<ControllerId, string> = {\n    1: '#1455e8',\n    2: '#21e113',\n    3: '#edb22e ',\n    4: '#d11519'\n}\n\nexport function characterMenuReducer(object: GameObject, state: GameState) {\n    if (!isCharacterMenu(object)) return state;\n\n    let objects = state.objects;\n\n    let menu = object as CharacterMenu;\n\n    for(let controller of Controls){\n\n        let anyArrowPressed = controller.justPressed('up')\n            || controller.justPressed('down')\n            || controller.justPressed('left')\n            || controller.justPressed('right')\n\n        if(anyArrowPressed && state.selectedCharacters[controller.id] === null){\n            let newCharacterId: CharacterId;\n            let selectedCharacterIds = Object.values(menu.selectedCharacters);\n\n            let rowIndex, columnIndex, axis, direction;\n\n            if(menu.selectedCharacters[controller.id] === null){\n                rowIndex = 0;\n                columnIndex = -1;\n                axis = 'horizonal';\n                direction = +1;\n            } else {\n                let currentCharacterIdForPlayer = menu.selectedCharacters[controller.id] as CharacterId;\n                rowIndex = characterMatrix.findIndex( row => row.includes(currentCharacterIdForPlayer))\n                columnIndex = characterMatrix[rowIndex].indexOf(currentCharacterIdForPlayer)\n                axis = controller.justPressed('up') || controller.justPressed('down') ? 'vertical' : 'horizonal'\n                direction = controller.justPressed('up') || controller.justPressed('left') ? -1 : +1;\n            }\n\n            do {\n                if(axis === 'vertical') rowIndex = characterMatrix[rowIndex + direction]?.[columnIndex] ? rowIndex + direction : rowIndex;\n                else columnIndex = characterMatrix[rowIndex]?.[columnIndex + direction] ? columnIndex + direction : columnIndex;\n                newCharacterId = characterMatrix[rowIndex][columnIndex];\n            } while(selectedCharacterIds.includes(newCharacterId) && menu.selectedCharacters[controller.id] !== newCharacterId)\n\n            menu = {\n                ...menu,\n                selectedCharacters: {\n                    ...menu.selectedCharacters,\n                    [controller.id]: newCharacterId\n                }\n            }\n        }\n\n        let playersSelectedCharacter = menu.selectedCharacters[controller.id];\n\n        if(controller.justPressed('primaryAction') && playersSelectedCharacter && isCharacterUnlocked(state, playersSelectedCharacter)){\n            state = {\n                ...state,\n                selectedCharacters: {\n                    ...state.selectedCharacters,\n                    [controller.id]: playersSelectedCharacter\n                }\n            }\n        }\n\n        if(controller.justPressed('secondaryAction')){\n            state = {\n                ...state,\n                selectedCharacters: {\n                    ...state.selectedCharacters,\n                    [controller.id]: null\n                }\n            }\n        }\n\n    }\n\n    objects = updateGameObjectById(objects, menu);\n\n    return {\n        ...state,\n        objects\n    };\n}\n\n\nfunction render(state: GameState, object: GameObject, ctx: CanvasRenderingContext2D) {\n    let menu = object as CharacterMenu;\n    const menuWidth = coalesceX('80%');\n    const maxCharacterPerRow = Math.max(...characterMatrix.map(row => row.length))\n\n    const topMargin = coalesceY('20%');\n    const leftMargin = coalesceX('10%');\n    const menuHeight = coalesceY('80%');\n\n    if(Object.values(state.selectedCharacters).some( selection => selection !== null)){\n        renderText(ctx, state, coalesceX('90%'), coalesceY('5%'), {\n            text: 'Press Start When Ready',\n            align: 'right',\n            baseline: 'top',\n            font: '20px apercu-medium',\n            color: '#e60e33',\n            fade: {\n                startAt: 25 * 2,\n                duration: 1000,\n                loop: true\n            }\n        })\n    }\n\n    characterMatrix.forEach((row, yIndex) => {\n        row.forEach((characterId, xIndex) => {\n\n            const [ controllerId ] = (\n                Object.entries(menu.selectedCharacters)\n                    .find(([ controllerId, selectedCharacterId ]) => characterId === selectedCharacterId)\n                || []\n            )\n\n            const isSelected = controllerId && state.selectedCharacters[Number(controllerId) as ControllerId] === characterId\n\n            renderCharacterIcon(ctx, {\n                characterId,\n                locked: !isCharacterUnlocked(state, characterId),\n                sideLength: menuWidth / maxCharacterPerRow,\n                y: topMargin + (yIndex*(menuWidth / maxCharacterPerRow + 30)),\n                x: leftMargin + (xIndex*(menuWidth / maxCharacterPerRow)),\n                outlineColor: controllerId !== undefined ? controllerColors[Number(controllerId) as ControllerId] : undefined,\n                outlineWidth: isSelected ? 8 : 4\n            })\n        })\n    })\n}\n\ntype RenderCharacterIconOptions = {\n    x: number,\n    y: number,\n    sideLength: number,\n    characterId: CharacterId,\n    locked?: boolean\n    outlineColor?: string\n    outlineWidth?: number\n}\n\nfunction renderCharacterIcon(ctx: CanvasRenderingContext2D, { characterId, sideLength, x, y, outlineColor, outlineWidth = 4, locked  }: RenderCharacterIconOptions){\n    ctx.save();\n    ctx.beginPath();\n    ctx.arc(x + sideLength/2, y + sideLength/2, sideLength/2, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.clip();\n\n    ctx.drawImage(\n        AssetManager.getImage(`characters/${characterId}/${locked ? 'locked' : 'profile'}/1.png`),\n        x, y,\n        sideLength, sideLength\n    )\n\n    ctx.beginPath();\n    ctx.arc(x, y, sideLength/2, 0, Math.PI * 2, true);\n    ctx.clip();\n    ctx.closePath();\n    ctx.restore();\n\n    ctx.fillStyle = locked ? 'black' : '#e60e33'\n    ctx.font = '20px apercu-medium'\n    ctx.textAlign = 'center'\n    ctx.textBaseline = 'top'\n    ctx.fillText(locked ? 'locked' : characterId, x + sideLength/2, y + sideLength + 4)\n\n    if(outlineColor !== undefined){\n        ctx.beginPath();\n        ctx.strokeStyle = outlineColor\n        ctx.lineWidth = outlineWidth\n        ctx.arc(x + sideLength/2, y + sideLength/2, sideLength/2, 0, Math.PI * 2, true);\n        ctx.stroke();\n    }\n}\n","import { createCharacterMenu } from \"./CharacterMenu\";\nimport { createGameText } from \"./GameText\";\n\n\nexport const loadCharacterMenu = () => ([\n    createGameText({\n        text: 'Select a Character',\n        baseline: 'top',\n        align: 'left'\n    }, '5%', '5%'),\n    createCharacterMenu()\n])","import { coalesceX, coalesceZ, GAME_HEIGHT_STUDS } from \"Dimensions\";\nimport { Character, createFloor, createOrderBoard, createScoreCounter, createTimer, createWall, isCuttingBoard } from \"Objects\";\nimport { GameObject, GameState } from \"State\";\nimport { canProvide, HasHitBox } from \"Traits\";\nimport { createBreadingTable, createBucket, createCharacter, createCuttingBoard, createFryer, createPickUpCounter, createTrashCan, createTrayStack } from \"Objects\";\n\n\nexport const wall = () => createWall()\n\nexport const fry1 = createFryer();\nexport const fry2 = createFryer();\nexport const fry3 = createFryer();\nexport const bTb1 = createBreadingTable();\nexport const bTb2 = createBreadingTable();\nexport const sTb1 = createBreadingTable(true);\nexport const sTb2 = createBreadingTable(true);\nexport const cBrd = () => createCuttingBoard();\nexport const trsh = () => createTrashCan();\n\nexport const trSt = () => createTrayStack();\nexport const piUp = createPickUpCounter();\n\nexport const buns = () => createBucket('bun')\nexport const pikl = () => createBucket('pickles')\nexport const usaC = () => createBucket('american-cheese')\nexport const prJk = () => createBucket('pepper-jack-cheese')\nexport const ltce = () => createBucket('lettuce-head')\nexport const tmto = () => createBucket('tomato')\nexport const ptat = () => createBucket('potato')\nexport const chic = () => createBucket('raw-chicken-breast')\nexport const orng = () => createBucket('mandarin-oranges')\nexport const strb = () => createBucket('strawberries')\nexport const appl = () => createBucket('apple')\nexport const blbr = () => createBucket('blueberries')\n\nexport const cfaS = () => createBucket('cfa-sauce');\n\n\nexport type Tile = GameObject & HasHitBox | (() => GameObject & HasHitBox) | null;\n\ntype C = Character | null\n\nexport function tileLevel(matrix: (c1: C, c2: C, c3: C, c4: C) => Tile[][], state: GameState): GameObject[]{\n    let objects: GameObject[] = [];\n\n    let z = coalesceZ(`${GAME_HEIGHT_STUDS - 2}studs`) as number;\n\n    let c1 = state.selectedCharacters[1] === null ? null : createCharacter(state.selectedCharacters[1], 1)\n    let c2 = state.selectedCharacters[2] === null ? null : createCharacter(state.selectedCharacters[2], 2)\n    let c3 = state.selectedCharacters[3] === null ? null : createCharacter(state.selectedCharacters[3], 3)\n    let c4 = state.selectedCharacters[4] === null ? null : createCharacter(state.selectedCharacters[4], 4)\n\n\n    for(let row of matrix(c1, c2, c3, c4)){\n        let x = 0;\n        for(let column of row){\n            if(column !== null){\n                let object = typeof column === 'function' ? column() : column;\n                if(!objects.includes(object)){\n                    if(isCuttingBoard(object) || canProvide(object)){\n                        let wall = createWall(x, z);\n                        objects.push(wall, object)\n                        objects = wall.handleDropped(object, objects, 1);\n                    } else {\n                        Object.assign(object.hitbox, {\n                            x, z\n                        })\n                        objects.push(object)\n                    }\n                }\n            }\n\n            x = x + coalesceX('2studs')\n        }\n        z = z - coalesceZ('2studs')\n    }\n\n    return objects;\n}","import { Level } from \"Levels\";\nimport { Character, createFloor, createOrderBoard, createScoreCounter, createTimer, FoodItemId, OrderTimeline, randomElement } from \"Objects\";\nimport type { GameObject, GameState } from \"State\";\nimport { bTb1, bTb2, buns, cBrd, chic, fry1, fry2, fry3, ltce, pikl, piUp, ptat, Tile, tileLevel, tmto, trsh, trSt, usaC, wall } from \"./utils\";\n\nconst map = (cha1: Tile, cha2: Tile, cha3: Tile, cha4: Tile) => ([\n    [wall, piUp, piUp, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall ],\n    [null, null, null, null, fry3, fry3, cBrd, ptat, wall, null, null, null, null, wall, null, fry1, fry1, null, fry2, fry2 ],\n    [null, ltce, null, null, null, null, null, null, cha1, cha2, null, wall, null, null, null, null, null, null, null, null ],\n    [null, tmto, null, null, null, null, null, null, cha3, cha4, null, wall, null, null, null, null, null, null, chic, null ],\n    [null, usaC, null, null, null, null, null, null, null, null, null, trSt, null, null, null, null, null, null, chic, null ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, trsh, null ],\n    [null, null, pikl, buns, null, null, null, null, null, null, null, null, null, bTb1, bTb1, null, bTb2, bTb2, null, null ],\n])\n\nexport const HowWillWeTopThis: Level = {\n    id: 2,\n    name: 'How Will We Top This?',\n    targetScores: [ 5, 10, 15 ],\n    tutorialEntries: ['deluxe-sandwich'],\n    getObjects(state: GameState){\n        return [\n            createFloor(),\n            createOrderBoard(orders),\n            createTimer(state.frameNumber, 180 * 1000 / (1000/25)),\n            createScoreCounter(),\n            ...tileLevel(map, state)\n        ]\n    }\n}\n\nconst getEntree = () => randomElement<FoodItemId>([ 'deluxe-sandwich', 'original-sandwich', 'original-sandwich-no-pickles', 'deluxe-sandwich-no-pickles'])\n\nconst getMeal = (): FoodItemId[] => [ getEntree(), 'waffle-fries' ]\n\nconst getEntreeOnly = (): FoodItemId[] => [ getEntree() ]\n\nconst orders : OrderTimeline = [\n    [0, () => ['original-sandwich']],\n    [5, () => ['deluxe-sandwich']],\n    [25, getMeal],\n]","import { Level } from \"Levels\";\nimport { Character, createFloor, createOrderBoard, createScoreCounter, createTimer, FoodItemId, OrderTimeline, randomElement } from \"Objects\";\nimport { GameState } from \"State\";\nimport { appl, blbr, bTb1, bTb2, buns, cBrd, cfaS, chic, fry1, fry2, ltce, orng, pikl, piUp, ptat, strb, Tile, tileLevel, trsh, trSt, wall } from \"./utils\";\n\nconst map = (cha1: Tile, cha2: Tile, cha3: Tile, cha4: Tile) => ([\n    [wall, wall, wall, piUp, piUp, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, fry1, fry1, buns, pikl, fry2, fry2, trsh, null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],\n    [null, null, null, cha1, cha2, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],\n    [null, null, null, null, chic, bTb1, bTb1, wall, trSt, ptat, cfaS, cBrd, bTb2, bTb2, null, null, null, null, null, null],\n])\n\nexport const LetsGetSaucy : Level = {\n    id: 3,\n    name: 'Let\\'s Get Saucy',\n    targetScores: [ 5, 10, 15 ],\n    tutorialEntries: [ 'fried-nuggets', 'fruit-cup' ],\n    getObjects(state: GameState){\n        return [\n            createFloor(),\n            createOrderBoard(orders),\n            createTimer(state.frameNumber, 180 * 1000 / (1000/25)),\n            createScoreCounter(),\n            ...tileLevel(map, state)\n        ]\n    }\n}\n\nconst getEntree = () => randomElement<FoodItemId>([ 'deluxe-sandwich', 'original-sandwich', 'original-sandwich-no-pickles', 'deluxe-sandwich-no-pickles'])\n\nconst getMeal = (): FoodItemId[] => [ getEntree(), 'waffle-fries' ]\n\nconst getEntreeOnly = (): FoodItemId[] => [ getEntree() ]\n\nconst orders : OrderTimeline = [\n    [0, () => ['original-sandwich']],\n    [5, () => ['deluxe-sandwich']],\n    [25, getMeal],\n]","import { Level } from \"Levels\";\nimport { Character, createFloor, createOrderBoard, createScoreCounter, createTimer, FoodItemId, OrderTimeline, randomElement } from \"Objects\";\nimport { GameState } from \"State\";\nimport { appl, blbr, bTb1, bTb2, buns, cBrd, cfaS, chic, fry1, fry2, fry3, ltce, orng, pikl, piUp, ptat, strb, Tile, tileLevel, trsh, trSt, wall } from \"./utils\";\n\nconst map = (cha1: Tile, cha2: Tile, cha3: Tile, cha4: Tile) => ([\n    [wall, wall, wall, wall, wall, wall, wall, wall, piUp, piUp, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall],\n    [null, null, fry3, fry3, null, null, wall, null, null, null, null, wall, null, fry1, fry1, null, fry2, fry2, null, null ],\n    [null, cBrd, null, null, null, null, wall, null, cha1, cha2, null, wall, null, null, null, null, null, null, null, null ],\n    [null, ptat, null, null, null, null, wall, null, cha3, cha4, null, wall, null, null, null, null, null, null, chic, null ],\n    [null, null, null, null, null, null, trSt, null, null, null, null, trSt, null, null, null, null, null, null, chic, null ],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, trsh, null ],\n    [null, null, pikl, buns, null, null, null, null, null, null, null, null, null, bTb1, bTb1, null, bTb2, bTb2, null, null ],\n])\n\nexport const TheOriginal : Level = {\n    id: 1,\n    name: 'The Original',\n    targetScores: [ 5, 10, 15 ],\n    tutorialEntries: [ 'original-sandwich', 'original-sandwich-no-pickles', 'waffle-fries' ],\n    getObjects(state: GameState){\n        return [\n            createFloor(),\n            createOrderBoard(orders),\n            createTimer(state.frameNumber, 180 * 1000 / (1000/25)),\n            createScoreCounter(),\n            ...tileLevel(map, state)\n        ]\n    }\n}\n\nfunction getEntree(): FoodItemId {\n    return randomElement([ 'original-sandwich', 'original-sandwich-no-pickles' ])\n}\n\nfunction getMeal(): FoodItemId[] {\n    return [ getEntree(), 'waffle-fries' ]\n}\n\nfunction getEntreeOnly(): FoodItemId[]{\n    return [ getEntree() ]\n}\n\nconst orders: OrderTimeline = [\n    [0, () => [ 'original-sandwich' ]],\n    [5, () => [ 'original-sandwich-no-pickles']],\n    [20, () => [ 'waffle-fries' ] ],\n    [20, getMeal],\n    [15, getEntreeOnly],\n    [15, getMeal],\n    [25, getMeal],\n    [0, getMeal],\n    [15, getEntreeOnly],\n    [0, getMeal],\n    [5, getEntreeOnly],\n    [5, getMeal],\n    [5, getMeal]\n]","import { Level } from \"Levels\";\nimport { Character, createFloor, createOrderBoard, createScoreCounter, createTimer, FoodItemId, OrderTimeline, randomElement } from \"Objects\";\nimport { GameState } from \"State\";\nimport { appl, blbr, bTb1, bTb2, buns, cBrd, cfaS, chic, fry1, fry2, ltce, orng, pikl, piUp, ptat, strb, Tile, tileLevel, trsh, trSt, wall } from \"./utils\";\n\nconst map = (cha1: Tile, cha2: Tile, cha3: Tile, cha4: Tile) => ([\n    [wall, wall, wall, piUp, piUp, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, fry1, fry1, buns, pikl, fry2, fry2, trsh, null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],\n    [null, null, null, cha1, cha2, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],\n    [null, null, null, null, chic, bTb1, bTb1, wall, trSt, ptat, cfaS, cBrd, bTb2, bTb2, null, null, null, null, null, null],\n])\n\nexport const TrulyAPleasure : Level = {\n    id: 5,\n    name: 'Truly A Pleasure',\n    targetScores: [ 5, 10, 15 ],\n    tutorialEntries: [],\n    getObjects(state: GameState){\n        return [\n            createFloor(),\n            createOrderBoard(orders),\n            createTimer(state.frameNumber, 180 * 1000 / (1000/25)),\n            createScoreCounter(),\n            ...tileLevel(map, state)\n        ]\n    }\n}\n\nconst getEntree = () => randomElement<FoodItemId>([ 'deluxe-sandwich', 'original-sandwich', 'original-sandwich-no-pickles', 'deluxe-sandwich-no-pickles'])\n\nconst getMeal = (): FoodItemId[] => [ getEntree(), 'waffle-fries' ]\n\nconst getEntreeOnly = (): FoodItemId[] => [ getEntree() ]\n\nconst orders : OrderTimeline = [\n    [0, () => ['original-sandwich']],\n    [5, () => ['deluxe-sandwich']],\n    [25, getMeal],\n]","import { Level } from \"Levels\";\nimport { Character, createFloor, createOrderBoard, createScoreCounter, createTimer, FoodItemId, OrderTimeline, randomElement } from \"Objects\";\nimport { GameObject, GameState } from \"State\";\nimport { bTb1, buns, cBrd, chic, fry1, fry2, ltce, pikl, piUp, sTb1, Tile, tileLevel, tmto, trsh, trSt, usaC, wall } from \"./utils\";\n\nconst map = (cha1: Tile, cha2: Tile) => ([\n    [wall, wall, wall, piUp, piUp, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, fry1, fry1, pikl, fry2, fry2, pikl, null, null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null, null, null, cha2, trsh, null, null, null, null, null, null, null, null],\n    [null, null, null, cha1, null, null, null, null, null, null, null, buns, null, null, null, null, null, null, null, null],\n    [null, null, bTb1, bTb1, chic, sTb1, sTb1, wall, wall, trSt, usaC, null, null, null, null, null, null, null, null, null],\n])\n\nexport const TurnUpTheHeat: Level = {\n    id: 4,\n    name: 'Turn Up the Heat',\n    targetScores: [ 5, 10, 15 ],\n    tutorialEntries: [ 'spicy-sandwich', 'spicy-deluxe-sandwich' ],\n    getObjects(state: GameState){\n        return [\n            createFloor(),\n            createOrderBoard(orders),\n            createTimer(state.frameNumber, 180 * 1000 / (1000/25)),\n            createScoreCounter(),\n            ...tileLevel(map, state)\n        ]\n    }\n}\n\n\nconst getEntree = () => randomElement<FoodItemId>([ 'deluxe-sandwich', 'original-sandwich', 'original-sandwich-no-pickles', 'deluxe-sandwich-no-pickles'])\n\nconst getMeal = (): FoodItemId[] => [ getEntree(), 'waffle-fries' ]\n\nconst getEntreeOnly = (): FoodItemId[] => [ getEntree() ]\n\nconst orders : OrderTimeline = [\n    [0, () => ['original-sandwich']],\n    [5, () => ['deluxe-sandwich']],\n    [25, getMeal],\n]","import { FoodItemId } from \"Objects\";\nimport type { GameObject, GameState } from \"State\";\nimport { HowWillWeTopThis } from \"./HowWillWeTopThis\";\nimport { LetsGetSaucy } from \"./LetsGetSaucy\";\nimport { TheOriginal } from \"./TheOriginal\";\nimport { TrulyAPleasure } from \"./TrulyAPleasure\";\nimport { TurnUpTheHeat } from \"./TurnUpTheHeat\";\n\nexport type Level = {\n    id: number;\n    name: string;\n    targetScores: [ number, number, number ];\n    getObjects(state: GameState): GameObject[];\n    tutorialEntries: FoodItemId[]\n}\n\nexport const Levels: Level[] = [\n    TheOriginal,\n    HowWillWeTopThis,\n    LetsGetSaucy,\n    TurnUpTheHeat,\n    TrulyAPleasure\n]\n\nexport function isLevelUnlocked(state: GameState, levelId: number){\n    if(state.devMode) return true;\n    let levelIndex = Levels.findIndex( level => level.id === levelId);\n    let formerLevel = Levels[levelIndex-1];\n    if(!formerLevel) return true;\n    return Boolean(state.highScores[formerLevel.id]);\n}\n","import { Dimension } from \"Dimensions\";\nimport { isLevelUnlocked, Levels } from \"Levels\";\nimport { createStarDisplay } from \"Objects\";\nimport { GameState } from \"State\";\nimport { HasBoundingbox } from \"Traits\";\nimport { createButton } from \"./Button\";\nimport { createGameText } from \"./GameText\";\nimport { loadCharacterMenu } from \"./loadCharacterMenu\";\n\nfunction spaceEvenly(x: Dimension, y: Dimension, width: Dimension, height: Dimension, objects: HasBoundingbox[]) {\n    return\n}\n\nexport const loadLevelMenu = (state: GameState) => ([\n    createGameText({\n        text: 'Select a Level',\n        baseline: 'top',\n        align: 'left'\n    }, '5%', '5%'),\n    ...Levels.map((level, index) => (\n        createButton({text: `${index+1}. ${isLevelUnlocked(state, level.id) ? level.name : 'Locked'}`, align: 'right'}, index === 0, '50%', 12 * (index + 2) + '%', (state): GameState => (\n            isLevelUnlocked(state, level.id)\n                ? {\n                    ...state,\n                    selectedLevel: level,\n                    selectedCharacters: { 1: null, 2: null, 3: null, 4: null },\n                    objects: loadCharacterMenu()\n                }\n                : state\n        ))\n    )),\n    ...Levels.map((level, index) => (\n        createStarDisplay(state.highScores[level.id] || 0, '10%', '57%',  12 * (index + 2) - 0.2 + '%')\n    ))\n])","import { coalesceX, coalesceY, Dimension } from \"Dimensions\";\nimport {  create2DRenderer } from \"Renderer\";\nimport { GameObject, GameState } from \"State\";\nimport {  createWithBoundingbox, createWithId, HasBoundingbox, HasId, HasOverlay, HasRenderer, Renderer } from \"Traits\";\n\ntype Overlay = HasId & HasBoundingbox & HasOverlay & HasRenderer & {\n    color: string\n};\n\nexport const createOverlay = (color: string = 'rgba(0, 0, 0, 0.75)'): Overlay => ({\n    ...createWithId(),\n    ...createWithBoundingbox('100%', '100%', 0, 0),\n    hasOverlay: true,\n    render,\n    color\n})\n\nconst render = function(_1: GameState, { boundingbox, color  }: Overlay, ctx: CanvasRenderingContext2D){\n    const { x, y, width, height } = boundingbox\n    ctx.fillStyle = color;\n    ctx.fillRect(x, y, width, height)\n} as Renderer;","import { Controls } from \"Controls\";\nimport { coalesceX, coalesceY, Dimension } from \"Dimensions\";\nimport { Level, Levels } from \"Levels\";\nimport { calculateFinalScore, createScoreCounter, createStarDisplay } from \"Objects\";\nimport { GameObject, GameState } from \"State\";\nimport { HasBoundingbox } from \"Traits\";\nimport { createButton } from \"./Button\";\nimport { loadLevelMenu } from \"./loadLevelMenu\";\nimport { createOverlay } from \"./Overlay\";\n\n\nexport const loadFinishedLevelMenu = (state: GameState) => {\n\n    const finalScore = calculateFinalScore(state);\n\n    let stars: 0 | 1 | 2 | 3 = 0;\n\n    const level = state.selectedLevel as Level;\n\n    if(finalScore >= level.targetScores[0]){\n        stars = 1\n    }\n\n    if(finalScore >= level.targetScores[1]){\n        stars = 2\n    }\n\n    if(finalScore >= level.targetScores[2]){\n        stars = 3\n    }\n\n    const formerHighScore = state.highScores[level.id] || 0;\n    const postLevelState : GameState = {\n        ...state,\n        isPaused: false,\n        canPause: false,\n        selectedLevel: null,\n        highScores: {\n            ...state.highScores,\n            [level.id]: Math.max(formerHighScore, stars) as 0 | 1 | 2 | 3\n        }\n    }\n\n    const objects = [\n        createOverlay(),\n        createScoreCounter(125, '50%', '25%'),\n        createStarDisplay(stars, '20%', '50%', '45%', Date.now(), level.targetScores.map( score => score.toString())),\n        createButton({ text: 'Return to Menu', color: 'white' }, true, '50%', '60%', handleReturnToLevelMenu)\n    ]\n\n\n\n    function handleReturnToLevelMenu(): GameState{\n\n        return {\n            ...postLevelState,\n            objects: loadLevelMenu(postLevelState)\n        }\n    }\n\n    return objects;\n}\n","import { Controls } from \"Controls\";\nimport { Dimension } from \"Dimensions\";\nimport { Levels } from \"Levels\";\nimport { GameObject, GameState } from \"State\";\nimport { HasBoundingbox } from \"Traits\";\nimport { createButton } from \"./Button\";\nimport { loadFinishedLevelMenu } from \"./loadFinishedLevelMenu\";\nimport { createOverlay } from \"./Overlay\";\n\n\nexport const loadPausedLevelMenu = () => {\n\n    const objects = [\n        createOverlay(),\n        createButton({ text: 'Continue', color: 'white' }, true, '50%', '40%', handleContinue),\n        createButton({ text: 'Quit', color: 'white' }, false, '50%', '50%', handleQuit)\n    ]\n\n    function handleContinue(state: GameState): GameState {\n        return {\n            ...state,\n            isPaused: false,\n            objects: state.objects.filter( object => !menuObjectIds.includes(object.id))\n        }\n    }\n\n    function handleQuit(state: GameState): GameState {\n        return {\n            ...state,\n            objects: [\n                ...state.objects.filter( object => !menuObjectIds.includes(object.id)),\n                ...loadFinishedLevelMenu(state)\n            ]\n        }\n    }\n\n    const menuObjectIds = objects.map( object => object.id )\n\n    return objects;\n}\n\nexport function pauseMenuReducer(_: GameObject, state: GameState){\n    if(!state.canPause) return state;\n\n    for(let controller of Controls){\n        if(controller.justPressed('minus') && !state.isPaused){\n            return {\n                ...state,\n                isPaused: true,\n                objects: [\n                    ...state.objects,\n                    ...loadPausedLevelMenu()\n                ]\n            }\n        }\n    }\n\n    return state\n}","\n\nexport const Persistence = {\n\n    load(key: string, fallback: any): any{\n        try {\n            let encoded = localStorage.getItem(key);\n            return encoded !== null ? JSON.parse(encoded) : fallback;\n        } catch(err) {\n            return fallback\n        }\n    },\n\n    save(key: string, data: any){\n        localStorage.setItem(key, JSON.stringify(data))\n    }\n}","import { createCFALogo, createGameText, createLegoLogo, loadLevelMenu } from \"Menus\";\nimport { loadPausedLevelMenu } from \"Menus\";\nimport { GameState } from \"./GameState\";\nimport { Persistence } from \"./persistence\";\n\nexport const initialState: GameState = {\n    frameNumber: 0,\n    isStarted: false,\n    isPaused: false,\n    canPause: false,\n\n    selectedLevel: null,\n    selectedCharacters: {\n        1: null,\n        2: null,\n        3: null,\n        4: null\n    },\n\n    objects: [\n        createLegoLogo('20%', 0, '15%', '15%'),\n        createCFALogo('50%', 0, '37%', '15%'),\n        createGameText('Press Start', '50%', '70%', true)\n    ],\n\n    highScores: Persistence.load('highScores', {}),\n\n    devMode: Persistence.load('devMode', false)\n}\n","import { coalesceX, coalesceY, Dimension } from \"Dimensions\";\nimport {  create2DRenderer } from \"Renderer\";\nimport {  createWithBoundingbox, createWithId, HasBoundingbox, HasId, HasRenderer } from \"Traits\";\n\ntype LegoLogo = HasId & HasBoundingbox & HasRenderer;\n\nexport const createLegoLogo = (width: Dimension = 0, height: Dimension = 0, x: Dimension = 0, y: Dimension = 0): LegoLogo => ({\n    ...createWithId(),\n    ...createWithBoundingbox(width, height, x, y),\n   render: create2DRenderer({ sprite: 'lego-logo', fade: { \n    startAt: 1, duration: 2000\n   } })\n})","import { coalesceX, coalesceY, Dimension } from \"Dimensions\";\nimport {  create2DRenderer } from \"Renderer\";\nimport {  createWithBoundingbox, createWithId, HasBoundingbox, HasId, HasRenderer } from \"Traits\";\n\ntype CFALogo = HasId & HasBoundingbox & HasRenderer;\n\nexport const createCFALogo = (width: Dimension = 0, height: Dimension = 0, x: Dimension = 0, y: Dimension = 0): CFALogo => ({\n    ...createWithId(),\n    ...createWithBoundingbox(width, height, x, y),\n   render: create2DRenderer({ sprite: 'cfa-logo', fade: {\n    startAt: 1, duration: 2000\n   }})\n})","import { Controls } from \"Controls\";\nimport { coalesceX, coalesceY, Dimension, WIDTH } from \"Dimensions\";\nimport { Levels } from \"Levels\";\nimport { breadYield, chopYield, FoodItemId, fryYield, Recipe, recipes, spicyBreadYield } from \"Objects\";\nimport { create2DRenderer } from \"Renderer\";\nimport { GameObject, GameState } from \"State\";\nimport { createWithBoundingbox, createWithId, HasBoundingbox, HasId, HasOverlay, HasRenderer } from \"Traits\";\nimport { createButton } from \"./Button\";\nimport { createGameText } from \"./GameText\";\nimport { loadFinishedLevelMenu } from \"./loadFinishedLevelMenu\";\nimport { createOverlay } from \"./Overlay\";\n\n\nexport const loadTutorialScreen = (state: GameState) => {\n    let foodItems = state.selectedLevel?.tutorialEntries as FoodItemId[];\n\n    const objects = [\n        createOverlay('rgba(255, 255, 255, 0.75)'),\n        createGameText({\n            text: 'Help',\n            color: '#e60e33',\n            baseline: 'top',\n            align: 'left'\n        }, '5%', '5%'),\n\n        ...loadTutorial(foodItems),\n\n        createButton({ text: 'Close', color: '#e60e33', baseline: 'top', align: 'right' }, true, WIDTH - coalesceX('5%'), '5%', handleContinue),\n    ]\n\n    function handleContinue(state: GameState): GameState {\n        return {\n            ...state,\n            isPaused: false,\n            objects: state.objects.filter(object => !tutorialScreenObjectIds.includes(object.id))\n        }\n    }\n\n    const tutorialScreenObjectIds = objects.map(object => object.id)\n\n    return objects;\n}\n\nexport function tutorialScreenReducer(_: GameObject, state: GameState) {\n    if (!state.canPause) return state;\n\n    for (let controller of Controls) {\n        if (controller.justPressed('tertiaryAction') && !state.isPaused) {\n            return {\n                ...state,\n                isPaused: true,\n                objects: [\n                    ...state.objects,\n                    ...loadTutorialScreen(state)\n                ]\n            }\n        }\n    }\n\n    return state\n}\n\n\n\nfunction loadTutorial(foodItemIds: FoodItemId[]): GameObject[] {\n    let s = createTutorialSprite;\n    const tutorial: GameObject[] = [];\n\n    let y: number = coalesceY('12%')\n\n    for (let foodItemId of foodItemIds) {\n        let recipe = recipes.find(recipe => recipe.name === foodItemId) as Recipe;\n        if (recipe) {\n            tutorial.push(\n                ...loadRecipe(foodItemId, recipe.ingredientList, y)\n            )\n            for(let ingredientId of recipe.ingredientList){\n                if(canBeCreated(ingredientId)){\n                    y += coalesceY('15%')\n                    tutorial.push(...loadIngredientCreationProcess(ingredientId, y, 12))\n                }\n            }\n        } else if (canBeCreated(foodItemId)) {\n            tutorial.push(\n                s('6%', y, `food-items/${foodItemId}`),\n                s('12%', y, 'equals'),\n                ...loadIngredientCreationProcess(foodItemId, y, 18)\n            )\n        }\n\n        y += coalesceY('15%')\n    }\n\n    return tutorial;\n}\n\nfunction loadRecipe(recipeName: FoodItemId, ingredientList: FoodItemId[], y: Dimension): GameObject[] {\n    let s = createTutorialSprite;\n    return [\n        s('6%', y, `food-items/${recipeName}`),\n        s('12%', y, 'equals'),\n        ...join(ingredientList.map((foodItemId, index) => (\n            s(18 + (6 * (index * 2)) + '%', y, `food-items/${foodItemId}`)\n        )), i => s(18 + (6 * (i * 2 - 1)) + '%', y, 'plus'))\n    ]\n}\n\nfunction loadIngredientCreationProcess(foodItem: FoodItemId, y: Dimension, indentation: number = 0): GameObject[] {\n    let s = createTutorialSprite;\n\n    const steps : string[] = [];\n\n    steps.unshift(`food-items/${foodItem}`)\n\n    while(canBeCreated(foodItem)){\n\n        let record: Partial<Record<FoodItemId, FoodItemId>>, sprite: string;\n\n        if(itemsThatComeFromChopping.includes(foodItem)){\n            record = chopYield\n            sprite = 'cutting-board'\n        } else if(itemsThatComeFromFrying.includes(foodItem)){\n            record = fryYield\n            sprite = 'fryer/off'\n        } else if(itemsThatComeFromBreading.includes(foodItem)){\n            record = breadYield\n            sprite = 'breading-table'\n        } else if(itemsThatComeFromSpicyBreading.includes(foodItem)){\n            record = spicyBreadYield\n            sprite = 'spicy-breading-table'\n        }  else {\n            throw Error(`Couldnt figure out how ${foodItem} got created`)\n        }\n\n        steps.unshift(sprite);\n        foodItem = reverseLookup(record, foodItem);\n        steps.unshift(`food-items/${foodItem}`);\n    }\n\n    const result = steps.map( (step,i) => s(indentation + (i*2)*6 + '%', y, step))\n\n    return join(result, i => s(indentation + (i*2-1)*6 + '%', y, 'arrow'));\n}\n\nfunction join(array: GameObject[], callback: (i: number) => GameObject): GameObject[] {\n    const result: GameObject[] = []\n    for (let i = 0; i < array.length; i++) {\n        if (i !== 0) result.push(callback(i));\n        result.push(array[i]);\n    }\n    return result\n}\n\nconst itemsThatComeFromChopping = Object.values(chopYield)\nconst itemsThatComeFromFrying = Object.values(fryYield)\nconst itemsThatComeFromBreading = Object.values(breadYield)\nconst itemsThatComeFromSpicyBreading = Object.values(spicyBreadYield)\n\nfunction canBeCreated(foodItemId: FoodItemId) {\n    return (\n        itemsThatComeFromChopping.includes(foodItemId)\n        || itemsThatComeFromFrying.includes(foodItemId)\n        || itemsThatComeFromBreading.includes(foodItemId)\n        || itemsThatComeFromSpicyBreading.includes(foodItemId)\n    )\n}\n\nfunction reverseLookup(record: Partial<Record<FoodItemId, FoodItemId>>, foodItemId: FoodItemId): FoodItemId {\n    for(let strKey in record){\n        const key = strKey as FoodItemId\n        if(record[key] === foodItemId){\n            return key;\n        }\n    }\n    throw Error(\"Invalid Reverse Lookup\")\n}\n\nexport type TutorialSprite = HasId & HasRenderer & HasBoundingbox & HasOverlay;\n\nexport const createTutorialSprite = (x: Dimension, y: Dimension, sprite: string): TutorialSprite => ({\n    ...createWithId(),\n    ...createWithBoundingbox('5%', '5%', x, y),\n    render: create2DRenderer(sprite),\n    hasOverlay: true\n})","import { canBeCarriedReducer, canBeControlledReducer, canBreadReducer, canCarryReducer, canChopReducer } from \"Traits\";\nimport { GameState } from \"./GameState\";\nimport { GameObject } from \"./GameObject\";\nimport { fryerReducer, orderBoardReducer, pickUpCounterReducer, timerReducer } from \"Objects\";\nimport { buttonReducer, loadLevelMenu, pauseMenuReducer } from \"Menus\";\nimport { Controls } from \"Controls\";\nimport { characterMenuReducer } from \"Menus/CharacterMenu\";\nimport { Persistence } from \"./persistence\";\nimport { AssetManager } from \"Renderer\";\nimport { tutorialScreenReducer } from \"Menus/loadTutorialScreen\";\n\nconst allReducers = [\n    canBeControlledReducer,\n    canCarryReducer,\n    canChopReducer,\n    canBeCarriedReducer,\n    fryerReducer,\n    canBreadReducer,\n    orderBoardReducer,\n    timerReducer,\n\n    buttonReducer,\n\n    startButtonReducer,\n    pauseMenuReducer,\n    tutorialScreenReducer,\n    characterMenuReducer,\n    pickUpCounterReducer\n];\n\nexport function gameReducer(state: GameState){\n    AssetManager.clearAudio();\n\n    state = state.objects.reduce(objectReducer, {\n        ...state,\n        frameNumber: state.isPaused ? state.frameNumber : state.frameNumber + 1\n    });\n\n    Persistence.save('highScores', state.highScores);\n\n    return state;\n}\n\nexport function objectReducer(state: GameState, { id }: GameObject): GameState{\n    return allReducers.reduce( (state, reducer) => {\n        const object = state.objects.find( object => object.id === id);\n        if(object) return reducer(object, state)\n        return state\n    }, state);\n}\n\n\nfunction startButtonReducer(object: GameObject, state: GameState){\n\n    for(let controller of Controls){\n        if(controller.justPressed('start') && state.selectedLevel === null){\n            return {\n                ...state,\n                isStarted: true,\n                objects: loadLevelMenu(state)\n            }\n        }\n\n        const atLeastOneCharacterSelected = Object.values(state.selectedCharacters).some( selection => selection !== null)\n\n        if(controller.justPressed('start') && state.selectedLevel !== null && atLeastOneCharacterSelected){\n            return {\n                ...state,\n                canPause: true,\n                objects: state.selectedLevel.getObjects(state)\n            }\n        }\n    }\n\n    return state\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","import { GameState, initialState, gameReducer } from 'State';\nimport { createGameRenderer } from 'Renderer';\nimport { Controls, recordInputs } from 'Controls';\nimport { Persistence } from 'State/persistence';\n\nexport const MS_PER_FRAME = 1000 / 25;\n\nexport function startGame(){\n    let state: GameState = initialState\n\n    const canvas = document.createElement('canvas');\n\n    const renderFrame = createGameRenderer(canvas);\n\n    const history: GameState[] = [];\n\n    function runFrame(){\n        // Save Current State\n        // history.push(state);\n\n        // Run Reducers\n        state = gameReducer(state);\n\n        // Save that the current input states have been addressed\n        recordInputs();\n\n        // Render\n        renderFrame(state)\n    }\n\n    const interval = setInterval(runFrame, MS_PER_FRAME);\n\n    function clearData(){\n        clearInterval(interval);\n        localStorage.clear();\n        window.location.reload();\n    }\n\n    function startDevMode(){\n        Persistence.save('devMode', true);\n        window.location.reload();\n    }\n\n    function stopDevMode(){\n        Persistence.save('devMode', false);\n        window.location.reload();\n    }\n\n    const game = {\n        history,\n        canvas,\n        clearData,\n        startDevMode,\n        stopDevMode\n    }\n\n    return game;\n}\n","import { startGame } from \"./startGame\";\n\nconst Root = document.getElementById('root') as HTMLElement;\ndocument.body.style.margin = '0px';\ndocument.body.style.overflow = 'hidden';\n\nconst game = startGame();\n\nRoot.append(game.canvas)\n\n\n// @ts-ignore\nwindow.game = game"],"names":["updateGameObjectById","objects","target","map","object","id","removeGameObjectById","filter","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_arrayLikeToArray","arr","len","arr2","Array","_iterableToArray","iter","Symbol","iterator","from","_unsupportedIterableToArray","o","minLen","n","prototype","toString","call","slice","constructor","name","test","_toConsumableArray","isArray","TypeError","WIDTH","window","innerWidth","HEIGHT","innerHeight","GAME_WIDTH_STUDS","coalesceX","a","endsWith","parsePercent","parseFloat","Error","coalesceZ","coalesceY","containerSize","toStuds","createVector","speed","direction","north","x","z","south","east","west","createVectors","_arrayWithHoles","_nonIterableRest","_slicedToArray","_i","_s","_e","_arr","_n","_d","next","done","err","hasHitbox","hitbox","createWithHitbox","dx","dz","y","getOverlappingObjects","b","createCanFaceADirection","facing","getObjectsInfrontOf","getAreaInfrontOf","offset","offsets","padding","canHandleDrop","this","counterSpaceTakenBy","handleDropped","droppedObject","canBeCarried","Boolean","canBePickedUp","carriedBy","createCanBeCarried","handlePickedUpBy","canBeDropped","handleDrop","carrier","update","updateGameObjectsWhere","positionInfrontOfCarrier","undefined","hasCounterSpace","counterSpaceContains","space","find","frameNumber","somethingToDropOn","_typeof","_regeneratorRuntime","exports","Op","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","Promise","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","_defineProperties","props","descriptor","Controller","instance","Constructor","down","up","left","right","primaryAction","secondaryAction","tertiaryAction","start","bumper","minus","lastInput","protoProps","staticProps","control","gamepadInput","gamepadIndex","gamepad","navigator","getGamepads","axes","buttons","pressed","getGamePadInput","assign","Controls","recordInputs","recordInput","keyboardMap","addEventListener","e","repeat","controllerId","createCharacter","characterId","createWithId","createCanBeControlled","createCanCarry","createCanChop","createCanBread","render","create3DRenderer","sprite","getSprite","character","animationState","breading","chopping","moving","carrying","characterLocks","isCharacterUnlocked","devMode","scores","highScores","reduce","total","score","getAverageStars","createWall","createCanBlockMovement","floorWidth","floorHeight","createFloor","_","ctx","fillStyle","fillRect","strokeStyle","cursorX","beginPath","moveTo","lineTo","stroke","cursorY","createFoodItem","foodItemId","foodItem","isFoodItem","recipes","recipeIndex","ingredientList","recipe","sort","createRecipes","_createForOfIteratorHelper","allowArrayLike","it","F","s","f","normalCompletion","didErr","step","_e2","isTray","droppedFoodItem","formerQuantity","contents","consolidateFoodItems","foodItems","results","remainingIngredients","expanded","itemName","quantity","ingredientName","expand","haveEverything","every","ingredient","remaining","isCuttingBoard","choppableIds","includes","content","cuttingBoard","progress","canChop","chop","chopper","newProgress","newFoodItem","chopYield","fryableIds","spicyFryableIds","createFryer","isSpicy","isFryer","finishedAt","onFire","combineRenderers","getSpeed","createProgressRenderer","fryer","createSpicyIconRenderer","retrieve","MS_PER_FRAME","secondsElapased","isFinishedFryer","isSpicyFryable","fryYield","breadableIDs","spicyBreadableIDs","isBreadingTable","createBreadingTable","lastInUse","createContentRenderer","breadingTable","getFlour","canBread","bread","isSpicyBreadable","spicyBreadYield","breadYield","Animations","loadedImages","loadedAudioTracks","aliasedAudioTracks","AssetManager","getImage","path","Image","src","loadImage","image","getAudio","Audio","loadAudio","audio","loadAliasedAudio","alias","loop","play","volume","currentlyPlaying","clearAudio","pause","currentTime","renderFoodItemsInArea","area","foodItemAnimation","width","Math","min","max","scale","size","height","leftPadding","topPadding","drawImage","isOrderBoard","createOrderBoard","upcomingOrders","createHasOverlay","orders","fullfilled","timestampForNextOrder","firstDeadline","secondDeadline","board","roundRect","fill","index","order","framesElapsed","placedAt","lineWidth","randomElement","array","floor","random","guests","tray","orderBoard","splice","fullfilledAt","pickupCounter","lastFullfillment","currentGuest","createScoreCounter","sideLength","createWithBoundingbox","isScoreCounter","counter","boundingbox","finalScore","calculateFinalScore","font","textBaseline","textAlign","strokeText","fillText","timeToDeliveryGreaterThan","deadline","timeToDeliveryLessThan","numberOfExpiredOrders","createBucket","createCanProvide","createTrayStack","createTray","createTimer","startedAt","duration","isTimer","timer","elapsed","totalSeconds","round","minutes","seconds","time","padStart","createStarDisplay","fadeInFrom","labels","hasOverlay","starDisplay","alpha1","alpha2","alpha3","startAt","Date","now","color1","color2","color3","renderStar","color","label","outerRadius","innerRadius","rot","PI","cx","cy","cos","sin","closePath","canBlockMovement","startedDashAt","canBeControlled","canCarry","canProvide","provide","idSerial","createWithOrigin","origin","callback1","callback2","callback3","callback4","createGameRenderer","canvas","style","getContext","clearRect","save","restore","renderers","renderer","create2DRenderer","options","spriteKey","fade","process2DRendererOptions","animation","numberOfSyntheticFrames","ceil","numberOfFrames","ratio","currentSyntheticAnimationFrame","currentAnimationFrame","finalFrame","globalAlpha","process3DRendererOptions","sideview","getSpriteCoords","contentOption","processContentRendererOptions","objectAnimation","objectX","objectY","objectWidth","createTextRenderer","renderText","text","align","baseline","processTextRendererOptions","currentIteration","elapsedThisIteration","createButtonRenderer","button","processButtonRendererOptions","measureText","fontBoundingBoxDescent","actualBoundingBoxLeft","isSelected","setLineDash","createGameText","blink","lastSelectionChange","isButton","createButton","callback","createdAt","characterMatrix","controllerColors","menu","menuWidth","maxCharacterPerRow","row","topMargin","leftMargin","selectedCharacters","some","selection","yIndex","xIndex","entries","selectedCharacterId","Number","outlineColor","outlineWidth","locked","arc","clip","renderCharacterIcon","wall","fry1","fry2","fry3","bTb1","bTb2","sTb1","cBrd","trsh","trSt","piUp","isPickupCounter","c","buns","pikl","usaC","ltce","tmto","ptat","chic","cfaS","tileLevel","matrix","GAME_HEIGHT_STUDS","column","cha1","cha2","cha3","cha4","HowWillWeTopThis","targetScores","tutorialEntries","getObjects","getEntree","LetsGetSaucy","TheOriginal","getMeal","getEntreeOnly","TrulyAPleasure","TurnUpTheHeat","Levels","isLevelUnlocked","levelId","levelIndex","findIndex","level","formerLevel","loadLevelMenu","selectedLevel","isCharacterMenu","createOverlay","_1","loadFinishedLevelMenu","stars","formerHighScore","postLevelState","isPaused","canPause","loadPausedLevelMenu","menuObjectIds","Persistence","fallback","encoded","localStorage","getItem","JSON","parse","data","setItem","stringify","initialState","isStarted","createLegoLogo","createCFALogo","loadTutorialScreen","foodItemIds","createTutorialSprite","tutorial","recipeName","join","loadRecipe","ingredientId","canBeCreated","loadIngredientCreationProcess","loadTutorial","tutorialScreenObjectIds","indentation","steps","unshift","itemsThatComeFromChopping","itemsThatComeFromFrying","itemsThatComeFromBreading","itemsThatComeFromSpicyBreading","reverseLookup","strKey","allReducers","controller","isPressed","justPressed","movedObject","vector","moveObject","hasCollision","outsidePlayArea","justReleased","whatsBeingCarried","targets","objectToPickUp","provider","finishedFryer","provided","track","fryingSounds","fireSounds","beeping1","beeping2","beeping3","breader","getOrder","Infinity","justChangedSelection","currentButton","nextIndex","nextButton","atLeastOneCharacterSelected","newCharacterId","selectedCharacterIds","rowIndex","columnIndex","axis","currentCharacterIdForPlayer","indexOf","playersSelectedCharacter","objectReducer","reducer","Root","document","getElementById","body","margin","overflow","game","createElement","renderFrame","interval","setInterval","gameReducer","history","clearData","clearInterval","clear","location","reload","startDevMode","stopDevMode","startGame","append"],"sourceRoot":""}